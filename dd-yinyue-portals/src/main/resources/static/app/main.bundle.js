webpackJsonp([2],{100:function(e,t,n){"use strict";var o=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,s=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(r<3?i(s):r>3?i(t,n,s):i(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var r=n(2),s=n(32),a=n(28),l=function(){function e(e){this.http=e,this.header_urlencoded={headers:{"Content-Type":"application/x-www-form-urlencoded"}},this.header_json={headers:{"Content-Type":"application/json;charset=utf8"}}}return e.prototype.queryPaperByUserId=function(e){return this.http.get(a.environment.basePath+"test/exam_papers/"+e)},e.prototype.queryPaperById=function(e){return this.http.get(a.environment.basePath+"test/exam_papers?examId="+e)},e.prototype.queryPaperListByCondition=function(e){var t=new s.HttpParams({fromObject:JSON.parse(JSON.stringify(e))});return this.http.get(a.environment.basePath+"test/question_list?"+t)},e.prototype.handleSetPaper=function(e){var t=new s.HttpParams({fromObject:JSON.parse(JSON.stringify(e))});return this.http.post(a.environment.basePath+"test/exam_paper/manual",t,this.header_urlencoded)},e.prototype.automaticSetPaperAct=function(e){var t=new s.HttpParams({fromObject:JSON.parse(JSON.stringify(e))});return this.http.post(a.environment.basePath+"test/exam_paper/auto/act",t,this.header_urlencoded)},e.prototype.automaticSetPaperMusicAbility=function(e){var t=new s.HttpParams({fromObject:JSON.parse(JSON.stringify(e))});return this.http.post(a.environment.basePath+"test/exam_paper/auto/music_ability",t,this.header_urlencoded)},e.prototype.updatePaperBaseInfo=function(e){var t=new s.HttpParams({fromObject:JSON.parse(JSON.stringify(e))});return this.http.put(a.environment.basePath+"test/exam_paper/"+e.id,t,this.header_urlencoded)},e.prototype.deletePaper=function(e,t){return this.http.delete(a.environment.basePath+"test/exam_paper/"+e+"?examId="+t)},e.prototype.setQuestionScore=function(e){var t=new s.HttpParams({fromObject:JSON.parse(JSON.stringify(e))});return this.http.put(a.environment.basePath+"test/exam_paper/"+e.id+"/set_score",t,this.header_urlencoded)},e.prototype.addQuestion=function(e){var t=new s.HttpParams({fromObject:JSON.parse(JSON.stringify(e))});return this.http.put(a.environment.basePath+"test/exam_paper/"+e.id+"/set_questions",t,this.header_urlencoded)},e.prototype.deleteQuestionFromPaper=function(e){return this.http.delete(a.environment.basePath+"test/exam_paper/"+e.id+"/remove_question?questionId="+e.questionId,this.header_urlencoded)},e.prototype.queryAllQuestionsFromPaper=function(e){return this.http.get(a.environment.basePath+"test/exam_paper/"+e+"/questions")},e.prototype.queryAllTest=function(){return this.http.get(a.environment.basePath+"test/exams")},e.prototype.queryTestById=function(e){return this.http.get(a.environment.basePath+"test/exam/"+e)},e.prototype.searchTestBlur=function(e){return this.http.get(a.environment.basePath+"test/exam/search?$condition="+e)},e.prototype.createTest=function(e){var t=new s.HttpParams({fromObject:JSON.parse(JSON.stringify(e))});return this.http.post(a.environment.basePath+"test/exam",t,this.header_urlencoded)},e.prototype.updateTestInfo=function(e){var t=new s.HttpParams({fromObject:JSON.parse(JSON.stringify(e))});return this.http.put(a.environment.basePath+"test/exam/"+e.id,t,this.header_json)},e.prototype.dismissTest=function(e){return this.http.put(a.environment.basePath+"test/exam/nullify/"+e,{id:e},this.header_json)},e.prototype.validateTest=function(e){return this.http.put(a.environment.basePath+"test/exam/valid/"+e,{id:e},this.header_json)},e.prototype.deleteTest=function(e){return this.http.delete(a.environment.basePath+"test/exam/"+e)},e.prototype.getAllKnowledge=function(){return this.http.get(a.environment.basePath+"test/knowledges")},e.prototype.bindClass=function(e){var t=new s.HttpParams({fromObject:JSON.parse(JSON.stringify(e))});return this.http.post(a.environment.basePath+"test/exam/"+e.examId+"/classroom",t,this.header_urlencoded)},e.prototype.bindPaper=function(e){var t=new s.HttpParams({fromObject:JSON.parse(JSON.stringify(e))});return this.http.post(a.environment.basePath+"test/exam/"+e.examId+"/exam_paper",t,this.header_urlencoded)},e.prototype.untiePaper=function(e){return this.http.delete(a.environment.basePath+"test/exam/"+e.examId+"/exam_paper/"+e.examPaperId)},e.prototype.getTopKonwledge=function(){return this.http.get(a.environment.basePath+"test/knowledge/top")},e=o([r.Injectable(),i("design:paramtypes",[s.HttpClient])],e)}();t.TestService=l},11:function(e,t,n){"use strict";var o=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,s=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(r<3?i(s):r>3?i(t,n,s):i(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var r=n(738),s=n(2),a=n(32),l=n(28),c=function(){function e(e){var t=this;this.http=e,this.userInfo=new r.UserInfoModel,this.getUserCharacterInfo=function(){return t.characterData||(t.characterData=JSON.parse(localStorage.getItem("characterInfo"))),t.characterData},this.setUserCharacterInfo=function(e){t.characterData=e,localStorage.setItem("characterInfo",JSON.stringify(e))}}return e.prototype.setUserInfo=function(e){for(var t in e)null!==e[t]&&(this.userInfo[t]=e[t]);localStorage.setItem("userInfo",JSON.stringify(this.userInfo))},e.prototype.getUserInfo=function(){return this.userInfo.is_teacher=this.userInfo.isTeacher,this.userInfo.userId=this.userInfo.id,this.userInfo},e.prototype.getUserHeadPhoto=function(e){var t=this;this.getUserHeadImg(e).subscribe(function(e){200===e.code&&(t.userImage=e.person.photo,t.userInfo.photo=e.person.photo,t.setUserInfo(e.person),localStorage.setItem("userInfo",JSON.stringify(t.userInfo)))},function(e){console.error(e)})},e.prototype.queryUserInfo=function(e){var t=this;this.selfQueryUserInfo(e).subscribe(function(e){200===e.code&&(t.userImage=e.person.photo,t.userInfo.photo=t.userImage,t.setUserInfo(e.person),e.person.isTeacher?t.setUserCharacterInfo(e.classTeacher):t.setUserCharacterInfo(e.classStudent),localStorage.setItem("userInfo",JSON.stringify(t.userInfo)))},function(e){console.error(e)})},e.prototype.getUserHeadImg=function(e){return this.http.get(l.environment.basePath+"user/"+e,{headers:{contentType:"application/x-www-form-urlencoded"}})},e.prototype.selfQueryUserInfo=function(e){return this.http.get(l.environment.basePath+"user/"+e,{headers:{contentType:"application/x-www-form-urlencoded"}})},e=o([s.Injectable(),i("design:paramtypes",[a.HttpClient])],e)}();t.UserInfoService=c},118:function(e,t,n){"use strict";var o=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,s=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(r<3?i(s):r>3?i(t,n,s):i(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s};Object.defineProperty(t,"__esModule",{value:!0});var i=n(2),r=n(808),s=n(814),a=n(817),l=n(820),c=n(823),d=n(12),u=n(6),p=n(34),m=n(432),h=n(826),f=function(){function e(){}return e=o([i.NgModule({imports:[d.FormsModule,u.NgZorroAntdModule.forRoot(),p.CommonModule],declarations:[r.TinyEditorComponent,s.SingleChoiceQuestionComponent,a.MultipleChoiceQuestionComponent,l.VisualSingQuestionComponent,c.ShortAnswerQuestionComponent,m.LodingComponent,h.QuestionFrameComponent],exports:[m.LodingComponent,r.TinyEditorComponent,s.SingleChoiceQuestionComponent,a.MultipleChoiceQuestionComponent,l.VisualSingQuestionComponent,c.ShortAnswerQuestionComponent,h.QuestionFrameComponent],providers:[]})],e)}();t.DdCommonModule=f},1215:function(e,t,n){"use strict";var o=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,s=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(r<3?i(s):r>3?i(t,n,s):i(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var r=n(2),s=n(1216),a=n(77),l=n(6),c=n(11),d=function(){function e(e,t,n){var o=this;this.tas=e,this._message=t,this.uis=n,this.map={BEHIND_BACK_PERFORMANCE:"背奏",BEHIND_BACK_SING:"背唱",MULTI_SELECT:"多选题",SINGLE_SELECT:"单选",PERFORMANCE:"演奏",SHORT_ANSWER:"简答",SIGHT_SINGING:"视唱",SING:"演唱"},this.map_source={EXERCISE:"随堂练习",TASK:"课后作业",CHAPTER_TEST:"单元测试",MIDDLE_TERM_TEST:"期中测试",FINAL_TERM_TEST:"期末考试"},this.questionType=[{label:"单选题",value:"SINGLE_SELECT"},{label:"多选题",value:"MULTI_SELECT"},{label:"简答题",value:"SHORT_ANSWER"},{label:"演唱",value:"SING"},{label:"背唱",value:"BEHIND_BACK_SING"},{label:"背奏",value:"BEHIND_BACK_PERFORMANCE"},{label:"演奏",value:"PERFORMANCE"},{label:"视唱",value:"SIGHT_SINGING"}],this.getQuestionCorrectInfo=function(){o.tas.getQuestionDetailOfClass(o.classId,o.question.question_id).subscribe(function(e){200===e.code?o.questionAnswerDetail=e.details:o._message.error(e.desc)},function(e){console.error(e)})},this.detailOperation=function(){o.classCompleteNum=o.questionAnswerDetail.total,o.questionAnswerDetail.options.forEach(function(e){e.is_true&&(o.classCorrectRate=o.questionAnswerDetail[e.value]/o.classCompleteNum)})}}return e.prototype.ngOnInit=function(){this.uis.getUserInfo().is_teacher||(this.classId=this.uis.getUserCharacterInfo().classId),this.getQuestionCorrectInfo()},o([r.Input(),i("design:type",String)],e.prototype,"classId",void 0),o([r.Input(),i("design:type",String)],e.prototype,"navigateFrom",void 0),o([r.Input(),i("design:type",s.QuestionModel)],e.prototype,"question",void 0),o([r.Input(),i("design:type",String)],e.prototype,"studentId",void 0),e=o([r.Component({selector:"app-question-detail",template:n(1217),styles:[n(1218)]}),i("design:paramtypes",[a.TestAnalysisService,l.NzMessageService,c.UserInfoService])],e)}();t.QuestionDetailComponent=d},1216:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(){return function(){}}();t.QuestionModel=o},1217:function(e,t){e.exports='<div class="question-container"> <section class="question-info" nz-row> <div nz-col [nzSpan]="6" class="question-type" style="font-weight: 600; font-size: 16px;"> [{{this.map[this.question.question_type]}}] </div> <div nz-col [nzSpan]="6" class="question-source" style="font-weight: 600; font-size: 16px;"> {{this.map_source[this.question.answer_source]}} </div> <div nz-col [nzSpan]="6" class="question-relative"> </div> <div nz-col [nzSpan]="6" class="question-difficulty" style="font-weight: 600; font-size: 16px;"> 试题难度：{{this.question.diffculty}} </div> </section> <section class="question-body">{{this.question.title}}</section> <section nz-row class="question-answer"> <div nz-col [nzSpan]="12" class="is-correct">{{this.question.is_true?\'正确\':\'错误\'}}</div> </section> <section *ngIf="\'teacher\' === this.navigateFrom" class="question-charts" nz-row [nzType]="\'flex\'"> </section> <section *ngIf="\'SINGLE_SELECT\'===this.question.question_type" class="question-answer-info"> <span *ngFor="let option of this.question.options;let i = index">{{i | quesChoice}}. {{option.title}}</span> </section> <section *ngIf="\'MULTI_SELECT\'===this.question.question_type" class="question-answer-info"></section> <section *ngIf="\'SHORT_ANSWER\'===this.question.question_type" class="question-answer-info"></section> <section *ngIf="\'SING\'===this.question.question_type" class="question-answer-info"></section> <section *ngIf="\'BEHIND_BACK_SING\'===this.question.question_type" class="question-answer-info"></section> <section *ngIf="\'BEHIND_BACK_PERFORMANCE\'===this.question.question_type" class="question-answer-info"></section> <section *ngIf="\'PERFORMANCE\'===this.question.question_type" class="question-answer-info"></section> <section *ngIf="\'SIGHT_SINGING\'===this.question.question_type" class="question-answer-info"></section> </div> '},1218:function(e,t){e.exports=":host .question-container{padding:20px}:host .question-container .question-title{font-size:20px;font-weight:600}:host .question-container .question-body{font-size:20px;font-weight:600}:host .question-container .question-body .question-answer{font-weight:600}\n"},1219:function(e,t,n){"use strict";var o=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,s=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(r<3?i(s):r>3?i(t,n,s):i(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var r=n(2),s=function(){function e(){var e=this;this.nlwdData=[],this.option={title:{text:"能力维度"},tooltip:{},legend:{data:["个人能力维度","班级能力维度"]},radar:{name:{textStyle:{color:"#fff",backgroundColor:"#999",borderRadius:3,padding:[3,5]}},indicator:[{name:"识谱"},{name:"综合艺术表演"},{name:"编创"},{name:"音乐表演"},{name:"练耳"},{name:"视唱"},{name:"音乐鉴赏"}]},series:[{name:"个人 vs 班级",type:"radar",data:[{value:[this.sourceData?this.sourceData.STAFF:0,this.sourceData?this.sourceData.COMPOSITE_ART_PERFORMANCE:0,this.sourceData?this.sourceData.CREATING:0,this.sourceData?this.sourceData.MUSIC_PERFORMANCE:0,this.sourceData?this.sourceData.EAR_TRAINING:0,this.sourceData?this.sourceData.SIGHT_SINGING:0,this.sourceData?this.sourceData.MUSIC_APPRECIATE:0],name:"个人能力维度"}]}]},this.dataChange=function(){for(var t in e.sourceData)e.nlwdData.push(e.sourceData[t]);e.option.series[0].data[0].value=[e.sourceData?e.sourceData.STAFF:0,e.sourceData?e.sourceData.COMPOSITE_ART_PERFORMANCE:0,e.sourceData?e.sourceData.CREATING:0,e.sourceData?e.sourceData.MUSIC_PERFORMANCE:0,e.sourceData?e.sourceData.EAR_TRAINING:0,e.sourceData?e.sourceData.SIGHT_SINGING:0,e.sourceData?e.sourceData.MUSIC_APPRECIATE:0],e.updateData={series:[{name:"个人 vs 班级",type:"radar",data:[{value:[e.sourceData?e.sourceData.STAFF:0,e.sourceData?e.sourceData.COMPOSITE_ART_PERFORMANCE:0,e.sourceData?e.sourceData.CREATING:0,e.sourceData?e.sourceData.MUSIC_PERFORMANCE:0,e.sourceData?e.sourceData.EAR_TRAINING:0,e.sourceData?e.sourceData.SIGHT_SINGING:0,e.sourceData?e.sourceData.MUSIC_APPRECIATE:0],name:"个人能力维度"}]}]}}}return e.prototype.ngOnInit=function(){this.dataChange()},e.prototype.ngOnChanges=function(e){this.mergeData={series:[{name:"个人 vs 班级",type:"radar",data:[{value:[e.sourceData.currentValue.STAFF,e.sourceData.currentValue.COMPOSITE_ART_PERFORMANCE,e.sourceData.currentValue.CREATING,e.sourceData.currentValue.MUSIC_PERFORMANCE,e.sourceData.currentValue.EAR_TRAINING,e.sourceData.currentValue.SIGHT_SINGING,e.sourceData.currentValue.MUSIC_APPRECIATE],name:"个人能力维度"}]}]}},o([r.Input(),i("design:type",Object)],e.prototype,"sourceData",void 0),e=o([r.Component({selector:"app-nlwd-charts",template:n(1220),styles:[n(1221)]}),i("design:paramtypes",[])],e)}();t.NlwdChartsComponent=s},1220:function(e,t){e.exports='<div echarts [options]="this.option" [merge]="this.mergeData" [autoResize]="true"></div> '},1221:function(e,t){e.exports=""},1222:function(e,t,n){"use strict";var o=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,s=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(r<3?i(s):r>3?i(t,n,s):i(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var r=n(2),s=function(){function e(){var e=this;this.syzsTime=[],this.syzsClass=[],this.syzsUser=[],this.option={tooltip:{trigger:"axis"},xAxis:{type:"category",boundaryGap:!1,data:[]},yAxis:{type:"value"},series:[]},this.dataChange=function(){for(var t in e.sourceData.class_result){var n=new Date(parseInt(t)).toLocaleDateString();e.syzsTime.push(n)}for(var t in e.sourceData.class_result)e.syzsClass.push(e.sourceData.class_result[t]);for(var t in e.sourceData.user_result)e.syzsUser.push(e.sourceData.user_result[t]);e.option.xAxis.data=e.syzsTime,e.option.series=[{data:e.syzsUser,type:"line",name:"学生"},{data:e.syzsClass,type:"line",name:"班级"}]},this.dataUpdate=function(t){var n=[],o=[],i=[];for(var r in t.class_result){var s=new Date(parseInt(r)).toLocaleDateString();o.push(s)}for(var r in t.class_result)n.push(t.class_result[r]);for(var r in t.user_result)i.push(t.user_result[r]);e.mergeData={xAxis:{type:"category",data:o},series:[{data:i,type:"line",name:"学生"},{data:n,type:"line",name:"班级"}]}}}return e.prototype.ngOnInit=function(){this.dataChange()},e.prototype.ngOnChanges=function(e){console.log(e),e.sourceData.firstChange||this.dataUpdate(e.sourceData.currentValue)},o([r.Input(),i("design:type",Object)],e.prototype,"sourceData",void 0),o([r.Input(),i("design:type",String)],e.prototype,"sourceType",void 0),e=o([r.Component({selector:"app-syzs-charts",template:n(1223),styles:[n(1224)]}),i("design:paramtypes",[])],e)}();t.SyzsChartsComponent=s},1223:function(e,t){e.exports='<div echarts [options]="this.option" [autoResize]="true" [merge]="this.mergeData"></div> '},1224:function(e,t){e.exports=""},1225:function(e,t,n){"use strict";var o=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,s=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(r<3?i(s):r>3?i(t,n,s):i(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var r=n(2),s=function(){function e(){var e=this;this.zsfxData=[],this.option={title:{text:"音乐知识"},legend:{data:["音乐知识"]},tooltip:{},radar:[{indicator:[{text:"记谱法"},{text:"音高、音程、和弦"},{text:"节奏与节拍"},{text:"旋律"},{text:"调式"},{text:"曲式"},{text:"和声"},{text:"配器"},{text:"音乐文化"}],radius:120,startAngle:90,splitNumber:4,shape:"circle",name:{formatter:"【{value}】",textStyle:{color:"#72ACD1"}},splitArea:{areaStyle:{color:["rgba(114, 172, 209, 0.2)","rgba(114, 172, 209, 0.4)","rgba(114, 172, 209, 0.6)","rgba(114, 172, 209, 0.8)","rgba(114, 172, 209, 1)"],shadowColor:"rgba(0, 0, 0, 0.3)",shadowBlur:10}},axisLine:{lineStyle:{color:"rgba(255, 255, 255, 0.5)"}},splitLine:{lineStyle:{color:"rgba(255, 255, 255, 0.5)"}}}],series:[{name:"雷达图",type:"radar",data:[{value:[],name:"音乐知识"}]}]},this.dataChange=function(){for(var t in e.zsfxData=[],e.sourceData)e.zsfxData.push(e.sourceData[t]);e.option.series[0].data[0].value=[e.sourceData?e.sourceData.yy1:0,e.sourceData?e.sourceData.yy2:0,e.sourceData?e.sourceData.yy3:0,e.sourceData?e.sourceData.yy4:0,e.sourceData?e.sourceData.yy5:0,e.sourceData?e.sourceData.yy6:0,e.sourceData?e.sourceData.yy7:0,e.sourceData?e.sourceData.yy8:0,e.sourceData?e.sourceData.yy9:0]}}return e.prototype.ngOnInit=function(){this.dataChange()},e.prototype.ngOnChanges=function(e){console.log(e),e.sourceData.firstChange||(this.mergeData={series:[{name:"雷达图",type:"radar",data:[{value:[e.sourceData.currentValue.yy1,e.sourceData.currentValue.yy2,e.sourceData.currentValue.yy3,e.sourceData.currentValue.yy4,e.sourceData.currentValue.yy5,e.sourceData.currentValue.yy6,e.sourceData.currentValue.yy7,e.sourceData.currentValue.yy8,e.sourceData.currentValue.yy9],name:"音乐知识"}]}]})},o([r.Input(),i("design:type",Object)],e.prototype,"sourceData",void 0),e=o([r.Component({selector:"app-zsfx-charts",template:n(1226),styles:[n(1227)]}),i("design:paramtypes",[])],e)}();t.ZsfxChartsComponent=s},1226:function(e,t){e.exports='<div echarts [options]="option" [merge]="mergeData" [autoResize]="true"></div> '},1227:function(e,t){e.exports=""},1228:function(e,t,n){"use strict";var o=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,s=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(r<3?i(s):r>3?i(t,n,s):i(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var r=n(2),s=n(13),a=function(){function e(e){var t=this;this.router=e,this._navigate=function(){switch(t.type){case"student":t.router.navigate(["analysis/ability/abilityDetail"],{queryParams:{type:t.title,studentId:t.studentId,classId:""}});break;case"class":t.router.navigate(["analysis/classAbility/abilityDetail"],{queryParams:{type:t.title,studentId:"",classId:t.classId}});break;case"teacher":t.router.navigate(["analysis/studentAbility/abilityDetail"],{queryParams:{type:t.title,studentId:t.studentId,classId:""}})}}}return e.prototype.ngOnInit=function(){},o([r.Input(),i("design:type",String)],e.prototype,"title",void 0),o([r.Input(),i("design:type",Number)],e.prototype,"exerciseNum",void 0),o([r.Input(),i("design:type",Number)],e.prototype,"average",void 0),o([r.Input(),i("design:type",Boolean)],e.prototype,"isHigher",void 0),o([r.Input(),i("design:type",String)],e.prototype,"type",void 0),o([r.Input(),i("design:type",String)],e.prototype,"showType",void 0),o([r.Input(),i("design:type",String)],e.prototype,"studentId",void 0),o([r.Input(),i("design:type",String)],e.prototype,"classId",void 0),e=o([r.Component({selector:"app-ability-card",template:n(1229),styles:[n(1230)]}),i("design:paramtypes",[s.Router])],e)}();t.AbilityCardComponent=a},1229:function(e,t){e.exports='<div class="card-container"> <div class="card-title" *ngIf="\'ability\'===this.showType">{{this.title | abilityPipe}}</div> <div class="card-title" *ngIf="\'knowledge\'===this.showType">{{this.title | knowledgePipe}}</div> <div class="card-score"> <div> <div class="score-title">练习量：</div> <div class="score-number">{{this.exerciseNum}}</div> </div> <div> <div class="score-title">平均分：</div> <div class="score-number">{{this.average}}</div> </div> </div> <div class="card-option-info"> <div class="card-info"> <div *ngIf="this.isHigher">高于同年级水平</div> <div *ngIf="!this.isHigher">低于同年级水平</div> </div> <button nz-button="\'primary\'" (click)="_navigate()">查看详情</button> </div> </div> '},1230:function(e,t){e.exports=":host{padding:20px}:host .card-container{padding:20px;height:400px;border:1px solid #e3e3e3;display:flex;flex-direction:column;justify-content:space-between}:host .card-container .card-title{border:1px solid #e3e3e3;font-size:20px;padding:20px}:host .card-container .card-score{display:flex;justify-content:space-around}:host .card-container .card-score .score-title{padding:10px;font-size:16px;border:1px solid #e3e3e3}:host .card-container .card-score .score-number{padding:10px;font-size:16px;color:#0c82f9;border:1px solid #e3e3e3;border-top:none}:host .card-container .card-option-info{display:flex;justify-content:space-around}:host .card-container .card-option-info .card-info{border:1px solid #e3e3e3;padding:5px}\n"},1231:function(e,t,n){"use strict";var o=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,s=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(r<3?i(s):r>3?i(t,n,s):i(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var r=n(2),s=function(){function e(){}return e.prototype.ngOnInit=function(){},e=o([r.Component({selector:"app-class-question-component",template:n(1232),styles:[n(1233)]}),i("design:paramtypes",[])],e)}();t.ClassQuestionComponent=s},1232:function(e,t){e.exports=""},1233:function(e,t){e.exports=""},1234:function(e,t,n){"use strict";var o=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,s=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(r<3?i(s):r>3?i(t,n,s):i(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var r=n(2),s=function(){function e(){}return e.prototype.ngOnInit=function(){},e=o([r.Component({selector:"app-student-question",template:n(1235),styles:[n(1236)]}),i("design:paramtypes",[])],e)}();t.StudentQuestionComponent=s},1235:function(e,t){e.exports=""},1236:function(e,t){e.exports=""},1237:function(e,t,n){"use strict";var o=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,s=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(r<3?i(s):r>3?i(t,n,s):i(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var r=n(2),s=function(){function e(){var e=this;this.arr=[],this.nameArr=[],this.option={color:["#3398DB"],tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0},xAxis:[{type:"category",data:[],axisTick:{alignWithLabel:!0}}],yAxis:[{type:"value"}],series:[{type:"bar",barWidth:"60%",data:[]}]},this.dataAbility=function(){if(e.arr=[],e.nameArr=[],"ability"===e.type){if(e.sourceData)for(var t in e.sourceData.result)e.arr.push(e.sourceData.result[t]),e.nameArr.push(e.sourceData.abilitys[t]);e.option.xAxis[0].data=e.nameArr,e.option.series[0].data=e.arr}else e.arr=[5,20,15,30,25],e.nameArr=["平进","级进","跳进","重复","变化重复"],e.option.xAxis[0].data=e.nameArr,e.option.series[0].data=e.arr},this.dataAbilityChange=function(t){if(e.arr=[],e.nameArr=[],"ability"===e.type){if(t.sourceData.currentValue.result)for(var n in t.sourceData.currentValue.result)e.arr.push(t.sourceData.currentValue.result[n]),e.nameArr.push(t.sourceData.currentValue.abilitys[n]);e.option.xAxis[0].data=e.nameArr,e.option.series[0].data=e.arr}else e.arr=[5,20,15,30,25],e.nameArr=["平进","级进","跳进","重复","变化重复"],e.option.xAxis[0].data=e.nameArr,e.option.series[0].data=e.arr;e.mergeData={xAxis:[{type:"category",data:e.nameArr,axisTick:{alignWithLabel:!0}}],series:[{type:"bar",barWidth:"60%",data:e.arr}]}}}return e.prototype.ngOnInit=function(){this.dataAbility()},e.prototype.ngOnChanges=function(e){e.sourceData.firstChange||this.dataAbilityChange(e)},o([r.Input(),i("design:type",Object)],e.prototype,"sourceData",void 0),o([r.Input(),i("design:type",Object)],e.prototype,"type",void 0),e=o([r.Component({selector:"app-ylzw-charts",template:n(1238),styles:[n(1239)]}),i("design:paramtypes",[])],e)}();t.YlzwChartsComponent=s},1238:function(e,t){e.exports='<div echarts [options]="option" [merge]="mergeData" [autoResize]="true"></div> '},1239:function(e,t){e.exports=""},1240:function(e,t,n){"use strict";var o=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,s=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(r<3?i(s):r>3?i(t,n,s):i(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var r=n(2),s=function(){function e(){var e=this;this.data={result:{"6810207302df485bb2992d711a2f5e6b":{MUSIC_PERFORMANCE:.5,SIGHT_SINGING:.3,MUSIC_APPRECIATE:0,EAR_TRAINING:.12,STAFF:.14,COMPOSITE_ART_PERFORMANCE:0,CREATING:0},"3aee1c2a59a84cd1a5fb57c972d2983d":{MUSIC_PERFORMANCE:0,SIGHT_SINGING:.09,MUSIC_APPRECIATE:.4,EAR_TRAINING:.125,STAFF:.12,COMPOSITE_ART_PERFORMANCE:0,CREATING:0}},code:200,start:15198336e5,end:1532016e6,abilitys:{MUSIC_PERFORMANCE:"音乐表演",SIGHT_SINGING:"视唱",MUSIC_APPRECIATE:"音乐鉴赏",EAR_TRAINING:"练耳",STAFF:"识谱",COMPOSITE_ART_PERFORMANCE:"综合艺术表演",CREATING:"编创"}},this.arrName=[],this.arr=[],this.yArr=[],this._seriesArr=[],this._modelStr={},this.option={tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},legend:{data:[]},grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0},xAxis:{type:"value"},yAxis:{type:"category",data:[]},series:[]},this.dataChange=function(){for(var t in e._seriesArr=[],e.yArr=[],e.sourceData.abilitys){e.arrName.push(e.sourceData.abilitys[t]);var n=[];for(var o in e.sourceData.result)n.push(e.sourceData.result[o][t]);var i={name:"直接访问",type:"bar",stack:"总量",label:{normal:{show:!0,position:"insideRight"}},data:[]};i.name=e.sourceData.abilitys[t],i.data=n,e._seriesArr.push(i)}e.option.legend.data=e.arrName,e.option.yAxis.data=e.yArr,e.option.series=e._seriesArr}}return e.prototype.ngOnInit=function(){this.dataChange()},o([r.Input(),i("design:type",Object)],e.prototype,"sourceData",void 0),e=o([r.Component({selector:"app-yyzs-compare-charts",template:n(1241),styles:[n(1242)]}),i("design:paramtypes",[])],e)}();t.YyzsCompareChartsComponent=s},1241:function(e,t){e.exports='<div echarts [options]="this.option" [merge]="{option:this.option,notMerge:false}" [autoResize]="true"></div> '},1242:function(e,t){e.exports=""},1243:function(e,t,n){"use strict";var o=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,s=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(r<3?i(s):r>3?i(t,n,s):i(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s};Object.defineProperty(t,"__esModule",{value:!0});var i=n(2),r=function(){function e(){this.map={0:"A",1:"B",2:"C",3:"D",4:"E",5:"F",6:"G",7:"H",8:"I",9:"J"}}return e.prototype.transform=function(e){return this.map[e]},e=o([i.Pipe({name:"quesChoice"})],e)}();t.QuestionChoicePipe=r},1244:function(e,t,n){"use strict";var o=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,s=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(r<3?i(s):r>3?i(t,n,s):i(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s};Object.defineProperty(t,"__esModule",{value:!0});var i=n(2),r=function(){function e(){this.map={STAFF:"识谱",SIGHT_SINGING:"视唱",EAR_TRAINING:"练耳",CREATING:"编创",MUSIC_APPRECIATE:"音乐鉴赏",MUSIC_PERFORMANCE:"音乐表演",COMPOSITE_ART_PERFORMANCE:"综合艺术表演"}}return e.prototype.transform=function(e){return this.map[e]},e=o([i.Pipe({name:"abilityPipe"})],e)}();t.AbilityTypePipe=r},1245:function(e,t,n){"use strict";var o=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,s=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(r<3?i(s):r>3?i(t,n,s):i(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s};Object.defineProperty(t,"__esModule",{value:!0});var i=n(2),r=function(){function e(){var e=this;this.map={yy1:"记谱法",yy2:"音高、音程、和弦",yy3:"节奏与节拍",yy4:"旋律",yy5:"调式",yy6:"曲式",yy7:"和声",yy8:"配器",yy9:"音乐文化"},this.transform=function(t){return e.map[t]}}return e=o([i.Pipe({name:"knowledgePipe"})],e)}();t.KnowledgeTypePipe=r},1246:function(e,t,n){"use strict";var o=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,s=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(r<3?i(s):r>3?i(t,n,s):i(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var r=n(2),s=n(13),a=n(99),l=n(6),c=n(200),d=n(11),u=function(){function e(e,t,n,o){var i=this;this.router=e,this.ss=t,this._notification=n,this.uis=o,this.router.events.subscribe(function(e){e instanceof s.NavigationStart&&(i.user=localStorage.getItem("user")||i.uis.getUserInfo().userName)})}return e.prototype.ngOnInit=function(){this.userInfo=this.uis.getUserInfo(),this.user=this.userInfo.userId,this.userImg="data:image/jpg;base64,"+this.userInfo.photo},e.prototype._logout=function(){var e=this;localStorage.clear(),this.ss.musicLogout(this.user).subscribe(function(t){switch(t.code){case 200:e._notification.create("success","登出成功","1s后刷新页面"),e.user="",localStorage.clear(),e.uis.setUserInfo({userName:e.user}),c.setTimeout(function(){e.router.navigate(["./sign"])},1e3)}},function(t){e._notification.create("error","错误",t.desc)})},e=o([r.Component({selector:"app-header",template:n(1247),styles:[n(1249)],providers:[]}),i("design:paramtypes",[s.Router,a.SignService,l.NzNotificationService,d.UserInfoService])],e)}();t.TestHeaderComponent=u},1247:function(e,t,n){e.exports='<ul class="header" nz-menu [nzMode]="\'horizontal\'"> <li style="float:left;"><img src="'+n(1248)+'" alt="logo"></li> <li *ngIf="user && this.userInfo.isTeacher" nz-menu-item routerLinkActive="ant-menu-item-selected"><a [routerLink]="[\'/baseDataAdministration\']">基础数据管理</a> </li> <li *ngIf="user" nz-menu-item routerLinkActive="ant-menu-item-selected"><a [routerLink]="[\'/classes\']">我的课堂</a></li> <li *ngIf="user" nz-menu-item routerLinkActive="ant-menu-item-selected"><a [routerLink]="[\'/zoom\']">个人空间</a> </li> <li *ngIf="user && this.userInfo.isTeacher" nz-menu-item routerLinkActive="ant-menu-item-selected"><a [routerLink]="[\'/test\']">考试</a> </li> <li *ngIf="user&& this.userInfo.isTeacher" nz-menu-item routerLinkActive="ant-menu-item-selected"><a [routerLink]="[\'/resources\']">我的资源</a> </li> <li *ngIf="user" nz-menu-item routerLinkActive="ant-menu-item-selected" style="margin-right: auto;"><a [routerLink]="[\'/analysis\']">测评综合分析</a> </li> <li *ngIf="!user" nz-menu-item routerLinkActive="ant-menu-item-selected" style="margin-left: auto;"><a [routerLink]="[\'/sign\']">登录</a> </li> <li nz-submenu *ngIf="user"> <span title style="display: flex;align-items: center;"> <nz-avatar nzIcon="user" nzSize="large" nzSrc="{{userImg}}"></nz-avatar><i style="color: #ffffff;">{{userInfo.email}}</i></span> <ul> <li nz-menu-item> <span title><a [routerLink]="[\'/zoom/infoMaintain\']">信息维护</a></span> </li> <li nz-menu-item (click)="_logout()"> 退出登录 </li> </ul> </li> </ul> '},1248:function(e,t,n){e.exports=n.p+"content/b0e90548ee962ad086becf3051623ec7.png"},1249:function(e,t){e.exports=":host ::ng-deep .ant-menu-horizontal>.ant-menu-item-selected{border-color:#fff;border-bottom-width:3px}:host ::ng-deep .header>li.ant-menu-submenu{display:flex;align-items:center;border:none}:host ::ng-deep .header>li.ant-menu-submenu .ant-menu-submenu-title .anticon{margin-right:0}:host ::ng-deep .header>li.ant-menu-submenu nz-avatar{margin-right:8px}:host ::ng-deep .header>li.ant-menu-submenu a{color:inherit;display:inline-block;height:100%;width:100%}.header{height:108px;background:#396ea5 url(../../../../assets/img/bg-light.png) no-repeat 95% 0%;display:flex;align-items:center}.header>li{border-bottom-width:3px;padding-top:20px;padding-bottom:20px;margin:0 10px}.header>li:nth-of-type(1){margin:0 50px 0 10px;height:100%;display:flex;align-items:center}.header>li:hover,.header>li:focus{border-color:#fff}.header>li>a{color:#fff;font:normal normal 17px 'yahei,pingfang'}\n"},1250:function(e,t,n){"use strict";var o=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,s=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(r<3?i(s):r>3?i(t,n,s):i(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s};Object.defineProperty(t,"__esModule",{value:!0});var i=n(2),r=n(420),s=n(421),a=n(12),l=n(34),c=n(6),d=n(13),u=n(419),p=n(99),m=function(){function e(){}return e=o([i.NgModule({declarations:[r.SignComponent,s.RegisterComponent],imports:[l.CommonModule,a.ReactiveFormsModule,c.NgZorroAntdModule.forRoot(),d.RouterModule.forChild(u.SignRoute)],exports:[d.RouterModule],providers:[p.SignService]})],e)}();t.SignModule=m},149:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(){return function(){}}();t.Directory=o},150:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(){return function(){}}();t.QuestionModel=o},201:function(e,t,n){"use strict";var o=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,s=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(r<3?i(s):r>3?i(t,n,s):i(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var r=n(2),s=n(32),a=n(28),l=function(){function e(e){this.http=e}return e.prototype.userComplete=function(e){var t="";for(var n in e)n&&(t+=n+"="+e[n]+"&");t=t.slice(0,t.length-1);var o=new s.HttpParams({fromString:t});return this.http.post(a.environment.basePath+"user/complete",o,{headers:{contentType:"application/x-www-form-urlunecoded"}})},e=o([r.Injectable(),i("design:paramtypes",[s.HttpClient])],e)}();t.RegisterService=l},202:function(e,t,n){"use strict";var o=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,s=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(r<3?i(s):r>3?i(t,n,s):i(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var r=n(2),s=n(97);n(203),n(204);var a=n(28),l=n(6),c=function(){function e(e,t){this.http=e,this._message=t,this.headers=new s.Headers({"Content-Type":"application/x-www-form-urlencoded;charset=UTF-8"})}return e.prototype.rootInit=function(e){return this.http.get("resource/"+e+"/folder/init").toPromise().then(function(e){return e.json()}).catch(this.handleError)},e.prototype.getRoot=function(e,t){return this.http.get("resource/"+e+"/folder?parentId="+t).toPromise().then(function(e){return e.json()}).catch(this.handleError)},e.prototype.getRecycleRoot=function(e){return this.http.get("resource/"+e+"/recyclebin/list").toPromise().then(function(e){return e.json()}).catch(this.handleError)},e.prototype.getResourceByType=function(e,t,n){switch(t){case"videos":t=0;break;case"audios":t=1;break;case"documents":t=2;break;case"imgs":t=3;break;default:t=99}return this.http.get("resource/"+e+"/resourcelist?uid="+e+"&type="+t+"&order="+n).toPromise().then(function(e){return e.json()}).catch(this.handleError)},e.prototype.getByParent=function(e,t){return this.http.get("resource/"+t+"/folder?parentId="+e).toPromise().then(function(e){return e.json()}).catch(this.handleError)},e.prototype.newFolder=function(e,t,n){var o=this.getQueryString({parentId:e,uid:t,folderName:n});return this.http.post("resource/"+t+"/folder",o,{headers:this.headers}).toPromise().then(function(e){return e.json()}).catch(this.handleError)},e.prototype.batchDelete=function(e,t){return this.http.post(a.environment.paperPath+"api/batch-delete",{userId:t,deleteList:e},{headers:this.headers}).toPromise().then(function(e){return e.json()}).catch(this.handleError)},e.prototype.batchDeleteFolder=function(e,t){var n=this.getQueryString({uid:e,folderId:t});return this.http.post("resource/"+t+"/folder/deletefolderlogical",n,{headers:this.headers}).toPromise().then(function(e){return e.json()}).catch(this.handleError)},e.prototype.batchDeleteFile=function(e,t){var n=this.getQueryString({resourceId:t,fid:e});return this.http.post("resource/folder/deleteresourcelogical",n,{headers:this.headers}).toPromise().then(function(e){return e.json()}).catch(this.handleError)},e.prototype.batchMove=function(e,t){return this.http.post(a.environment.paperPath+"api/batch-move",{parentId:t,moveList:e},{headers:this.headers}).toPromise().then(function(e){return e.json()}).catch(this.handleError)},e.prototype.reName=function(e,t){return this.http.post("resource/"+e+"/folder/rename","folderId="+e+"&newFolderName="+t,{headers:this.headers}).toPromise().then(function(e){return e.json()}).catch(this.handleError)},e.prototype.getQRecycleBinTree=function(e){return this.http.get("resource/"+e+"/recyclebin/list").toPromise().then(function(e){return e.json()}).catch(this.handleError)},e.prototype.pseudoDeleteFile=function(e,t){return this.http.delete("resource/"+e+"/resource?uid="+e+"&resourceId="+t).toPromise().then(function(e){return e.json()}).catch(this.handleError)},e.prototype.pseudoDeleteFolder=function(e,t){return this.http.delete("resource/"+e+"/folder?uid="+e+"&folderId="+t).toPromise().then(function(e){return e.json()}).catch(this.handleError)},e.prototype.recoveryTo=function(e,t,n){return this.http.post(a.environment.paperPath+"api/recoveryTo",{recycelBinId:e,type:t,parentId:n},{headers:this.headers}).toPromise().then(function(e){return e.json()}).catch(this.handleError)},e.prototype.cleanRecycle=function(e){return this.http.post("resource/"+e+"/recyclebin/clearup","uid="+e,{headers:this.headers}).toPromise().then(function(e){return e.json()}).catch(this.handleError)},e.prototype.restoreFile=function(e,t){return this.http.post("resource/"+e+"/resource/restore","uid="+e+"&resourceId="+t,{headers:this.headers}).toPromise().then(function(e){return e.json()}).catch(this.handleError)},e.prototype.restoreFolder=function(e,t){return this.http.post("resource/"+e+"/folder/restore","uid="+e+"&folderId="+t,{headers:this.headers}).toPromise().then(function(e){return e.json()}).catch(this.handleError)},e.prototype.searchFile=function(e){return this.http.get("resource/fuzzy?condition="+e,{headers:this.headers}).toPromise().then(function(e){return e.json()}).catch(this.handleError)},e.prototype.getAllTypeNumber=function(e){return this.http.get("resource/"+e+"/resourcesummarize").toPromise().then(function(e){return e.json()}).catch(this.handleError)},e.prototype.getQueryString=function(e){var t="";for(var n in e)n&&(t+=n+"="+e[n]+"&");return t.substr(0,t.length-1)},e.prototype.handleError=function(e){return this._message.create("error","服务异常"),Promise.reject(e)},e=o([r.Injectable(),i("design:paramtypes",[s.Http,l.NzMessageService])],e)}();t.DirectoryPaperService=c},205:function(e,t,n){"use strict";var o=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,s=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(r<3?i(s):r>3?i(t,n,s):i(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var r=n(2),s=n(97);n(203),n(204);var a=n(28),l=n(6),c=function(){function e(e,t){this.http=e,this._message=t,this.headers=new s.Headers({"Content-Type":"application/json"})}return e.prototype.librariesCreate=function(e,t,n){return this.http.post(a.environment.basePath+"api/q-libraries-create",{libraryFolderId:e,isdelete:0,libraryName:t,remarks:n},{headers:this.headers}).toPromise().then(function(e){return e.json()}).catch(this.handleError)},e.prototype.update=function(e,t,n){return this.http.put(a.environment.basePath+"api/q-libraries-update",{id:e,libraryName:t,remarks:n},{headers:this.headers}).toPromise().then(function(e){return e.json()}).catch(this.handleError)},e.prototype.renameFolder=function(e,t){return this.http.post("resource/"+t+"/folder/rename",{newFolderName:e,fid:t},{headers:this.headers}).toPromise().then(function(e){return e.json()}).catch(this.handleError)},e.prototype.handleError=function(e){return this._message.create("error","服务异常"),Promise.reject(null)},e=o([r.Injectable(),i("design:paramtypes",[s.Http,l.NzMessageService])],e)}();t.LibraryService=c},206:function(e,t,n){"use strict";var o=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,s=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(r<3?i(s):r>3?i(t,n,s):i(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var r=n(2),s=n(32),a=n(28),l=function(){function e(e){this.http=e,this.header={"Content-Type":"application/json;charset=utf8"}}return e.prototype.getClassroomChapterTemplateList=function(e,t){return this.http.get(a.environment.basePath+"classroom/templates/"+t+"?classroomId="+e)},e.prototype.getBookChapterTemplate=function(e,t){return this.http.get(a.environment.basePath+"classroom/default_template?bookId="+e+"&chapterId="+t)},e.prototype.createBookChapterDefaultTemplate=function(e,t,n,o){var i=new s.HttpParams({fromObject:{bookId:e,chapterId:t,title:n,json:o}});return this.http.post(a.environment.basePath+"classroom/default_template",i,{headers:this.header})},e.prototype.chapterHasDefaultTemplate=function(e,t){return this.http.get(a.environment.basePath+"classroom/has_default_template?bookId="+e+"&chapterId="+t)},e.prototype.reviseTemplate=function(e,t,n){var o=new s.HttpParams({fromObject:{tid:e,title:t,json:n}});return this.http.post(a.environment.basePath+"classroom/template/"+e,o,{headers:this.header})},e.prototype.deleteTemplate=function(e){return this.http.delete(a.environment.basePath+"classroom/template/"+e)},e.prototype.getTeacherClassChapterTemplate=function(e,t,n){return this.http.get(a.environment.basePath+"classroom/template?teacherId="+e+"&classRoomId="+t+"&chapterId="+n)},e.prototype.teacherCreateTemplate=function(e,t,n,o,i){var r=new s.HttpParams({fromObject:{teacherId:e,title:t,json:n,bookId:o,classroomId:i}});return this.http.post(a.environment.basePath+"classroom/personal_template",r,{headers:this.header})},e.prototype.classChapterSetTemplate=function(e,t,n){var o=new s.HttpParams({fromObject:{templateId:e,classroomId:t,chapterId:n}});return this.http.post(a.environment.basePath+"classroom/template_classroom",o,{headers:this.header})},e.prototype.getTemplateInfo=function(e){return this.http.get(a.environment.basePath+"classroom/template_chapter_resource/"+e)},e.prototype.classChapterSetDefaultTemplate=function(e,t,n){var o=(new s.HttpParams).set("tid",e);return this.http.put(a.environment.basePath+"classroom/template/default/"+e,o,{headers:this.header})},e=o([r.Injectable(),i("design:paramtypes",[s.HttpClient])],e)}();t.ClassChapterTemplateService=l},275:function(e,t){function n(e){return Promise.resolve().then(function(){throw new Error("Cannot find module '"+e+"'.")})}n.keys=function(){return[]},n.resolve=n,e.exports=n,n.id=275},28:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.environment={production:!0,basePath:"http://localhost:8768/",paperPath:"http://127.0.0.1:8081/starmoocexampaper/"}},418:function(e,t,n){"use strict";var o=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,s=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(r<3?i(s):r>3?i(t,n,s):i(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var r=n(2),s=n(13),a=function(){function e(e){this.route=e}return e.prototype.ngOnInit=function(){var e=this;this.route.data.subscribe(function(t){t.error403&&(e.error403=t.error403),t.errorMessage&&(e.errorMessage=t.errorMessage)})},e=o([r.Component({selector:"jhi-error",template:n(757)}),i("design:paramtypes",[s.ActivatedRoute])],e)}();t.ErrorComponent=a},419:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(420),i=n(421);t.SignRoute=[{path:"sign",component:o.SignComponent,children:[]},{path:"register",component:i.RegisterComponent}]},420:function(e,t,n){"use strict";var o=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,s=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(r<3?i(s):r>3?i(t,n,s):i(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var r=n(2),s=n(12),a=n(99),l=n(13),c=n(6),d=n(200),u=n(11),p=function(){function e(e,t,n,o,i){this.fb=e,this.ss=t,this._notification=n,this.router=o,this.uis=i,this.reviseFlag=!1,this.timeClear=3}return e.prototype._getCaptcha=function(e){var t=this;e.preventDefault(),this.validateForm.controls.userName.markAsDirty(),this.validateForm.controls.userName.dirty&&this.ss.musicGetCaptcha(this.validateForm.controls.userName.value).subscribe(function(e){switch(e.code){case 200:t._notification.create("success","成功","请前往邮箱获取验证码！");break;default:t._notification.create("warning","警告",e.desc)}},function(e){t._notification.create("error","错误",e.desc)})},e.prototype._submitForm=function(){var e=this;for(var t in this.validateForm.controls)this.validateForm.controls[t]&&this.validateForm.controls[t].markAsDirty();this.reviseFlag?this.validateForm.controls.userName.dirty&&this.ss.musicRevisePassword(this.validateForm.controls.userName.value,this.validateForm.controls.captcha.value,this.validateForm.controls.password.value).subscribe(function(t){switch(t.code){case 200:e._notification.create("success","成功","密码修改成功");break;default:e._notification.create("warning","警告",t.desc)}},function(t){t.code&&e._notification.create("error","错误",t.desc)}):this.validateForm.controls.userName.value&&this.validateForm.controls.password.value&&this.ss.musicLogin(this.validateForm.controls.userName.value,this.validateForm.controls.password.value).subscribe(function(t){switch(t.code){case 200:e.validateForm.controls.remember.value&&(localStorage.setItem("user",t.uid),e.uis.setUserInfo({email:t.email,userName:t.name,isTeacher:t.is_teacher,is_teacher:t.is_teacher,login_token:t.login_token,phone:t.phone,school:t.school,userId:t.uid,gender:t.gender,age:t.age,class_id:t.class_id}),e.uis.queryUserInfo(t.uid),e.uis.setUserCharacterInfo(t.classTeacher||t.classStudent)),e._notification.success("登录成功","将在3秒后跳转",{nzDuration:3e3}),e._interval=d.setInterval(function(){e.timeClear--,0===e.timeClear&&(d.clearInterval(e._interval),e.router.navigate(["/classes"]))},1e3);break;default:e._notification.create("warning","警告",t.desc)}},function(t){t.code&&e._notification.create("error","错误",t.desc)})},e.prototype.ngOnInit=function(){this.validateForm=this.fb.group({userName:[null,[s.Validators.required]],password:[null,[s.Validators.required]],captcha:[null,[s.Validators.required]],remember:[!0]}),localStorage.getItem("user")&&this.router.navigate(["/classes"])},e=o([r.Component({selector:"app-sign",template:n(767),styles:[n(768)]}),i("design:paramtypes",[s.FormBuilder,a.SignService,c.NzNotificationService,l.Router,u.UserInfoService])],e)}();t.SignComponent=p},421:function(e,t,n){"use strict";var o=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,s=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(r<3?i(s):r>3?i(t,n,s):i(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var r=n(2),s=n(12),a=n(99),l=n(6),c=n(13),d=n(11),u=n(45),p=n(201),m=function(){function e(e,t,n,o,i,r){var s=this;this.fb=e,this.ss=t,this._notification=n,this.router=o,this.uis=i,this.rs=r,this.subject=new u.Subject,this.confirmationValidator=function(e){return e.value?e.value!==s.validateForm.controls.password.value?{confirm:!0,error:!0}:void 0:{required:!0}},this.subFlag=!0,this.userInfo=this.uis.getUserInfo()}return e.prototype._submitForm=function(){var e=this;for(var t in this.validateForm.controls)this.validateForm.controls[t]&&(this.validateForm.controls[t].markAsDirty(),this.validateForm.controls[t].dirty||(this.subFlag=!1));this.subFlag&&this.ss.musicRegister(this.validateForm.controls.email.value,this.validateForm.controls.captcha.value,this.validateForm.controls.password.value,this.validateForm.controls.isTeacher.value).subscribe(function(t){switch(t.code){case 200:e._notification.create("success","成功","注册成功，请重新登录！"),e.router.navigate(["/sign"]);break;default:e._notification.create("warning","警告",t.desc)}},function(t){e._notification.create("error","错误",t.desc)})},e.prototype._getCaptcha=function(e){var t=this;e.preventDefault(),this.validateForm.controls.email.markAsDirty(),this.validateForm.controls.email.dirty&&this.ss.musicGetCaptcha(this.validateForm.controls.email.value).subscribe(function(e){switch(e.code){case 200:t._notification.create("success","成功","请前往邮箱获取验证码！");break;default:t._notification.create("warning","警告",e.desc)}},function(e){t._notification.create("error","错误",e.desc)})},e.prototype.updateConfirmValidator=function(){var e=this;setTimeout(function(){e.validateForm.controls.checkPassword.updateValueAndValidity()})},e.prototype.ngOnChanges=function(){},e.prototype.ngOnInit=function(){this.userId=this.uis.userId||localStorage.getItem("user"),this.userInfo=this.uis.getUserInfo(),this.validateForm=this.fb.group({email:[null,[s.Validators.email]],password:[null,[s.Validators.required]],checkPassword:[null,[s.Validators.required,this.confirmationValidator]],phoneNumberPrefix:["+86"],phoneNumber:[this.userInfo.phone||"",[s.Validators.required]],captcha:[null,[s.Validators.required]],isTeacher:[this.userInfo.true||"true",[s.Validators.required]]})},e.prototype.getFormControl=function(e){return this.validateForm.controls[e]},e=o([r.Component({selector:"app-register",template:n(769),styles:[n(770)]}),i("design:paramtypes",[s.FormBuilder,a.SignService,l.NzNotificationService,c.Router,d.UserInfoService,p.RegisterService])],e)}();t.RegisterComponent=m},422:function(e,t,n){"use strict";var o=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,s=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(r<3?i(s):r>3?i(t,n,s):i(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var r=n(2),s=n(13),a=n(6),l=n(97),c=n(149),d=n(202),u=n(205),p=n(11),m=n(28),h=function(){function e(e,t,n,o,i,r,s){var a=this;this.route=e,this.directoryService=t,this.libraryService=n,this._message=o,this._modal=i,this.http=r,this.uis=s,this.directoryList=[],this.directoryTree=[],this.moveTree=[],this.pathList=[],this.typeDirectoryList=[],this.current_question_sidebar=!1,this._allChecked=!1,this._indeterminate=!1,this._checkedNumber=0,this.papers_add=!1,this.modal_share=!1,this.modal_move=!1,this.modal_loding=!1,this.library_add=!1,this.library_upt=!1,this.question_add=!1,this.question_move=!1,this.modal_recycle=!1,this.tool_tree_view_class="layout module-disk",this.tool_grid_view_class="disk-view ui-view ui-listview",this.handServiceError=function(e){a._message.create("error","服务异常"),a.modal_loding=!1},this.click_uploadResource=function(e){var t=new FormData;t.append("file",e.file),t.append("uid",a.userId),t.append("folderId",a.parentId),t.append("fileName",e.file.name),a.http.post(m.environment.basePath+"resource/"+a.userId+"/folder/upload",t).toPromise().then(function(e){200===(e=JSON.parse(e._body)).code?(a._message.create("success","上传成功"),a.getDirectoryList(),a.getAllTypeNumber()):a._message.create("success",e.desc)}).catch(function(e){console.error(e)})},this._beforUpload=function(e){console.log(a),a.uploadData={uid:a.userId,folderId:a.parentId,fileName:e.name,file:e.file}},this.getType=function(e){e&&a.directoryService.getResourceByType(a.userId,e,0).then(function(e){if(null!=e&&200===e.code){var t=[];e.resources.forEach(function(e){e.type="paper",e.parentId=e.folderId,e.tree_icon_class="link-paper",t.push(e)}),a.typeDirectoryList=t}else a._message.create("error",e.desc)})},this.getDirectoryList=function(){a.modal_loding=!0,a.directoryService.getByParent(a.parentId||a.rootId,a.userId).then(function(e){if(console.log(e),null!=e&&200===e.code){var t=[];e.folders.forEach(function(e){e.type="folder",e.name=e.folderName,e.tree_icon_class="link",t.push(e)}),e.resources.forEach(function(e){e.type="paper",e.parentId=e.folderId,e.tree_icon_class="link-paper",t.push(e)}),a.directoryList=t,a.parentObj.list=t}else a._message.create("error","获取数据失败");a.modal_loding=!1},a.handServiceError)},this.handleOk=function(e){a.modal_share=!1,a.modal_move=!1,a._message.create("success","成功")},this.handleCancel=function(e){a.modal_share=!1,a.modal_move=!1,a._message.create("error","失败")},this.move_handleCancel=function(e){a.modal_move=!1},this.recoveryTo_handleCancel=function(e){a.modal_recycle=!1},this.library_add_handleCancel=function(e){a.library_add=!1},this.library_upt_handleCancel=function(e){a.library_upt=!1},this.click_search=function(e){e?a.directoryService.searchFile(e).then(function(e){if(200===e.code){var t=[];e.resources.forEach(function(e){e.qLibrary={},e.qLibrary.type="paper",e.qLibrary.deleteId=e.id,e.qLibrary.name=e.name,e.qLibrary.deleteTime=e.updatetime,t.push(e.qLibrary)}),a.directoryList=t}else a._message.create("error","查询失败")}):a.refresh()},this.tool_grid_class="",this.tool_tree_class="",this.context_menu_type="main",this.count_qRecycleBin=0,this.count_myShares=0,this.count_targetShares=0,this.parentId="",this.parentObj=new c.Directory,this.count_videos=0,this.count_audios=0,this.count_documents=0,this.count_imgs=0,this.count_others=0,self.refresh=this.refresh}return e.prototype.ngOnInit=function(){this.userId=this.uis.userId;var e=window.location.href.split("/");this.current_sidebar=e[e.length-1],this.refresh()},e.prototype.refresh=function(){switch(this.current_sidebar){case"disk":this.getRoot();break;case"videos":this.getType("videos");break;case"audios":this.getType("audios");break;case"documents":this.getType("documents");break;case"imgs":this.getType("imgs");break;case"others":this.getType("others");break;case"recycle":this.tool_tree_class="",this.tool_tree_view_class="layout module-disk",this.getQRecycleBinTree();break;default:this.current_sidebar="disk",this.getDirectoryList()}this.getAllTypeNumber()},e.prototype.getAllCount=function(){},e.prototype.click_path=function(e){this.parentId=e.id,this.parentObj.list_selected="",e.list_selected="list-selected",this.parentObj=e,this.current_question_sidebar=!1,this.getDirectoryList(),this.pathList.splice(101-e.zIndex)},e.prototype.click_all=function(e){this.context_menu_visible="hidden"},e.prototype.onContextmenu=function(e,t,n){n&&(n.checked=!0,this._refreshStatus()),e.preventDefault(),e.stopPropagation(),this.context_menu_visible=null,this.context_menu_type=t,this.context_menu_event=e,this.context_menu_dl=n},e.prototype.context_menu_click=function(e){switch(this.context_menu_visible="hidden",e){case"newTJ":this.papers_add=!0;break;case"newFolder":this.newFolder();break;case"refresh":this.refresh();break;case"cut":this._message.create("warning","暂不支持剪切");break;case"paste":this._message.create("warning","暂不支持粘贴");break;case"del":this.batchDelete();break;case"move":this.moveTree=[this.move_tree_root],this.move_tree_selectedItem=this.move_tree_root,this.getMoveTreeList(this.move_tree_selectedItem),this.modal_move=!0;break;case"rename":this.click_li_tool_reName(this.context_menu_dl);break;case"open":"folder"===this.context_menu_dl.type?this.openFolder(this.context_menu_dl):"library"===this.context_menu_dl.type&&this.openQuestionList(this.context_menu_dl);break;case"share":this._message.create("warning","暂不支持分享")}},e.prototype.click_li_tool_move=function(e){this._checkAll(!1),e.checked=!0,this._refreshStatus(),this.moveTree=[this.move_tree_root],this.move_tree_selectedItem=this.move_tree_root,this.getMoveTreeList(this.move_tree_selectedItem),this.modal_move=!0},e.prototype.click_li_tool_reName=function(e){var t=this;this._checkAll(!1),e.checked=!0,e.file_name_focus="file_name",this._refreshStatus(),"folder"===e.type?(e.contenteditable=!0,setTimeout(function(){t.fileList.nativeElement.querySelector(".file_name").focus()},100)):"library"===e.type&&(this.library_upt_old=e,this.library_upt=!0)},e.prototype.click_rename=function(e){null!=e.contenteditable&&!0===e.contenteditable||(e.contenteditable=!0,e.file_name_focus="file_name")},e.prototype.blur_rename=function(e,t){var n=this;e.contenteditable=!1,e.file_name_focus="",""!==t.target.textContent&&""!==t.target.textContent.trim()||(this._message.create("warning","文件夹/题集名称不能为空"),t.target.textContent=t.target.title),t.target.title!==t.target.textContent&&(this.modal_loding=!0,"folder"===e.type&&this.directoryService.reName(e.id,t.target.textContent.trim()).then(function(e){null!=e&&200===e.code?(n._message.create("success","重命名成功"),t.target.title=t.target.textContent):(n._message.create("error",e?"重命名失败":e.msg),t.target.textContent=t.target.title),n.modal_loding=!1},this.handServiceError))},e.prototype.click_delFriendShare=function(){alert("删除好友分享")},e.prototype.click_questionAdd=function(e){this.question_add=!0,e&&(this._library_add_question=e.id)},e.prototype.click_moveQuention=function(){var e=[];this.getSelectedQuestion().forEach(function(t){e.push(t.id)}),0!==e.length?this.question_move=!0:this._message.create("warning","请先选择题目")},e.prototype.click_editQuention=function(){},e.prototype.click_deleteQuention=function(){var e=[];this.getSelectedQuestion().forEach(function(t){e.push(t.id)}),0!==e.length?this.questionDelete():this._message.create("warning","请先选择题目")},e.prototype.click_yunfileResource=function(e){},e.prototype.getRoot=function(){var e=this;null!=this.root?(this.parentId=this.rootId,this.pathList=[],this.pathList.push(this.root),this.root.item_open="item-open",this.root.list_selected="list-selected",this.root.tree_icon_class="link",this.directoryTree=[this.root],this.parentObj=this.directoryTree[0],this.getDirectoryList()):(this.modal_loding=!0,this.directoryService.rootInit(this.userId).then(function(t){null!=t&&200===t.code&&(e.rootId=t.folder.id)}).then(function(){e.directoryService.getRoot(e.userId,e.rootId).then(function(t){if(null!=t&&200===t.code){var n=new c.Directory;n.name=t.folderName||"我的资源",n.parentId=e.rootId,e.parentId=e.rootId,n.id="",n.zIndex=100-e.pathList.length,n.type="folder",e.pathList=[],e.pathList.push(n),n.item_open="item-open",n.list_selected="list-selected",n.tree_icon_class="link",e.directoryTree=[n],e.root=n,e.move_tree_root=JSON.parse(JSON.stringify(n)),e.parentObj=e.directoryTree[0],e.getDirectoryList()}else e._message.create("error","获取数据失败");e.modal_loding=!1},e.handServiceError)}))},e.prototype.getAllTypeNumber=function(){var e=this;this.directoryService.getAllTypeNumber(this.userId).then(function(t){null!=t&&200===t.code?(e.count_videos=t.summarize.video,e.count_audios=t.summarize.audio,e.count_documents=t.summarize.doc,e.count_imgs=t.summarize.pic,e.count_others=t.summarize.other):e._message.create("error",t.desc)})},e.prototype.click_tree_li=function(e){"folder"===e.type&&(this.parentObj.list_selected="",e.list_selected="list-selected","item-open"===e.item_open||(e.item_open="item-open"),this.parentObj=e,this.parentId=e.id,e.zIndex=100-parseInt(e.level,0),this.pathList.splice(parseInt(e.level,0)),this.pathList.push(e),this.getDirectoryList())},e.prototype.getMoveTreeList=function(e){var t=this;console.log(e),this.directoryService.getByParent(e.id,this.userId).then(function(n){if(null!=n&&"1"===n.code){var o=[];n.data.childPaperFolderList.forEach(function(e){e.type="folder",e.name=e.folderName,e.tree_icon_class="link",o.push(e)}),n.data.childPaperList.forEach(function(e){e.type="paper",e.name=e.paperName,e.parentId=e.folderId,e.tree_icon_class="link-paper",o.push(e)}),e.list=o}else t._message.create("error","获取数据失败")})},e.prototype.getQuestionsList=function(e){this.modal_loding=!0},e.prototype.getQRecycleBinTree=function(){var e=this;this.modal_loding=!0,this.directoryService.getQRecycleBinTree(this.userId).then(function(t){if(null!=t&&200===t.code){var n=[];t.deletedFolders.forEach(function(e){e.type="folder",e.deleteId=e.id,e.id=e.objId,e.name=e.folderName,e.deleteTime=e.updatetime,n.push(e)}),t.deletedResources.forEach(function(e){e.qLibrary={},e.qLibrary.type="paper",e.qLibrary.deleteId=e.id,e.qLibrary.name=e.name,e.qLibrary.deleteTime=e.updatetime,n.push(e.qLibrary)}),e.directoryList=n,e._refreshStatus()}else e._message.create("error","获取数据失败");e.modal_loding=!1},this.handServiceError)},e.prototype.newFolder=function(){var e=this;this.modal_loding=!0;this.parentObj.level;this.directoryService.newFolder(this.parentId,this.userId,this.getNewName("folder")).then(function(t){null!=t&&200===t.code?(e._message.create("success","新建文件夹成功"),e.getDirectoryList()):e._message.create("error",t?"新建文件夹失败":t.msg),e.modal_loding=!1},this.handServiceError)},e.prototype.getNewName=function(e){var t,n;"folder"===e&&(t="新建文件夹"),"library"===e&&(t="新建题集"),n=t;for(var o=0;o<1e3;o++)if(0!==o&&(n=t+"("+o+")"),!1===this.checkName(n,e))return n;return t},e.prototype.checkName=function(e,t){for(var n=0,o=this.directoryList;n<o.length;n++){var i=o[n];if(i.type===t&&i.name===e)return!0}return!1},e.prototype.musicDelete=function(e){var t=this;"folder"===e.type?this.directoryService.batchDeleteFolder(this.userId,e.id).then(function(e){200===e.code?(t._message.create("success","删除成功"),t.getDirectoryList()):t._message.create("error","删除失败")}):"paper"===e.type&&this.directoryService.batchDeleteFile(this.parentId,e.id).then(function(e){200===e.code?(t._message.create("success","删除成功"),t.getDirectoryList()):t._message.create("error","删除失败")})},e.prototype.trueDelete=function(e){var t=this;"folder"===e.type?this.directoryService.pseudoDeleteFolder(this.userId,e.deleteId).then(function(e){200===e.code?(t._message.create("success","删除成功"),t.refresh()):t._message.create("error","删除失败")}):"paper"===e.type&&this.directoryService.pseudoDeleteFile(this.userId,e.deleteId).then(function(e){200===e.code?(t._message.create("success","删除成功"),t.refresh()):t._message.create("error","删除失败")})},e.prototype.batchDelete=function(){var e=this;0!==this._checkedNumber?this._modal.confirm({title:"删除",content:"确认要删除选中的这"+this._checkedNumber+"项?",showConfirmLoading:!0,onOk:function(){e.modal_loding=!0,e.directoryService.batchDelete(e.getSelectedId(),e.userId).then(function(t){null!=t&&1===t.code?(e._message.create("success","删除成功"),e.getDirectoryList(),e.getAllCount()):e._message.create("error","删除失败"),e.modal_loding=!1},e.handServiceError)},onCancel:function(){}}):this._message.create("warning","请先选择文件夹/试题集")},e.prototype.openQuestionList=function(e){this.parentId=e.id,this._library_add_question=e.id,e.zIndex=100-this.pathList.length,this.current_question_sidebar=!0,this.getQuestionsList(e.id),this.pathList.push(e)},e.prototype.openFolder=function(e){"recycle"!==this.current_sidebar&&(this.parentId=e.id,this.parentObj.list_selected="",e.list_selected="list-selected",this.parentObj=e,this.getDirectoryList(),e.zIndex=100-this.pathList.length,this.pathList.push(e))},e.prototype.clearRecycle=function(e){var t=this;this.directoryService.cleanRecycle(this.userId).then(function(e){200===e.code?(t._message.create("success","清空回收站成功"),t.refresh()):t._message.create("error","清空回收站失败")})},e.prototype._refreshStatus=function(){console.log("复选框刷新")},e.prototype._checkAll=function(e){e?this.directoryList.forEach(function(e){e.checked=!0}):this.directoryList.forEach(function(e){e.checked=!1}),this._refreshStatus()},e.prototype.getSelectedId=function(){for(var e=[],t=[],n=0,o=this.directoryList;n<o.length;n++){var i=o[n];i.checked&&("folder"===i.type?e.push(i.id):"paper"===i.type&&t.push(i.id))}return{childFolderIdList:e,childPaperIdList:t}},e.prototype.restoreFile=function(e){var t=this;this.directoryService.restoreFile(this.userId,e.deleteId).then(function(e){200===e.code?(t._message.create("success","还原成功"),t.refresh()):t._message.create("error","还原失败")})},e.prototype.restoreFolder=function(e){var t=this;this.directoryService.restoreFolder(this.userId,e.deleteId).then(function(e){200===e.code?(t._message.create("success","还原成功"),t.refresh()):t._message.create("error","还原失败")})},e.prototype.getSelectedQuestion=function(){return[]},e.prototype.move_handleOk=function(e){var t=this;this.modal_move=!1,e?(this.modal_loding=!0,this.directoryService.batchMove(this.getSelectedId(),e.id).then(function(e){1===e.code?(t._message.create("success",e.msg),t.getDirectoryList()):-1===e.code?(t._message.create("success","部分移动成功"),t.getDirectoryList()):t._message.create("error","移动失败"),t.modal_loding=!1},this.handServiceError)):this._message.create("warning","移动目标选择失败")},e.prototype.recoveryTo_handleOk=function(e){var t=this;this.modal_recycle=!1,null!==this.odal_recycle_directory?e?(this.modal_loding=!0,this.directoryService.recoveryTo(this.getSelectedId(),e.id,this.parentId).then(function(e){1===e.code?(t._message.create("success",e.msg),t.getQRecycleBinTree()):t._message.create("error",e.msg),t.modal_loding=!1},this.handServiceError)):this._message.create("warning","还原目标选择失败"):this._message.create("warning","操作异常")},e.prototype.library_add_handleOk=function(e){var t=this;if(this.library_add=!1,e){if(null===e.libraryName||""===e.libraryName)return void this._message.create("warning","请输入题集名称");this.modal_loding=!0,this.libraryService.librariesCreate(this.parentId,e.libraryName,e.remarks).then(function(e){null!=e&&1===e.code?(t._message.create("success","创建成功"),t.getDirectoryList()):t._message.create("error","创建失败"),t.modal_loding=!1})}else this._message.create("warning","移动目标选择失败")},e.prototype.library_upt_handleOk=function(e){var t=this;if(this.library_upt=!1,e){if(null===e.libraryName||""===e.libraryName)return void this._message.create("warning","请输入题集名称");this.modal_loding=!0,this.libraryService.update(e.id,e.libraryName,e.remarks).then(function(e){null!=e&&1===e.code?(t._message.create("success","题集信息修改成功"),t.getDirectoryList()):t._message.create("error","题集信息修改失败"),t.modal_loding=!1})}else this._message.create("warning","移动目标选择失败")},e.prototype.spread=function(e){e.up=!e.up},e.prototype._console=function(e){},e.prototype.questionDelete=function(){var e=[];this.getSelectedQuestion().forEach(function(t){e.push(t.id)}),0!==e.length?this._modal.confirm({title:"删除",content:"确认要删除选中的这"+this._checkedNumber+"项?",showConfirmLoading:!0,onOk:function(){},onCancel:function(){}}):this._message.create("warning","请先选择文件夹/试题集/题目")},o([r.ViewChild("fileList"),i("design:type",Object)],e.prototype,"fileList",void 0),e=o([r.Component({selector:"paper-main",template:n(771),styles:[n(772)]}),i("design:paramtypes",[s.ActivatedRoute,d.DirectoryPaperService,u.LibraryService,a.NzMessageService,a.NzModalService,l.Http,p.UserInfoService])],e)}();t.PaperManagementComponent=h},423:function(e,t,n){"use strict";var o=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,s=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(r<3?i(s):r>3?i(t,n,s):i(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var r=n(2),s=n(13),a=n(11),l=function(){function e(e,t){this.uis=e,this.router=t}return e.prototype.canActivate=function(e,t){t.url;return this.isLogin()},e.prototype.canActivateChild=function(e,t){return this.canActivate(e,t)},e.prototype.isLogin=function(){return!!localStorage.getItem("user")||(this.router.navigate(["/sign"]),!1)},e=o([r.Injectable(),i("design:paramtypes",[a.UserInfoService,s.Router])],e)}();t.AuthGuard=l},424:function(e,t,n){"use strict";var o=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,s=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(r<3?i(s):r>3?i(t,n,s):i(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s};Object.defineProperty(t,"__esModule",{value:!0});var i=n(2),r=function(){function e(){}return e.prototype.canDeactivate=function(e){return!e.canDeactivate||e.canDeactivate()},e=o([i.Injectable()],e)}();t.CanDeactivateGuard=r},425:function(e,t,n){"use strict";var o=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,s=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(r<3?i(s):r>3?i(t,n,s):i(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s};Object.defineProperty(t,"__esModule",{value:!0});var i=n(2),r=n(12),s=n(6),a=n(13),l=n(34),c=n(773),d=n(427),u=n(426),p=n(787),m=n(790),h=n(67),f=n(428),g=n(793),v=n(68),y=n(56),b=n(429),z=n(796),_=n(206),I=n(799),C=n(802),S=n(69),w=n(430),k=n(805),T=n(118),x=n(431),O=function(){function e(){}return e=o([i.NgModule({declarations:[u.ClassesComponent,b.EditClassComponent,d.MyClassesComponent,p.ClassesJoinComponent,m.ClassCeilComponent,f.ClassDetailComponent,z.ClassGroupComponent,g.ClassChapterDetailComponent,I.TemplateControlComponent,C.ClassHomeworkComponent,w.ClassHomeworkDetailComponent,x.QuestionLabComponent,k.ChapterHomeworkComponent],imports:[l.CommonModule,r.FormsModule,r.ReactiveFormsModule,s.NgZorroAntdModule.forRoot(),a.RouterModule.forChild(c.ClassesRoute),T.DdCommonModule],exports:[a.RouterModule],providers:[h.ClassesService,v.TeachingMaterialService,y.StudySectionService,_.ClassChapterTemplateService,S.ClassHomeworkService]})],e)}();t.ClassesModules=O},426:function(e,t,n){"use strict";var o=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,s=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(r<3?i(s):r>3?i(t,n,s):i(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var r=n(2),s=n(67),a=n(11),l=n(6),c=function(){function e(e,t,n){this.cs=e,this.uis=t,this.message=n,this._isSpinning=!1}return e.prototype._addClass=function(){var e=this;this.cs.userCreateClass(this.userId).subscribe(function(t){200===t.code?e.message.info("添加成功"):e.message.info("添加失败")},function(e){console.error(e)})},e.prototype.ngOnInit=function(){this.userId=this.uis.getUserInfo().userId},o([r.Output(),i("design:type",Object)],e.prototype,"_isSpinning",void 0),e=o([r.Component({selector:"app-classes",template:n(774),styles:[n(775)]}),i("design:paramtypes",[s.ClassesService,a.UserInfoService,l.NzMessageService])],e)}();t.ClassesComponent=c},427:function(e,t,n){"use strict";var o=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,s=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(r<3?i(s):r>3?i(t,n,s):i(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var r=n(2),s=n(67),a=n(11),l=n(12),c=n(6),d=n(13),u=n(56);n(776);var p=n(68),m=function(){function e(e,t,n,o,i,r,s){var a=this;this.cs=e,this.uis=t,this.fb=n,this.message=o,this.router=i,this.sss=r,this.ts=s,this.template_classAdd=!1,this._gradeReady=!0,this._submitForm=function(){for(var e in a.validateForm.controls)e&&a.validateForm.controls[e].markAsDirty();a.validateForm.controls.code.value&&(a._isSpinning=!0,a.cs.stuJoinClass(a.userId,a.validateForm.controls.code.value).subscribe(function(e){a._isSpinning=!1,200===e.code?(a.message.info("加入课堂成功"),a._getClasses()):a.message.info("加入课堂失败")},function(e){a._isSpinning=!1,console.error(e)}))},this.gradeChange=function(e){console.log(e),a.ts.queryTeachingMaterial({gradeId:e}).mergeMap(function(t){if(200===t.code)return a._gradeReady=!1,a.teachFormData=t.bookList,a.sss.queryAllClass(1,e);a.message.error(t.desc)}).subscribe(function(e){200===e.code?(a._gradeReady=!1,a._gradeClassData=e.classList):a.message.error(e.desc)},function(e){console.error(e)})},this._getGrades=function(){a.sss.queryGrade().subscribe(function(e){200===e.code?a.gradeData=e.gradeList:a.message.error(e.desc)},function(e){console.error(e)})},this._getGradeClasses=function(){a.uis.selfQueryUserInfo(a.userId).mergeMap(function(e){if(200===e.code)return a.sss.queryAllClass(1);console.error(e.desc)}).subscribe(function(e){200===e.code?a._gradeClassData=e.classList:console.error(e.desc)},function(e){console.error(e)})},this.submitAddClass=function(e,t){for(var n in e.preventDefault(),a.classForm.controls)n&&a.classForm.controls[n].markAsDirty();a.classForm.valid&&(a.template_classAdd=!1,a.cs.teacherCreateClass(a.userId,t.selectGradeId,t.selectClassId,t.materialId,t.title,a.userInfo.userName,t.imgTfileId).subscribe(function(e){200===e.code?(a.message.success("操作成功"),a.classForm.clearValidators(),console.log(e)):a.message.error(e.desc)},function(e){console.error(e)}))},this.getMaterialVersion=function(){a.ts.getVersion().subscribe(function(e){if(200===e.code)for(var t in a.teachFormData=[],e.versions)e.versions[t]&&a.teachFormData.push({label:t,value:e.versions[t]});else a.message.error(e.desc)},function(e){console.error(e)})},this.onChange=function(e){a._file=e.srcElement.files[0],console.dir(a._file);var t=new FormData;t.append("file",a._file),a.ts.uploadImage(t).subscribe(function(e){200===e.code&&a.classForm.controls.imgTfileId.setValue(e.file_id)},function(e){a.message.error(e["上传图片故障"])})},this._isSpinning=!1}return e.prototype.onDelete=function(e){e&&this.ngOnInit()},e.prototype.getFormControl=function(e){return this.validateForm.controls[e]||this.classForm.controls[e]},e.prototype._addClass=function(){},e.prototype.ngOnInit=function(){this.userId=this.uis.getUserInfo().id,this._getGrades(),this.getMaterialVersion(),this.validateForm=this.fb.group({code:[null,[l.Validators.required]]}),this.classForm=this.fb.group({selectGradeId:[null,[l.Validators.required]],selectClassId:[null,[l.Validators.required]],materialId:[null,[l.Validators.required]],title:[null,[l.Validators.required]],imgTfileId:[null,[l.Validators.required]]}),this._getClasses(),this._getGradeClasses(),this.userInfo=this.uis.getUserInfo()},e.prototype._getClasses=function(){var e=this;this._isSpinning=!0,this.cs.getCreatedOrAttendedClasses(this.userId).subscribe(function(t){e._isSpinning=!1,200===t.code&&(e._classes=t.rooms)},function(t){e._isSpinning=!1,console.error(t)})},e=o([r.Component({selector:"app-my-classes",template:n(777),styles:[n(778)]}),i("design:paramtypes",[s.ClassesService,a.UserInfoService,l.FormBuilder,c.NzMessageService,d.Router,u.StudySectionService,p.TeachingMaterialService])],e)}();t.MyClassesComponent=m},428:function(e,t,n){"use strict";var o=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,s=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(r<3?i(s):r>3?i(t,n,s):i(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var r=n(2),s=n(13),a=n(67),l=n(11),c=n(6),d=n(12),u=function(){function e(e,t,n,o,i,r){var s=this;this.route=e,this.cs=t,this.uis=n,this._message=o,this.fb=i,this.router=r,this.list=[],this._groupTemplate_title=!1,this._groupAdd=!0,this._groupTemplate_singleMemberSet=!1,this._groupTemplate_groupMemberSet=!1,this._groupTemplate_groupMembers=!1,this._addHomework=!1,this._homeworkAdd=!0,this.homeworkTypes=[{label:"课前",value:"PRE_CLASSROOM"},{label:"课中",value:"IN_CLASSROOM"},{label:"课后",value:"AFTER_CLASSROOM"}],this._templateControlVisible=!1,this.getFormControl=function(e){return s.validateForm.controls[e]||s._addHomeworkForm.controls[e]},this.submitForm=function(){s.validateForm.controls.groupName.markAsDirty(),s.validateForm.valid&&s._groupAdd&&s.creatGroup(s.roomId,s.validateForm.controls.groupName.value)},this.setCurrentGroup=function(e,t){s._currentGroup={id:e,title:t},s.validateForm.controls.groupName.setValue(t)},this.setTargetGroup=function(e){s._targetGroup=s._groups.filter(function(t){return t.id===e})[0],console.dir(s._targetGroup)},this._cleanUp=function(){s._currentGroup={id:"",title:""},s._targetGroup={id:"",title:""}},this.groupsInit=function(e){s.cs.getGroups(e).subscribe(function(e){200===e.code?s._groups=e.groups:s._message.error(e.desc)},function(e){s._message.error(e)}),s.cs.getUngroupedMembers(s.roomId).subscribe(function(e){200===e.code?s._unGroupedGroup=e.users:s._message.error(e.desc)},function(e){console.error(e)})},this.creatGroup=function(e,t,n){s.cs.addGroup(e,t,n).subscribe(function(e){200===e.code?(s._message.success("操作成功"),s._groupTemplate_title=!1,s.groupsInit(s.roomId)):s._message.error(e.desc)},function(e){s._message.error(e)})},this.reviseGroupTitle=function(e,t){s.cs.reviseGroupName(e,t).subscribe(function(e){200===e.code?(s._message.success("操作成功"),s._groupTemplate_title=!1,s.groupsInit(s.roomId)):s._message.error(e.desc)},function(e){s._message.error(e)})},this.deleteGroup=function(e){s.cs.deleteGroup(e).subscribe(function(e){200===e.code?(s._message.success("操作成功"),s.groupsInit(s.roomId)):s._message.error(e.desc)},function(e){s._message.error(e)})},this.reviseGroupMember=function(e,t,n,o){s.cs.reviseGroupMember(e,t,n,o).subscribe(function(e){200===e.code?(s._message.success("操作成功"),s.groupsInit(s.roomId)):s._message.error(e.desc)},function(e){s._message.error(e)})},this.singleSubmit=function(e,t,n,o){s._singleGroupId&&(s._groupTemplate_singleMemberSet=!1,s.reviseGroupMember(e,t,n,o))},this.select=function(e){console.log("nzSelectChange",e)},this.change=function(e){console.log("nzChange",e)},this.createHomework=function(){for(var e in s._addHomeworkForm.controls)s._addHomeworkForm.controls[e]&&s._addHomeworkForm.controls[e].markAsDirty();s._addHomeworkForm.valid&&s._homeworkAdd&&(s._addHomework=!1,s._message.success("新增作业成功"),s._addHomeworkForm.reset())},this.cardCallback=function(e){"update"===e.homeworkStatus&&(s._homeworkAdd=!1,s._addHomework=!0),"delete"===e.homeworkStatus&&s._message.success("收到delete消息")},this.groupDelete=function(e){e&&s.groupsInit(s.roomId)},this.groupChangeName=function(e){e&&s.groupsInit(s.roomId)},this.selectChange=function(e){console.log(e)},this.console=function(e){console.log(e)},this._currentGroup={id:"",title:""},this._targetGroup={id:"",title:""}}return e.prototype.deleteStudent=function(e){var t=this;this.cs.stuQuitClass(e,this.roomId).subscribe(function(e){200===e.code?(t._message.create("success","成员移除成功"),t.ngOnInit()):t._message.create("error","成员移除失败")},function(e){console.error(e)})},e.prototype.ngOnInit=function(){for(var e=this,t=0;t<20;t++)this.list.push({key:t.toString(),title:"content"+(t+1),disabled:t%3<1});[2,3].forEach(function(t){e.list[t].direction="right"}),this.validateForm=this.fb.group({groupName:[null,d.Validators.required]}),this._addHomeworkForm=this.fb.group({homeworkTitle:[null,d.Validators.required],homeworkType:[null,d.Validators.required],homeworkDeadline:[null,d.Validators.required]}),this.roomId=this.route.snapshot.paramMap.get("id"),this.userInfo=this.uis.getUserInfo(),this.groupsInit(this.roomId),this.cs.getClassStudents(this.roomId).subscribe(function(t){200===t.code&&(e.students=t.students)},function(e){console.error(e)}),this.cs.getClassDetail(this.roomId).subscribe(function(t){200===t.code&&(e.roomCode=t.room_code,e.roomTitle=t.title,e.teacherName=t.teacher_name,e.roomIntro=t.intro,e.chapters=t.chapters,e.bookId=t.bookId)},function(e){console.error(e)})},e=o([r.Component({selector:"app-class-detail",template:n(779),styles:[n(780)]}),i("design:paramtypes",[s.ActivatedRoute,a.ClassesService,l.UserInfoService,c.NzMessageService,d.FormBuilder,s.Router])],e)}();t.ClassDetailComponent=u},429:function(e,t,n){"use strict";var o=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,s=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(r<3?i(s):r>3?i(t,n,s):i(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var r=n(2),s=n(13),a=n(68),l=n(6),c=function(){function e(e,t,n){this.route=e,this.ts=t,this._message=n}return e.prototype.ngOnInit=function(){var e=this;this.roomId=this.route.snapshot.paramMap.get("id"),this.ts.queryTeachingMaterial({id:this.roomId}).subscribe(function(t){200===t.code&&e._message.success("获取数据成功")},function(e){})},e=o([r.Component({selector:"app-editClass",template:n(781),styles:[n(782)]}),i("design:paramtypes",[s.ActivatedRoute,a.TeachingMaterialService,l.NzMessageService])],e)}();t.EditClassComponent=c},430:function(e,t,n){"use strict";var o=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,s=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(r<3?i(s):r>3?i(t,n,s):i(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var r=n(2),s=n(12),a=n(13),l=n(69),c=n(6),d=n(11),u=function(){function e(e,t,n,o,i){var r=this;this.fb=e,this.activatedRoute=t,this.chs=n,this._message=o,this.uis=i,this.isTemplateShow=!1,this.answerList=[],this.rateLoading=!1,this.typeMap={SINGLE_SELECT:1,MULTI_SELECT:2,SHORT_ANSWER:3,SING:4},this.question_bind_model=!1,this.allQuestionListIndex=1,this._allChecked=!1,this._indeterminate=!1,this.homeworkQuestionTypes=[{value:1,label:"单选题"},{value:2,label:"多选题"},{value:3,label:"简答题"},{value:4,label:"视唱题"}],this.singleChoiceData=[{content:"",isTrue:!1,value:""},{content:"",isTrue:!0,value:""},{content:"",isTrue:!1,value:""},{content:"",isTrue:!1,value:""}],this.multipleChoiceData=[{content:"",isTrue:!1,value:""},{content:"",isTrue:!1,value:""},{content:"",isTrue:!1,value:""},{content:"",isTrue:!1,value:""}],this.getQuestionList=function(){2!==r.taskType?r.chs.getHomeworkQuestionList(r.taskId).subscribe(function(e){200===e.code?(r.questionList=e.questions,r.answerList=[],r.answerListInit()):r._message.error(e.desc)},function(e){console.error(e)}):r.chs.getStudentsAnswerFromTaskId(r.taskId,r.studentId).subscribe(function(e){200===e.code?r.questionList=e.taskAnswer:r._message.error(e.desc)},function(e){console.error(e)})},this.getFormControl=function(e){return r.questionForm.controls[e]},this.formClear=function(){r.currentQuestionType=r.homeworkQuestionTypes[0].value,r.questionForm.reset(),r.singleChoiceData=[{content:"",isTrue:!1,value:""},{content:"",isTrue:!1,value:""},{content:"",isTrue:!1,value:""},{content:"",isTrue:!1,value:""}],r.multipleChoiceData=[{content:"",isTrue:!1,value:""},{content:"",isTrue:!1,value:""},{content:"",isTrue:!1,value:""},{content:"",isTrue:!1,value:""}]},this.changeHomeworkTitle=function(e){r.questionForm.controls.homeworkContent.setValue(e)},this.homeworkBindQuestion=function(){r.question_bind_model=!1,r.currentQuestionId?r.chs.homeworkAddQuestion(r.taskId,r.currentQuestionId).subscribe(function(e){200===e.code?(r._message.success("操作成功"),r.getQuestionList()):r._message.error(e.desc)},function(e){console.error(e)}):r._message.error("没有选择题目")},this.console=function(e){console.log(r._bindQuestionList)},this._displayDataChange=function(e){r._message.success("数据变化"),console.log(e)},this._refreshStatus=function(){var e=r._bindQuestionList.every(function(e){return e.checked}),t=r._bindQuestionList.every(function(e){return!e.checked});r._allChecked=e,r._indeterminate=!e&&!t},this.getAllQuestionBankQuestion=function(){r.chs.queryQuestionListByCondition({page_num:r.allQuestionListIndex}).subscribe(function(e){200===e.code?(e.questions.forEach(function(e){e.checked=!1}),r._bindQuestionList=e.questions,r.allQuestionTotal=e.total):r._message.error(e.desc)},function(e){console.error(e)})},this.submitForm=function(){if(r.questionForm.controls.homeworkContent.markAsDirty(),r.questionForm.controls.homeworkType.markAsDirty(),r.questionForm.valid){var e={questionType:r.questionForm.controls.homeworkType.value,title:r.questionForm.controls.homeworkContent.value};switch(e.questionType){case 1:e.questionType="SINGLE_SELECT",e.listOption=r.singleChoiceData;break;case 2:e.questionType="MULTI_SELECT",e.listOption=r.multipleChoiceData;break;case 3:e.questionType="SHORT_ANSWER";break;case 4:e.questionType="SING"}r.chs.saveQuestion(e).mergeMap(function(e){if(200===e.code)return r.chs.homeworkAddQuestion(r.taskId,e.data);r._message.error("保存题目失败"+e.desc)}).subscribe(function(e){200===e.code?(r.isTemplateShow=!1,r._message.success("新增题目成功"),r.getQuestionList()):r._message.error(e.desc)},function(e){console.error(e)})}},this.deleteQuestion=function(e){r.chs.deleteTask(e).subscribe(function(e){200===e.code?(r._message.success("删除题目成功"),r.getQuestionList()):r._message.error(e.desc)},function(e){console.error(e)})},this.optionsOperator=function(e,t,n){switch(e){case"single":"add"===t?r.singleChoiceData.push({content:"",isTrue:!1,value:""}):r.singleChoiceData.splice(n,1);break;case"multiple":"add"===t?r.multipleChoiceData.push({content:"",isTrue:!1,value:""}):r.multipleChoiceData.splice(n,1)}},this.answerListInit=function(){r.questionList.forEach(function(e){r.answerList.push({questionId:e.id,taskId:r.taskId,answer:""})})},this.getEmmitAnswer=function(e,t){r.answerList[t].answer=e},this.submitAnswer=function(){r.chs.studentsSubmitQuestion({answers:r.answerList,taskId:r.taskId,uid:r.userId}).subscribe(function(e){200===e.code?r._message.success("作业提交成功"):r._message.error(e.desc)},function(e){console.error(e)})},this.singleOptionChange=function(e){r.singleChoiceData.forEach(function(e){e.isTrue=!1}),r.singleChoiceData[e].isTrue=!0},this.rateAllSelectquestion=function(){r.rateLoading=!0,r.chs.rateAllSelectQuestion(r.taskId).subscribe(function(e){200===e.code?(r.rateLoading=!1,r._message.success("请求成功"),r.getQuestionList()):r._message.error(e.desc)},function(e){console.error(e)})},this.activatedRoute.queryParamMap.subscribe(function(e){r.taskId=e.params.taskId,r.taskType=e.params.taskType,2===r.taskType&&(r.studentId=e.params.studentId)})}return e.prototype.ngOnInit=function(){this.userId=this.uis.getUserInfo().userId,this.currentQuestionType=this.homeworkQuestionTypes[0].value,this.questionForm=this.fb.group({homeworkContent:[null,s.Validators.required],homeworkType:[3,s.Validators.required]}),this.getQuestionList(),this.getAllQuestionBankQuestion()},e.prototype._checkAll=function(e){e?this._bindQuestionList.forEach(function(e){e.checked=!0}):this._bindQuestionList.forEach(function(e){return e.checked=!1}),this._refreshStatus()},e=o([r.Component({selector:"app-homework-detail",template:n(783),styles:[n(784)]}),i("design:paramtypes",[s.FormBuilder,a.ActivatedRoute,l.ClassHomeworkService,c.NzMessageService,d.UserInfoService])],e)}();t.ClassHomeworkDetailComponent=u},431:function(e,t,n){"use strict";var o=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,s=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(r<3?i(s):r>3?i(t,n,s):i(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var r=n(2),s=n(12),a=n(6),l=n(69),c=n(11),d=function(){function e(e,t,n,o){var i=this;this.fb=e,this._message=t,this.chs=n,this.uis=o,this.isTemplateShow=!1,this.currentIndex=1,this.totalQuestion=10,this.questionDifficulty=.95,this.homeworkQuestionTypes=[{value:1,label:"单选题"},{value:2,label:"多选题"},{value:3,label:"简答题"},{value:4,label:"视唱题"}],this.singleChoiceData=[{content:"",isTrue:!1,value:""},{content:"",isTrue:!0,value:""},{content:"",isTrue:!1,value:""},{content:"",isTrue:!1,value:""}],this.multipleChoiceData=[{content:"",isTrue:!1,value:""},{content:"",isTrue:!1,value:""},{content:"",isTrue:!1,value:""},{content:"",isTrue:!1,value:""}],this.getQuestionList=function(e){i.chs.queryQuestionListByCondition({page_num:e||1}).subscribe(function(e){200===e.code?(i.currentIndex=1,i.questionList=e.questions,i.totalQuestion=e.total):i._message.error(e.desc)},function(e){console.error(e)})},this.getFormControl=function(e){return i.questionForm.controls[e]},this.formClear=function(){i.currentQuestionType=i.homeworkQuestionTypes[0].value,i.questionForm.reset(),i.singleChoiceData=[{content:"",isTrue:!1,value:""},{content:"",isTrue:!1,value:""},{content:"",isTrue:!1,value:""},{content:"",isTrue:!1,value:""}],i.multipleChoiceData=[{content:"",isTrue:!1,value:""},{content:"",isTrue:!1,value:""},{content:"",isTrue:!1,value:""},{content:"",isTrue:!1,value:""}]},this.changeHomeworkTitle=function(e){i.questionForm.controls.homeworkContent.setValue(e)},this.singleOptionChange=function(e){i.singleChoiceData.forEach(function(e){e.isTrue=!1}),i.singleChoiceData[e].isTrue=!0},this.submitForm=function(){if(i.questionForm.controls.homeworkContent.markAsDirty(),i.questionForm.controls.homeworkType.markAsDirty(),i.questionForm.valid){var e={questionType:i.questionForm.controls.homeworkType.value,title:i.questionForm.controls.homeworkContent.value,compositeAbilitys:"LISTEN_FEELING",difficulty:i.questionDifficulty};switch(e.questionType){case 1:e.questionType="SINGLE_SELECT",e.listOption=i.singleChoiceData;break;case 2:e.questionType="MULTI_SELECT",e.listOption=i.multipleChoiceData;break;case 3:e.questionType="SHORT_ANSWER";break;case 4:e.questionType="SING"}i.chs.saveQuestion(e).subscribe(function(e){200===e.code?(i.isTemplateShow=!1,i._message.success("新增题目成功"),i.questionDifficulty=.95,i.getQuestionList()):i._message.error(e.desc)},function(e){console.error(e)})}},this.deleteQuestion=function(e){i.chs.deleteTask(e).subscribe(function(e){200===e.code?(i._message.success("删除题目成功"),i.getQuestionList()):i._message.error(e.desc)},function(e){console.error(e)})},this.optionsOperator=function(e,t,n){switch(e){case"single":"add"===t?i.singleChoiceData.push({content:"",isTrue:!1,value:""}):i.singleChoiceData.splice(n,1);break;case"multiple":"add"===t?i.multipleChoiceData.push({content:"",isTrue:!1,value:""}):i.multipleChoiceData.splice(n,1)}}}return e.prototype.ngOnInit=function(){this.questionForm=this.fb.group({homeworkContent:[null,s.Validators.required],homeworkType:[3,s.Validators.required]}),this.userId=this.uis.getUserInfo().userId,this.currentQuestionType=this.homeworkQuestionTypes[0].value,this.getQuestionList()},e=o([r.Component({selector:"app-questionLab",template:n(785),styles:[n(786)]}),i("design:paramtypes",[s.FormBuilder,a.NzMessageService,l.ClassHomeworkService,c.UserInfoService])],e)}();t.QuestionLabComponent=d},432:function(e,t,n){"use strict";var o=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,s=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(r<3?i(s):r>3?i(t,n,s):i(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var r=n(2),s=function(){function e(){this.visible=!1,this.title=""}return o([r.Input(),i("design:type",Boolean)],e.prototype,"visible",void 0),o([r.Input(),i("design:type",String)],e.prototype,"title",void 0),e=o([r.Component({selector:"modal-loding",template:'\n    <div [style.display]="visible?\'block\':\'none\'"\n         style="position: absolute;z-index: 200;background: rgba(111,111,111,0.1);width: 100%;height: 100%;">\n      <div style="position: absolute;top: 47%;text-align:center;width: 100%;height: 100%;">\n        <nz-spin [nzTip]="title"></nz-spin>\n      </div>\n    </div>\n  '}),i("design:paramtypes",[])],e)}();t.LodingComponent=s},433:function(e,t,n){"use strict";var o=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,s=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(r<3?i(s):r>3?i(t,n,s):i(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s};Object.defineProperty(t,"__esModule",{value:!0});var i=n(2),r=n(12),s=n(6),a=n(13),l=n(34),c=n(434),d=n(831),u=n(435),p=n(437),m=n(436),h=n(422),f=n(202),g=n(205),v=n(838),y=n(438),b=function(){function e(){}return e=o([i.NgModule({declarations:[c.ZoonComponent,p.PasswordManagerComponent,m.UserAvatarComponent,u.InfoMaintainComponent,h.PaperManagementComponent],imports:[l.CommonModule,r.FormsModule,r.ReactiveFormsModule,y.ResourceModule,s.NgZorroAntdModule.forRoot(),a.RouterModule.forChild(d.ZoonRoute)],exports:[a.RouterModule],providers:[f.DirectoryPaperService,g.LibraryService,v.DirectoryUtil]})],e)}();t.ZoonModule=b},434:function(e,t,n){"use strict";var o=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,s=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(r<3?i(s):r>3?i(t,n,s):i(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s};Object.defineProperty(t,"__esModule",{value:!0});var i=n(2),r=function(){function e(){}return e=o([i.Component({selector:"app-zoon",template:n(829),styles:[n(830)]})],e)}();t.ZoonComponent=r},435:function(e,t,n){"use strict";var o=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,s=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(r<3?i(s):r>3?i(t,n,s):i(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var r=n(2),s=n(12),a=n(201),l=n(11),c=n(6),d=n(99),u=n(32),p=function(){function e(e,t,n,o,i){this.fb=e,this.ss=t,this._notification=n,this.uis=o,this.rs=i,this.subFlag=!0,this.userInfo=this.uis.getUserInfo(),this._userParams=new u.HttpParams}return e.prototype._submitForm=function(){var e=this;for(var t in this.validateForm.controls)this.validateForm.controls[t].value&&(this._userMaintain[t]=this.validateForm.controls[t].value,this._userParams.set(t,this.validateForm.controls[t].value));this.userId&&(this._userParams.set("uid",this.userId),this.rs.userComplete(this._userMaintain).subscribe(function(t){switch(t.code){case 200:e._notification.create("success","成功","信息保存成功！"),e.uis.setUserInfo(e._userMaintain);break;default:e._notification.create("warning","警告",t.desc)}},function(t){e._notification.create("error","错误",t.desc)}))},e.prototype.ngOnInit=function(){this.userId=this.uis.getUserInfo().userId||localStorage.getItem("user"),this._userMaintain={uid:this.userId},this.validateForm=this.fb.group({name:[this.userInfo.userName||""],phoneNumber:[this.userInfo.phone||""],gender:[this.userInfo.gender||null],age:[this.userInfo.age||null],school:[this.userInfo.school||null],grade:[this.userInfo.grade||null]})},e=o([r.Component({selector:"app-info-maintain",template:n(832),styles:[n(833)]}),i("design:paramtypes",[s.FormBuilder,d.SignService,c.NzNotificationService,l.UserInfoService,a.RegisterService])],e)}();t.InfoMaintainComponent=p},436:function(e,t,n){"use strict";var o=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,s=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(r<3?i(s):r>3?i(t,n,s):i(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var r=n(2),s=n(6),a=n(11),l=n(32),c=n(28),d=function(){function e(e,t,n,o){var i=this;this.msg=e,this.uis=t,this.http=n,this._message=o,this.loading=!1,this.beforeUpload=function(e){var t="image/jpeg"===e.type;t||i.msg.error("You can only upload JPG file!");var n=e.size/1024/1024<1e3;return n||i.msg.error("图片大小不能超过 1000MB!"),t&&n},this.selfUpload=function(e){i.getBase64(e.file,function(t){t=t.replace(/\+/g,"%2B");var n=(new l.HttpParams).set("photo",t);i.http.post(e.action,n).subscribe(function(e){200===e.code&&console.log("success")})})},this.selfUpload_file=function(e){var t=new FormData;t.append("file",e.file),t.append("uid",i.userId),t.append("fileName",e.file.name),i.http.post(e.action,t).subscribe(function(e){200===e.code?i._message.create("success","上传成功"):i._message.create("success",e.desc)},function(e){console.error(e)})},this.handlePreview=function(e){i.previewImage=e.url||e.thumbUrl}}return e.prototype.ngOnInit=function(){this.userId=this.uis.userId,this.uploadUrl=c.environment.basePath+"user/"+this.userId+"/photo"},e.prototype.getBase64=function(e,t){var n=new FileReader;n.addEventListener("load",function(){return t(n.result)}),n.readAsDataURL(e)},e.prototype.handleChange=function(e){var t=this;"uploading"!==e.file.status?"done"===e.file.status&&this.getBase64(e.file.originFileObj,function(e){t.loading=!1,t.avatarUrl=e}):this.loading=!0},e=o([r.Component({selector:"app-user-avatar",template:n(834),styles:[n(835)]}),i("design:paramtypes",[s.NzMessageService,a.UserInfoService,l.HttpClient,s.NzMessageService])],e)}();t.UserAvatarComponent=d},437:function(e,t,n){"use strict";var o=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,s=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(r<3?i(s):r>3?i(t,n,s):i(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var r=n(2),s=n(12),a=n(11),l=n(6),c=n(99),d=function(){function e(e,t,n,o){this.fb=e,this.ss=t,this._notification=n,this.uis=o,this.reviseFlag=!1,this.timeClear=3}return e.prototype._getCaptcha=function(e){var t=this;e.preventDefault(),this.validateForm.controls.userName.markAsDirty(),this.validateForm.controls.userName.dirty&&this.ss.musicGetCaptcha(this.validateForm.controls.userName.value).subscribe(function(e){switch(e.code){case 200:t._notification.create("success","成功","请前往邮箱获取验证码！");break;default:t._notification.create("warning","警告",e.desc)}},function(e){t._notification.create("error","错误",e.desc)})},e.prototype._submitForm=function(){var e=this;for(var t in this.validateForm.controls)this.validateForm.controls[t]&&this.validateForm.controls[t].markAsDirty();this.reviseFlag?this.validateForm.controls.userName.dirty&&this.ss.musicRevisePassword(this.validateForm.controls.userName.value,this.validateForm.controls.captcha.value,this.validateForm.controls.password.value).subscribe(function(t){switch(t.code){case 200:e._notification.create("success","成功","密码修改成功");break;default:e._notification.create("warning","警告",t.desc)}},function(t){t.code&&e._notification.create("error","错误",t.desc)}):this.validateForm.controls.userName.value&&this.validateForm.controls.password.value&&this.ss.musicLogin(this.validateForm.controls.userName.value,this.validateForm.controls.password.value).subscribe(function(t){switch(t.code){case 200:e.validateForm.controls.remember.value&&(localStorage.setItem("user",t.uid),e.uis.setUserInfo({email:t.email,userName:t.name,is_teacher:t.is_teacher,login_token:t.login_token,phone:t.phone,school:t.school,userId:t.uid,gender:t.gender,age:t.age}));break;default:e._notification.create("warning","警告",t.desc)}},function(t){t.code&&e._notification.create("error","错误",t.desc)})},e.prototype.ngOnInit=function(){this.validateForm=this.fb.group({userName:[null,[s.Validators.required]],password:[null,[s.Validators.required]],captcha:[null,[s.Validators.required]],remember:[!0]})},e=o([r.Component({selector:"app-password-manager",template:n(836),styles:[n(837)]}),i("design:paramtypes",[s.FormBuilder,c.SignService,l.NzNotificationService,a.UserInfoService])],e)}();t.PasswordManagerComponent=d},438:function(e,t,n){"use strict";var o=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,s=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(r<3?i(s):r>3?i(t,n,s):i(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s};Object.defineProperty(t,"__esModule",{value:!0});var i=n(2),r=n(839),s=n(432),a=n(842),l=n(843),c=n(845),d=n(848),u=n(850),p=n(852),m=n(34),h=n(12),f=n(6),g=n(118),v=function(){function e(){}return e=o([i.NgModule({declarations:[r.ResourcesComponent,a.QuestionsPipe,a.LibrarysPipe,a.FoldersPipe,a.PapersPipe,a.NumberToPipe,l.TreeViewComponent,c.MoveModalComponent,d.LibraryAddComponent,u.ContextMenuComponent,p.GlobalCssComponent],imports:[m.CommonModule,g.DdCommonModule,h.FormsModule,h.ReactiveFormsModule,f.NgZorroAntdModule.forRoot()],exports:[r.ResourcesComponent,s.LodingComponent,a.LibrarysPipe,a.FoldersPipe,a.QuestionsPipe,a.PapersPipe,a.NumberToPipe,l.TreeViewComponent,c.MoveModalComponent,d.LibraryAddComponent,u.ContextMenuComponent,p.GlobalCssComponent]})],e)}();t.ResourceModule=v},439:function(e,t,n){"use strict";var o=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,s=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(r<3?i(s):r>3?i(t,n,s):i(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s};Object.defineProperty(t,"__esModule",{value:!0});var i=n(2),r=n(440),s=n(34),a=n(12),l=n(6),c=n(13),d=n(855),u=n(441),p=n(442),m=n(438),h=n(443),f=n(56),g=n(444),v=n(867),y=n(445),b=n(870),z=n(118),_=function(){function e(){}return e=o([i.NgModule({declarations:[r.BaseDataAdministrationComponent,u.TeachingMaterialComponent,p.ResourcesComponent,h.StudySectionManagementComponent,g.AddClassComponent,v.MaterialsComponent,y.BookComponent,b.BookChapterComponent],imports:[s.CommonModule,a.FormsModule,a.ReactiveFormsModule,l.NgZorroAntdModule.forRoot(),c.RouterModule.forChild(d.BDARoute),m.ResourceModule,z.DdCommonModule],exports:[c.RouterModule],providers:[f.StudySectionService]})],e)}();t.BaseDataAdministrationModule=_},440:function(e,t,n){"use strict";var o=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,s=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(r<3?i(s):r>3?i(t,n,s):i(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var r=n(2),s=function(){function e(){}return e=o([r.Component({selector:"app-bda",template:n(853),styles:[n(854)]}),i("design:paramtypes",[])],e)}();t.BaseDataAdministrationComponent=s},441:function(e,t,n){"use strict";var o=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,s=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(r<3?i(s):r>3?i(t,n,s):i(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var r=n(2),s=n(13),a=n(68),l=n(6),c=function(){function e(e,t,n){var o=this;this.router=e,this._message=t,this.teachingS=n,this.queryAllMaterials=function(){o.teachingS.queryTeachingMaterial({}).subscribe(function(e){200===e.code?(o._message.success("资源请求成功"),o.booklist=e.bookList):o._message.error("资源请求失败")},function(e){console.error(e)})},this._deleteMaterial=function(e){o.teachingS.deleteTeachingMaterial(e).subscribe(function(e){200===e.code?(o._message.success("删除成功"),o.queryAllMaterials()):o._message.error(e.code)},function(e){console.error(e)})}}return e.prototype.ngOnInit=function(){this.queryAllMaterials()},e=o([r.Component({selector:"app-teachingMaterial",template:n(856),styles:[n(857)]}),i("design:paramtypes",[s.Router,l.NzMessageService,a.TeachingMaterialService])],e)}();t.TeachingMaterialComponent=c},442:function(e,t,n){"use strict";var o=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,s=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(r<3?i(s):r>3?i(t,n,s):i(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var r=n(2),s=n(13),a=n(6),l=n(97),c=n(149),d=n(202),u=n(205),p=n(11),m=function(){function e(e,t,n,o,i,r,s){var a=this;this.route=e,this.directoryService=t,this.libraryService=n,this._message=o,this._modal=i,this.http=r,this.uis=s,this.directoryList=[],this.directoryTree=[],this.moveTree=[],this.pathList=[],this.typeDirectoryList=[],this.current_question_sidebar=!1,this._allChecked=!1,this._indeterminate=!1,this._checkedNumber=0,this.papers_add=!1,this.modal_share=!1,this.modal_move=!1,this.modal_loding=!1,this.library_add=!1,this.library_upt=!1,this.question_add=!1,this.question_move=!1,this.modal_recycle=!1,this.tool_tree_view_class="layout module-disk",this.tool_grid_view_class="disk-view ui-view ui-listview",this.handServiceError=function(e){a._message.create("error","服务异常"),a.modal_loding=!1},this.click_uploadResource=function(e){var t=new FormData;t.append("file",e.file),t.append("uid",a.userId),t.append("folderId",a.parentId),t.append("fileName",e.file.name),a.http.post("resource/"+a.userId+"/folder/upload",t).toPromise().then(function(e){200===(e=JSON.parse(e._body)).code?(a._message.create("success","上传成功"),a.getDirectoryList(),a.getAllTypeNumber()):a._message.create("success",e.desc)}).catch(function(e){console.error(e)})},this._beforUpload=function(e){console.log(a),a.uploadData={uid:a.userId,folderId:a.parentId,fileName:e.name,file:e.file}},this.getType=function(e){e&&a.directoryService.getResourceByType(a.userId,e,0).then(function(e){if(null!=e&&200===e.code){var t=[];e.resources.forEach(function(e){e.type="paper",e.parentId=e.folderId,e.tree_icon_class="link-paper",t.push(e)}),a.typeDirectoryList=t}else a._message.create("error",e.desc)})},this.getDirectoryList=function(){a.modal_loding=!0,a.directoryService.getByParent(a.parentId||a.rootId,a.userId).then(function(e){if(console.log(e),null!=e&&200===e.code){var t=[];e.folders.forEach(function(e){e.type="folder",e.name=e.folderName,e.tree_icon_class="link",t.push(e)}),e.resources.forEach(function(e){e.type="paper",e.parentId=e.folderId,e.tree_icon_class="link-paper",t.push(e)}),a.directoryList=t,a.parentObj.list=t}else a._message.create("error","获取数据失败");a.modal_loding=!1},a.handServiceError)},this.handleOk=function(e){a.modal_share=!1,a.modal_move=!1,a._message.create("success","成功")},this.handleCancel=function(e){a.modal_share=!1,a.modal_move=!1,a._message.create("error","失败")},this.move_handleCancel=function(e){a.modal_move=!1},this.recoveryTo_handleCancel=function(e){a.modal_recycle=!1},this.library_add_handleCancel=function(e){a.library_add=!1},this.library_upt_handleCancel=function(e){a.library_upt=!1},this.tool_grid_class="",this.tool_tree_class="",this.context_menu_type="main",this.count_qRecycleBin=0,this.count_myShares=0,this.count_targetShares=0,this.parentId="",this.parentObj=new c.Directory,this.count_videos=0,this.count_audios=0,this.count_documents=0,this.count_imgs=0,this.count_others=0,self.refresh=this.refresh}return e.prototype.ngOnInit=function(){this.userId=this.uis.userId;var e=window.location.href.split("/");this.current_sidebar=e[e.length-1],this.refresh()},e.prototype.refresh=function(){switch(this.current_sidebar){case"disk":this.getRoot();break;case"videos":this.getType("videos");break;case"audios":this.getType("audios");break;case"documents":this.getType("documents");break;case"imgs":this.getType("imgs");break;case"others":this.getType("others");break;case"recycle":this.tool_tree_class="",this.tool_tree_view_class="layout module-disk",this.getQRecycleBinTree();break;default:this.current_sidebar="disk",this.getDirectoryList()}this.getAllTypeNumber()},e.prototype.getAllCount=function(){},e.prototype.click_path=function(e){this.parentId=e.id,this.parentObj.list_selected="",e.list_selected="list-selected",this.parentObj=e,this.current_question_sidebar=!1,this.getDirectoryList(),this.pathList.splice(101-e.zIndex)},e.prototype.click_all=function(e){this.context_menu_visible="hidden"},e.prototype.onContextmenu=function(e,t,n){n&&(n.checked=!0,this._refreshStatus()),e.preventDefault(),e.stopPropagation(),this.context_menu_visible=null,this.context_menu_type=t,this.context_menu_event=e,this.context_menu_dl=n},e.prototype.context_menu_click=function(e){switch(this.context_menu_visible="hidden",e){case"newTJ":this.papers_add=!0;break;case"newFolder":this.newFolder();break;case"refresh":this.refresh();break;case"cut":this._message.create("warning","暂不支持剪切");break;case"paste":this._message.create("warning","暂不支持粘贴");break;case"del":this.batchDelete();break;case"move":this.moveTree=[this.move_tree_root],this.move_tree_selectedItem=this.move_tree_root,this.getMoveTreeList(this.move_tree_selectedItem),this.modal_move=!0;break;case"rename":this.click_li_tool_reName(this.context_menu_dl);break;case"open":"folder"===this.context_menu_dl.type?this.openFolder(this.context_menu_dl):"library"===this.context_menu_dl.type&&this.openQuestionList(this.context_menu_dl);break;case"share":this._message.create("warning","暂不支持分享")}},e.prototype.click_li_tool_move=function(e){this._checkAll(!1),e.checked=!0,this._refreshStatus(),this.moveTree=[this.move_tree_root],this.move_tree_selectedItem=this.move_tree_root,this.getMoveTreeList(this.move_tree_selectedItem),this.modal_move=!0},e.prototype.click_li_tool_reName=function(e){var t=this;this._checkAll(!1),e.checked=!0,e.file_name_focus="file_name",this._refreshStatus(),"folder"===e.type?(e.contenteditable=!0,setTimeout(function(){t.fileList.nativeElement.querySelector(".file_name").focus()},100)):"library"===e.type&&(this.library_upt_old=e,this.library_upt=!0)},e.prototype.click_rename=function(e){null!=e.contenteditable&&!0===e.contenteditable||(e.contenteditable=!0,e.file_name_focus="file_name")},e.prototype.blur_rename=function(e,t){var n=this;e.contenteditable=!1,e.file_name_focus="",""!==t.target.textContent&&""!==t.target.textContent.trim()||(this._message.create("warning","文件夹/题集名称不能为空"),t.target.textContent=t.target.title),t.target.title!==t.target.textContent&&(this.modal_loding=!0,"folder"===e.type&&this.directoryService.reName(e.id,t.target.textContent.trim()).then(function(e){null!=e&&200===e.code?(n._message.create("success","重命名成功"),t.target.title=t.target.textContent):(n._message.create("error",e?"重命名失败":e.msg),t.target.textContent=t.target.title),n.modal_loding=!1},this.handServiceError))},e.prototype.click_delFriendShare=function(){alert("删除好友分享")},e.prototype.click_questionAdd=function(e){this.question_add=!0,e&&(this._library_add_question=e.id)},e.prototype.click_moveQuention=function(){var e=[];this.getSelectedQuestion().forEach(function(t){e.push(t.id)}),0!==e.length?this.question_move=!0:this._message.create("warning","请先选择题目")},e.prototype.click_editQuention=function(){},e.prototype.click_deleteQuention=function(){var e=[];this.getSelectedQuestion().forEach(function(t){e.push(t.id)}),0!==e.length?this.questionDelete():this._message.create("warning","请先选择题目")},e.prototype.click_yunfileResource=function(e){},e.prototype.getRoot=function(){var e=this;null!=this.root?(this.parentId=this.rootId,this.pathList=[],this.pathList.push(this.root),this.root.item_open="item-open",this.root.list_selected="list-selected",this.root.tree_icon_class="link",this.directoryTree=[this.root],this.parentObj=this.directoryTree[0],this.getDirectoryList()):(this.modal_loding=!0,this.directoryService.rootInit(this.userId).then(function(t){null!=t&&200===t.code&&(e.rootId=t.folder.id)}).then(function(){e.directoryService.getRoot(e.userId,e.rootId).then(function(t){if(null!=t&&200===t.code){var n=new c.Directory;n.name=t.folderName||"我的资源",n.parentId=e.rootId,e.parentId=e.rootId,n.id="",n.zIndex=100-e.pathList.length,n.type="folder",e.pathList=[],e.pathList.push(n),n.item_open="item-open",n.list_selected="list-selected",n.tree_icon_class="link",e.directoryTree=[n],e.root=n,e.move_tree_root=JSON.parse(JSON.stringify(n)),e.parentObj=e.directoryTree[0],e.getDirectoryList()}else e._message.create("error","获取数据失败");e.modal_loding=!1},e.handServiceError)}))},e.prototype.getAllTypeNumber=function(){var e=this;this.directoryService.getAllTypeNumber(this.userId).then(function(t){null!=t&&200===t.code?(e.count_videos=t.summarize.video,e.count_audios=t.summarize.audio,e.count_documents=t.summarize.doc,e.count_imgs=t.summarize.pic,e.count_others=t.summarize.other):e._message.create("error",t.desc)})},e.prototype.click_tree_li=function(e){"folder"===e.type&&(this.parentObj.list_selected="",e.list_selected="list-selected","item-open"===e.item_open||(e.item_open="item-open"),this.parentObj=e,this.parentId=e.id,e.zIndex=100-parseInt(e.level,0),this.pathList.splice(parseInt(e.level,0)),this.pathList.push(e),this.getDirectoryList())},e.prototype.getMoveTreeList=function(e){var t=this;console.log(e),this.directoryService.getByParent(e.id,this.userId).then(function(n){if(null!=n&&"1"===n.code){var o=[];n.data.childPaperFolderList.forEach(function(e){e.type="folder",e.name=e.folderName,e.tree_icon_class="link",o.push(e)}),n.data.childPaperList.forEach(function(e){e.type="paper",e.name=e.paperName,e.parentId=e.folderId,e.tree_icon_class="link-paper",o.push(e)}),e.list=o}else t._message.create("error","获取数据失败")})},e.prototype.getQuestionsList=function(e){this.modal_loding=!0},e.prototype.getQRecycleBinTree=function(){var e=this;this.modal_loding=!0,this.directoryService.getQRecycleBinTree(this.userId).then(function(t){if(null!=t&&200===t.code){var n=[];t.deletedFolders.forEach(function(e){e.type="folder",e.deleteId=e.id,e.id=e.objId,e.name=e.folderName,e.deleteTime=e.updatetime,n.push(e)}),t.deletedResources.forEach(function(e){e.qLibrary={},e.qLibrary.type="paper",e.qLibrary.deleteId=e.id,e.qLibrary.name=e.name,e.qLibrary.deleteTime=e.updatetime,n.push(e.qLibrary)}),e.directoryList=n,e._refreshStatus()}else e._message.create("error","获取数据失败");e.modal_loding=!1},this.handServiceError)},e.prototype.newFolder=function(){var e=this;this.modal_loding=!0;this.parentObj.level;this.directoryService.newFolder(this.parentId,this.userId,this.getNewName("folder")).then(function(t){null!=t&&200===t.code?(e._message.create("success","新建文件夹成功"),e.getDirectoryList()):e._message.create("error",t?"新建文件夹失败":t.msg),e.modal_loding=!1},this.handServiceError)},e.prototype.getNewName=function(e){var t,n;"folder"===e&&(t="新建文件夹"),"library"===e&&(t="新建题集"),n=t;for(var o=0;o<1e3;o++)if(0!==o&&(n=t+"("+o+")"),!1===this.checkName(n,e))return n;return t},e.prototype.checkName=function(e,t){for(var n=0,o=this.directoryList;n<o.length;n++){var i=o[n];if(i.type===t&&i.name===e)return!0}return!1},e.prototype.musicDelete=function(e){var t=this;"folder"===e.type?this.directoryService.batchDeleteFolder(this.userId,e.id).then(function(e){200===e.code?(t._message.create("success","删除成功"),t.getDirectoryList()):t._message.create("error","删除失败")}):"paper"===e.type&&this.directoryService.batchDeleteFile(this.parentId,e.id).then(function(e){200===e.code?(t._message.create("success","删除成功"),t.getDirectoryList()):t._message.create("error","删除失败")})},e.prototype.trueDelete=function(e){var t=this;"folder"===e.type?this.directoryService.pseudoDeleteFolder(this.userId,e.deleteId).then(function(e){200===e.code?(t._message.create("success","删除成功"),t.refresh()):t._message.create("error","删除失败")}):"paper"===e.type&&this.directoryService.pseudoDeleteFile(this.userId,e.deleteId).then(function(e){200===e.code?(t._message.create("success","删除成功"),t.refresh()):t._message.create("error","删除失败")})},e.prototype.batchDelete=function(){var e=this;0!==this._checkedNumber?this._modal.confirm({title:"删除",content:"确认要删除选中的这"+this._checkedNumber+"项?",showConfirmLoading:!0,onOk:function(){e.modal_loding=!0,e.directoryService.batchDelete(e.getSelectedId(),e.userId).then(function(t){null!=t&&1===t.code?(e._message.create("success","删除成功"),e.getDirectoryList(),e.getAllCount()):e._message.create("error","删除失败"),e.modal_loding=!1},e.handServiceError)},onCancel:function(){}}):this._message.create("warning","请先选择文件夹/试题集")},e.prototype.openQuestionList=function(e){this.parentId=e.id,this._library_add_question=e.id,e.zIndex=100-this.pathList.length,this.current_question_sidebar=!0,this.getQuestionsList(e.id),this.pathList.push(e)},e.prototype.openFolder=function(e){"recycle"!==this.current_sidebar&&(this.parentId=e.id,this.parentObj.list_selected="",e.list_selected="list-selected",this.parentObj=e,this.getDirectoryList(),e.zIndex=100-this.pathList.length,this.pathList.push(e))},e.prototype.clearRecycle=function(e){var t=this;this.directoryService.cleanRecycle(this.userId).then(function(e){200===e.code?(t._message.create("success","清空回收站成功"),t.refresh()):t._message.create("error","清空回收站失败")})},e.prototype._refreshStatus=function(){console.log("复选框刷新")},e.prototype._checkAll=function(e){e?this.directoryList.forEach(function(e){e.checked=!0}):this.directoryList.forEach(function(e){e.checked=!1}),this._refreshStatus()},e.prototype.getSelectedId=function(){for(var e=[],t=[],n=0,o=this.directoryList;n<o.length;n++){var i=o[n];i.checked&&("folder"===i.type?e.push(i.id):"paper"===i.type&&t.push(i.id))}return{childFolderIdList:e,childPaperIdList:t}},e.prototype.restoreFile=function(e){var t=this;this.directoryService.restoreFile(this.userId,e.deleteId).then(function(e){200===e.code?(t._message.create("success","还原成功"),t.refresh()):t._message.create("error","还原失败")})},e.prototype.restoreFolder=function(e){var t=this;this.directoryService.restoreFolder(this.userId,e.deleteId).then(function(e){200===e.code?(t._message.create("success","还原成功"),t.refresh()):t._message.create("error","还原失败")})},e.prototype.getSelectedQuestion=function(){return[]},e.prototype.move_handleOk=function(e){var t=this;this.modal_move=!1,e?(this.modal_loding=!0,this.directoryService.batchMove(this.getSelectedId(),e.id).then(function(e){1===e.code?(t._message.create("success",e.msg),t.getDirectoryList()):-1===e.code?(t._message.create("success","部分移动成功"),t.getDirectoryList()):t._message.create("error","移动失败"),t.modal_loding=!1},this.handServiceError)):this._message.create("warning","移动目标选择失败")},e.prototype.recoveryTo_handleOk=function(e){var t=this;this.modal_recycle=!1,null!==this.odal_recycle_directory?e?(this.modal_loding=!0,this.directoryService.recoveryTo(this.getSelectedId(),e.id,this.parentId).then(function(e){1===e.code?(t._message.create("success",e.msg),t.getQRecycleBinTree()):t._message.create("error",e.msg),t.modal_loding=!1},this.handServiceError)):this._message.create("warning","还原目标选择失败"):this._message.create("warning","操作异常")},e.prototype.library_add_handleOk=function(e){var t=this;if(this.library_add=!1,e){if(null===e.libraryName||""===e.libraryName)return void this._message.create("warning","请输入题集名称");this.modal_loding=!0,this.libraryService.librariesCreate(this.parentId,e.libraryName,e.remarks).then(function(e){null!=e&&1===e.code?(t._message.create("success","创建成功"),t.getDirectoryList()):t._message.create("error","创建失败"),t.modal_loding=!1})}else this._message.create("warning","移动目标选择失败")},e.prototype.library_upt_handleOk=function(e){var t=this;if(this.library_upt=!1,e){if(null===e.libraryName||""===e.libraryName)return void this._message.create("warning","请输入题集名称");this.modal_loding=!0,this.libraryService.update(e.id,e.libraryName,e.remarks).then(function(e){null!=e&&1===e.code?(t._message.create("success","题集信息修改成功"),t.getDirectoryList()):t._message.create("error","题集信息修改失败"),t.modal_loding=!1})}else this._message.create("warning","移动目标选择失败")},e.prototype.spread=function(e){e.up=!e.up},e.prototype._console=function(e){},e.prototype.questionDelete=function(){var e=[];this.getSelectedQuestion().forEach(function(t){e.push(t.id)}),0!==e.length?this._modal.confirm({title:"删除",content:"确认要删除选中的这"+this._checkedNumber+"项?",showConfirmLoading:!0,onOk:function(){},onCancel:function(){}}):this._message.create("warning","请先选择文件夹/试题集/题目")},o([r.ViewChild("fileList"),i("design:type",Object)],e.prototype,"fileList",void 0),e=o([r.Component({selector:"app-BDA-resources",template:n(858),styles:[n(859)]}),i("design:paramtypes",[s.ActivatedRoute,d.DirectoryPaperService,u.LibraryService,a.NzMessageService,a.NzModalService,l.Http,p.UserInfoService])],e)}();t.ResourcesComponent=m},443:function(e,t,n){"use strict";var o=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,s=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(r<3?i(s):r>3?i(t,n,s):i(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var r=n(2),s=n(56),a=n(6),l=n(12),c=function(){function e(e,t,n){var o=this;this.sectionService=e,this._message=t,this.fb=n,this._value=null,this._schoolData=[],this._sectionData=[],this._gradeData=[],this._classData=[],this._provinceData=[],this._citiesData=[],this._regionsData=[],this._bordered=!0,this._loading=!1,this._pagination=!0,this._header=!0,this._title=!0,this._footer=!0,this._fixHeader=!0,this._size="small",this._currentPage=1,this._schoolIsVisible=!1,this._sectionIsVisible=!1,this._gradeIsVisible=!1,this._classIsVisible=!1,this._schoolAdd=!0,this._sectionAdd=!0,this._gradeAdd=!0,this._classAdd=!0,this._currentSection={id:"",code:"",name:""},this._currentGrade={id:"",code:"",name:"",sectionId:"",sectionTitle:""},this._currentClassName={id:"",name:"",gradeId:"",schoolId:""},this._currentSchool={id:"",name:"",cityId:""},this.setCurrentSchool=function(e,t,n){o._currentSchool={id:e,name:t,cityId:n},o.validateForm.controls.schoolName.setValue(e)},this.cleanCurrentSchool=function(){o.validateForm.controls.cityId.setValue([]),o.validateForm.controls.schoolName.setValue(""),o._currentSchool={id:"",name:"",cityId:""}},this.setCurrentSection=function(e,t,n){o._currentSection.id=e,o._currentSection.code=t,o._currentSection.name=n,o.validateForm.controls.sectionInput.setValue(n)},this.cleanCurrentSection=function(){o.validateForm.controls.sectionInput.setValue(""),o._currentSection={id:"",code:"",name:""}},this.setCurrentGrade=function(e,t,n,i,r){o._currentGrade.id=e,o._currentGrade.code=t,o._currentGrade.name=n,o._currentGrade.sectionId=i,o._currentGrade.sectionTitle=r,o.validateForm.controls.grade.setValue(n),o.validateForm.controls.gradeSection.setValue(o._currentGrade.sectionId)},this.cleanCurrentGrade=function(){o.validateForm.controls.grade.setValue(""),o.validateForm.controls.gradeSection.setValue(""),o.validateForm.controls.start_year.setValue(""),o.validateForm.controls.end_year.setValue(""),o._currentGrade={id:"",code:"",name:"",sectionId:"",sectionTitle:""}},this.setCurrentClassName=function(e,t,n,i,r,s){o._currentClassName.id=e,o._currentClassName.name=t,o._currentClassName.gradeId=n,o.validateForm.controls.className.setValue(t),o.validateForm.controls.grade.setValue(n),o.validateForm.controls.grade_school.setValue(i),o.validateForm.controls.start_year.setValue(r),o.validateForm.controls.end_year.setValue(s)},this.cleanCurrentClassName=function(){o.validateForm.controls.className.setValue(""),o.validateForm.controls.grade.setValue(""),o._currentClassName={id:"",name:"",gradeId:"",schoolId:""}},this.submitForm=function(e,t){e.preventDefault(),o._schoolIsVisible&&(o.validateForm.controls.schoolName.markAsDirty(),o.validateForm.controls.cityId.markAsDirty(),o.validateForm.controls.schoolName.value&&o.validateForm.controls.cityId.value&&(o._schoolIsVisible=!1,o._schoolAdd?o.addSchool(o.validateForm.controls.cityId.value[1],o.validateForm.controls.schoolName.value,o.validateForm.controls.cityId.value[2]):o.reviseSchool(o._currentSchool.id,o.validateForm.controls.cityId.value[1],o.validateForm.controls.schoolName.value,o.validateForm.controls.cityId.value[2]))),o._sectionIsVisible&&(o.validateForm.controls.sectionInput.markAsDirty(),o.validateForm.controls.sectionInput.value&&o.validateForm.controls.sectionInput.dirty&&(o._sectionIsVisible=!1,o._sectionAdd?o.sectionAdd(o.validateForm.controls.sectionInput.value):o.sectionRevise(o._currentSection.id,o.validateForm.controls.sectionInput.value))),o._gradeIsVisible&&(o.validateForm.controls.grade.markAsDirty(),o.validateForm.controls.gradeSection.markAsDirty(),o.validateForm.controls.grade.value&&o.validateForm.controls.gradeSection.value&&(o._gradeIsVisible=!1,o._gradeAdd?o.addGrade(o.validateForm.controls.gradeSection.value,o.validateForm.controls.grade.value):o.reviseGrade(o._currentGrade.id,o.validateForm.controls.gradeSection.value,o.validateForm.controls.grade.value))),o._classIsVisible&&(o.validateForm.controls.grade.markAsDirty(),o.validateForm.controls.className.markAsDirty(),o.validateForm.controls.grade.value&&o.validateForm.controls.className.value&&(o._classIsVisible=!1,o._classAdd?o.addClass(o.validateForm.controls.grade.value,o.validateForm.controls.className.value,o.validateForm.controls.grade_school.value,o.validateForm.controls.start_year.value,o.validateForm.controls.end_year.value):o.reviseClass(o.validateForm.controls.grade.value,o._currentClassName.id,o.validateForm.controls.className.value,o.validateForm.controls.grade_school.value,o.validateForm.controls.start_year.value,o.validateForm.controls.end_year.value)))},this.sectionAdd=function(e){o._sectionIsVisible=!1,o.sectionService.addStudySection(e).subscribe(function(e){200===e.code?(o._message.success("新增学段成功"),o.queryAllSection(),o.cleanCurrentSection()):o._message.error(e.desc)},function(e){o._message.error("失败")})},this.cancel=function(){o._message.info("取消成功")},this.loadData=function(e){if(-1!==e.index){var t=e.option;t.loading=!0,0===e.index&&o.sectionService.getCities(e.option.value).subscribe(function(n){t.loading=!1,200===n.code?(o._citiesData=n.citys.map(function(e){return{value:e.id,label:e.name}}),e.resolve(o._citiesData)):o._message.error(n.desc)},function(e){o._message.error(e)}),1===e.index&&o.sectionService.getRegions(e.option.value).subscribe(function(n){t.loading=!1,200===n.code?(o._regionsData=n.regions.map(function(e){return{value:e.id,label:e.name,isLeaf:!0}}),e.resolve(o._regionsData)):o._message.error(n.desc)},function(e){console.error(e)})}else e.resolve(o._provinceData)},this.queryAllSchool=function(){o.sectionService.querySchool().subscribe(function(e){200===e.code?o._schoolData=e.school_list:o._message.error(e.desc)},function(e){console.error(e)})},this.addSchool=function(e,t,n){o.sectionService.addSchool(e,t,n).subscribe(function(e){200===e.code?(o._message.success("操作成功"),o.queryAllSchool()):o._message.error(e.desc)},function(e){console.error(e)})},this.reviseSchool=function(e,t,n,i){o.sectionService.reviseSchool(e,t,n,i).subscribe(function(e){200===e.code?(o._message.success("操作成功"),o.queryAllSchool()):o._message.error(e.desc)},function(e){console.error(e)})},this.deleteSchool=function(e){o.sectionService.deleteSchool(e).subscribe(function(e){200===e.code?(o._message.success("操作成功"),o.queryAllSchool()):o._message.error(e.desc)},function(e){console.error(e)})},this.sectionRevise=function(e,t){o.sectionService.reviseStudySection(e,t).subscribe(function(e){200===e.code?(o._message.success("修改学段成功"),o.queryAllSection(),o.cleanCurrentSection()):o._message.error(e.desc)},function(e){o._message.error("失败")})},this.sectionDelete=function(e){o.sectionService.deleteStudySection(e).subscribe(function(e){200===e.code?(o._message.success("删除学段成功"),o.queryAllSection(),o.cleanCurrentSection()):o._message.error(e.desc)},function(e){o._message.error("失败")})},this.querySection=function(e){o.sectionService.queryStudySection(e).subscribe(function(e){200===e.code?o._message.success("查询学段成功"):o._message.error(e.desc)},function(e){o._message.error("失败")})},this.queryAllSection=function(){o.sectionService.queryAllStudySection().subscribe(function(e){200===e.code?o._sectionData=e.learnStages||[]:o._message.error(e.desc)},function(e){o._message.error("获取学段失败")})},this.addGrade=function(e,t){o.sectionService.addGrade(e,t).subscribe(function(e){200===e.code?(o._message.success("添加年级成功"),o.queryGrade(),o.cleanCurrentGrade()):o._message.error(e.desc)},function(e){o._message.error("操作失败")})},this.reviseGrade=function(e,t,n){o.sectionService.reviseGrade(e,t,n).subscribe(function(e){200===e.code?(o._message.success("修改年级成功"),o.queryGrade(),o.cleanCurrentGrade()):o._message.error(e.desc)},function(e){o._message.error("操作失败")})},this.deleteGrade=function(e){o.sectionService.deleteGrade(e).subscribe(function(e){200===e.code?(o._message.success("删除年级成功"),o.queryGrade(),o.cleanCurrentGrade()):o._message.error(e.desc)},function(e){o._message.error("操作失败")})},this.queryGrade=function(e,t,n){o.sectionService.queryGrade(e||"",t||"",n||"").subscribe(function(e){200===e.code?o._gradeData=e.gradeList:o._message.error(e.desc)},function(e){o._message.error("操作失败")})},this.queryProvince=function(){o.sectionService.getProvince().subscribe(function(e){200===e.code?(console.dir(e),o._provinceData=e.provinces.map(function(e){return{value:e.id,label:e.name}})):o._message.error(e.desc)},function(e){console.error(e)})},this.addClass=function(e,t,n,i,r){o.sectionService.addClass(e,t,n,i,r).subscribe(function(e){200===e.code?(o._message.success("添加成功"),o.queryClass(),o.cleanCurrentClassName()):o._message.error(e.desc)},function(e){o._message.error(e)})},this.reviseClass=function(e,t,n,i,r,s){o.sectionService.reviseClass(e,t,n,i,r,s).subscribe(function(e){200===e.code?(o._message.success("修改成功"),o.queryClass(),o.cleanCurrentClassName()):o._message.error(e.desc)},function(e){o._message.error(e)})},this.deleteClass=function(e){o.sectionService.deleteClass(e).subscribe(function(e){200===e.code?(o._message.success("删除成功"),o.queryClass()):(o._message.error(e.desc),o.cleanCurrentClassName())},function(e){o._message.error(e)})},this.queryClass=function(e){o.sectionService.queryAllClass(e||1).subscribe(function(e){200===e.code?(o._classData=e.classList,1===o._currentPage&&(o._totalClasses=e.total)):o._message.error(e.desc)},function(e){o._message.error(e)})},this._pageChange=function(e){o._currentPage=e,o.queryClass(o._currentPage)}}return e.prototype.ngOnInit=function(){this.validateForm=this.fb.group({sectionInput:[null,[l.Validators.required]],grade:[null,[l.Validators.required]],gradeSection:[null,[l.Validators.required]],className:[null,[l.Validators.required]],schoolName:[null,[l.Validators.required]],cityId:[null,[l.Validators.required]],grade_school:[null,[l.Validators.required]],start_year:[null,[l.Validators.required]],end_year:[null,[l.Validators.required]]}),this.queryAllSchool(),this.queryAllSection(),this.queryGrade(),this.queryClass(),this.queryProvince()},e.prototype.getFormControl=function(e){return this.validateForm.controls[e]},e.prototype._console=function(e){console.log(e)},e=o([r.Component({selector:"app-studySection",template:n(860),styles:[n(861)]}),i("design:paramtypes",[s.StudySectionService,a.NzMessageService,l.FormBuilder])],e)}();t.StudySectionManagementComponent=c},444:function(e,t,n){"use strict";var o=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,s=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(r<3?i(s):r>3?i(t,n,s):i(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var r=n(2),s=n(12),a=n(68),l=n(6),c=n(56),d=n(13),u=function(){function e(e,t,n,o,i,r){var s=this;this.fb=e,this.ts=t,this._message=n,this.sss=o,this.route=i,this.activatedRoute=r,this.bookInfo={},this._options_selection=null,this._options_grade=null,this._text="未选择",this._value=null,this.onChange=function(e){s._file=e.srcElement.files[0],console.dir(s._file);var t=new FormData;t.append("file",s._file),s.ts.uploadImage(t).subscribe(function(e){200===e.code&&s.validateForm.controls.imgTfileId.setValue(e.file_id)},function(e){s._message.error(e["上传图片故障"])})},this.confirmationValidator=function(e){return e.value?e.value!==s.validateForm.controls.password.value?{confirm:!0,error:!0}:void 0:{required:!0}},this.onSelectionChange=function(e){s._text=e.map(function(e){return e.label}).join(", ")},this.loadData=function(e){if(-1!==e.index){var t=e.option;t.loading=!0,0===e.index&&s.sss.queryGrade("","",e.option.value).subscribe(function(n){t.loading=!1,200===n.code?(s._options_grade=s.leafFactory(n.gradeList),e.resolve(s._options_grade)):s._message.error(n.desc)},function(e){s._message.error(e)})}else e.resolve(s._options_selection)},this.optionsFactory=function(e){var t=[];return e.forEach(function(e){t.push({value:e.id,label:e.title,children:[]})}),t},this.leafFactory=function(e){var t=[];return e.forEach(function(e){t.push({isLeaf:!0,label:e.name,value:e.id})}),t}}return e.prototype._submitForm=function(){var e=this;for(var t in this.validateForm.controls)this.validateForm.controls[t]&&this.validateForm.controls[t].markAsDirty();if(this.validateForm.valid){for(var n in this.validateForm.value)this.validateForm.value[n]&&(this.bookInfo[n]=this.validateForm.value[n]);this.bookInfo=JSON.parse(JSON.stringify(this.bookInfo)),this.bookId?this.ts.updateTeachingMaterial(this.bookInfo,this.bookId).subscribe(function(t){200===t.code?(e._message.success("教材修改成功"),e.route.navigate(["baseDataAdministration/teachingMaterial/book/"+e.bookId])):e._message.error(t.desc)},function(t){e._message.error(t)}):this.ts.addTeachingMaterial(this.bookInfo).subscribe(function(t){200===t.code?(e._message.success("教材创建成功"),e.route.navigate(["baseDataAdministration/teachingMaterial/book/"+t.book.id])):e._message.error(t.desc)},function(t){e._message.error(t)})}},e.prototype.getCaptcha=function(e){e.preventDefault()},e.prototype._console=function(e){e.length>1&&this.validateForm.controls.gradeId.setValue(e[1])},e.prototype.ngOnInit=function(){var e=this;this.bookId=this.activatedRoute.snapshot.paramMap.get("id"),this.bookId,this.ts.getVersion().subscribe(function(t){if(200===t.code)for(var n in e._versions=new Array,t.versions)t.versions[n]&&e._versions.push({label:n,value:t.versions[n]});else e._message.error(t.desc)},function(t){e._message.error(t)}),this.sss.queryAllStudySection().subscribe(function(t){200===t.code?t.learnStages&&(e._options_selection=e.optionsFactory(t.learnStages)):e._message.error(t.desc)},function(t){e._message.error(t)}),this.validateForm=this.fb.group({title:[null,[s.Validators.required]],intro:[null,[s.Validators.required]],isbn:[null,[s.Validators.required]],publishHouse:[null,[s.Validators.required]],imgTfileId:[null],gradeId:[null],version:[null,[s.Validators.required]]})},e.prototype.getFormControl=function(e){return this.validateForm.controls[e]},e=o([r.Component({selector:"app-classAdd",template:n(862),styles:[n(863)]}),i("design:paramtypes",[s.FormBuilder,a.TeachingMaterialService,l.NzMessageService,c.StudySectionService,d.Router,d.ActivatedRoute])],e)}();t.AddClassComponent=u},445:function(e,t,n){"use strict";var o=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,s=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(r<3?i(s):r>3?i(t,n,s):i(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var r=n(2),s=n(13),a=n(68),l=n(6),c=n(12),d=n(864),u=function(){function e(e,t,n,o){var i=this;this.acRoute=e,this.tms=t,this._message=n,this.fb=o,this.teachFormData=d.TeachFormData,this.templateAdd=!1,this.templateRevise=!1,this.chapterOperation=function(e){switch(console.log(e),e.type){case"add":i.currentChapterId=e.id,i.templateAdd=!0;break;case"delete":i._deleteChapter(e.id);break;case"revise":i.currentChapterId=e.id,i.templateRevise=!0}},this.queryAllCapters=function(){i.tms.queryAllChapters(i.bookId).subscribe(function(e){200===e.code?(i._message.success("信息请求成功"),i.chapters=e.chapters):i._message.error(e.desc)},function(e){console.error(e)})},this._addChapter=function(e,t,n){i.tms.addChapter({bookId:i.bookId,title:e,orderBy:0,teachForm:t,parentId:n||""}).subscribe(function(e){i.templateAdd=!1,200===e.code?(i._message.success("操作成功"),i.queryAllCapters()):i._message.error(e.desc)},function(e){console.error(e)})},this._deleteChapter=function(e){i.tms.deleteChapter(e).subscribe(function(e){200===e.code?(i._message.success("删除成功"),i.queryAllCapters()):i._message.error(e.desc)},function(e){console.error(e)})},this._reviseChapter=function(e,t){i.tms.reviseChapter(e,t).subscribe(function(e){i.templateRevise=!1,200===e.code?(i._message.success("删除成功"),i.queryAllCapters()):i._message.error(e.desc)},function(e){console.error(e)})},this.submitForm=function(e,t){e.preventDefault(),console.log(t),i.templateAdd&&(i.validateForm.controls.teachForm.markAsDirty(),i.validateForm.controls.title.markAsDirty(),t.teachForm&&t.title&&i._addChapter(t.title,t.teachForm,i.currentChapterId||"")),i.templateRevise&&(i.reviseForm.controls.rf_title.markAsDirty(),t.rf_title&&i._reviseChapter(i.currentChapterId,t.rf_title))},this.getFormControl=function(e){return i.validateForm.controls[e]||i.reviseForm.controls[e]}}return e.prototype.ngOnInit=function(){this.bookId=this.acRoute.snapshot.paramMap.get("id"),this.validateForm=this.fb.group({title:[null,c.Validators.required],teachForm:[null,c.Validators.required]}),this.reviseForm=this.fb.group({rf_title:[null,c.Validators.required]}),this.queryAllCapters(),console.log()},e=o([r.Component({selector:"app-material-book",template:n(865),styles:[n(866)]}),i("design:paramtypes",[s.ActivatedRoute,a.TeachingMaterialService,l.NzMessageService,c.FormBuilder])],e)}();t.BookComponent=u},446:function(e,t,n){"use strict";var o=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,s=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(r<3?i(s):r>3?i(t,n,s):i(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s};Object.defineProperty(t,"__esModule",{value:!0});var i=n(2),r=n(447),s=n(448),a=n(118),l=n(12),c=n(6),d=n(13),u=n(877),p=n(449),m=n(34),h=n(884),f=n(100),g=n(450),v=n(451),y=n(886),b=n(887),z=function(){function e(){}return e=o([i.NgModule({imports:[a.DdCommonModule,m.CommonModule,l.FormsModule,l.ReactiveFormsModule,c.NgZorroAntdModule.forRoot(),d.RouterModule.forChild(u.TestRoute)],declarations:[r.PaperComponent,v.PaperQuestionComponent,h.PapersAddComponent,g.PaperManagerComponent,s.TestComponent,p.ExaminationComponent,y.ExamTypePipe,b.QuestionTypePipe,y.ExamPaperTypePipe],providers:[f.TestService],exports:[d.RouterModule]})],e)}();t.TestModule=z},447:function(e,t,n){"use strict";var o=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,s=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(r<3?i(s):r>3?i(t,n,s):i(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var r=n(2),s=n(100),a=n(13),l=n(6),c=n(11),d=n(12),u=function(){function e(e,t,n,o,i,r){var s=this;this.ts=e,this.route=t,this.router=n,this._message=o,this.uis=i,this.fb=r,this.directoryList=[],this.modal_loding=!1,this.papers_add=!1,this.papers_type="handle",this.examType="ACT",this.paperList=[],this.isBaseVisible=!1,this.paper_bind_model=!1,this.getTestDetail=function(){s.ts.queryTestById(s.testId).subscribe(function(e){200===e.code&&(s.gradeId=e.exam.grade,s.examInfo=e.exam)},function(e){console.error(e)})},this.click_search=function(e){},this.click_a=function(e){switch(e){case"paperAdd":s.papers_add=!0}},this.click_d=function(){},this.click_all=function(e){},this.click_li=function(e){},this.handleCancel=function(){s.paper_bind_model=!1,s.validateFormInit()},this.handleOk=function(){s.submitForm()},this.papers_add_handleCancel=function(e){console.log(e),s.papers_add=!1},this.papers_add_handleOk=function(e){console.log(e),e.grade=s.gradeId,"handle"===s.papers_type?s.ts.handleSetPaper(e).mergeMap(function(e){if(200===e.code)return s.ts.bindPaper({examId:s.testId,examPaperId:e.examPaperId});s._message.error(e.desc)}).subscribe(function(e){200===e.code?(s._message.success("增加试卷成功"),s.getTestPapers(),s.papers_add=!1):s._message.error(e.desc)},function(e){console.error(e)}):(e.examId=s.testId,"ACT"===e.examPaperType?(delete e.singleNum,delete e.multiNum,delete e.shortNum,s.ts.automaticSetPaperAct(e).subscribe(function(e){200===e.code?(s._message.success("增加试卷成功"),s.getTestPapers(),s.papers_add=!1):s._message.error(e.desc)},function(e){console.error(e)})):(delete e.singNum,delete e.behindBackSingNum,delete e.behindBackPerformanceNum,delete e.performanceNum,delete e.sightSingingNum,s.ts.automaticSetPaperMusicAbility(e).subscribe(function(e){200===e.code?(s._message.success("增加试卷成功"),s.getTestPapers(),s.papers_add=!1):s._message.error(e.desc)},function(e){console.error(e)})))},this.getTestPapers=function(){s.ts.queryPaperById(s.testId).subscribe(function(e){200===e.code?s.directoryList=e.exams:s._message.error(e.desc)},function(e){console.error(e)})},this.queryAllPapers=function(){s.ts.queryPaperByUserId(s.uis.getUserInfo().userId).subscribe(function(e){200===e.code?s.paperList=e.exam_papers:s._message.error(e.desc)},function(e){console.error(e)})},this.submitForm=function(){for(var e in s.validateForm.controls)s.validateForm.controls[e].markAsDirty();s.validateForm.valid&&s.ts.bindPaper(s.validateForm.value).subscribe(function(e){200===e.code?(s._message.success("操作成功"),s.getTestPapers(),s.validateFormInit(),s.paper_bind_model=!1):s._message.error(e.desc)},function(e){console.error(e)})},this.deletePaper=function(e){s.ts.deletePaper(e,s.testId).subscribe(function(e){200===e.code?(s._message.success("操作成功"),s.getTestPapers()):s._message.error(e.desc)},function(e){console.error(e)})},this.setForm=function(e,t,n){s.validateBaseForm.controls.id.setValue(e),s.validateBaseForm.controls.title.setValue(t),s.validateBaseForm.controls.score.setValue(n)},this.doubleClick=function(e,t){s.router.navigate(["test/testPaper/"+s.testId+"/question"],{queryParams:{id:e,type:t}})},this.validateFormInit=function(){s.validateForm=s.fb.group({examPaperId:["",d.Validators.required],examId:[s.testId]})},this.validateBaseFormInit=function(){s.validateBaseForm=s.fb.group({id:[""],title:["",[d.Validators.required]],score:["",[d.Validators.required]]})},this.updatePaper=function(){for(var e in s.validateBaseForm.controls)s.validateBaseForm.controls[e]&&s.validateBaseForm.controls[e].markAsDirty();s.validateBaseForm.valid&&s.ts.updatePaperBaseInfo(s.validateBaseForm.value).subscribe(function(e){200===e.code?(s._message.success("操作成功"),s.isBaseVisible=!1,s.getTestPapers()):s._message.error(e.desc)},function(e){console.error(e)})}}return e.prototype.ngOnInit=function(){this.testId=this.route.snapshot.paramMap.get("id"),this.getTestDetail(),this.getTestPapers(),this.queryAllPapers(),this.validateBaseFormInit(),this.validateForm=this.fb.group({examPaperId:["",d.Validators.required],examId:[this.testId]})},e.prototype.getFormControl=function(e){return this.validateForm.controls[e]},e.prototype.getBaseFormControl=function(e){return this.validateBaseForm.controls[e]},e=o([r.Component({selector:"app-paper",template:n(873),styles:[n(874)]}),i("design:paramtypes",[s.TestService,a.ActivatedRoute,a.Router,l.NzMessageService,c.UserInfoService,d.FormBuilder])],e)}();t.PaperComponent=u},448:function(e,t,n){"use strict";var o=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,s=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(r<3?i(s):r>3?i(t,n,s):i(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s};Object.defineProperty(t,"__esModule",{value:!0});var i=n(2),r=function(){function e(){}return e=o([i.Component({selector:"app-test",template:n(875),styles:[n(876)]})],e)}();t.TestComponent=r},449:function(e,t,n){"use strict";var o=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,s=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(r<3?i(s):r>3?i(t,n,s):i(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var r=n(2),s=n(12),a=n(100),l=n(6),c=n(11),d=n(13),u=n(56),p=n(67),m=function(){function e(e,t,n,o,i,r,s){var a=this;this.fb=e,this.ts=t,this._message=n,this.uis=o,this.router=i,this.sss=r,this.cs=s,this.modal_loding=!1,this.listData=[],this._current=1,this._pagesize=99999999999,this.bindClassId="",this.selectTestId="",this.gradeList=[],this.classList=[],this.currentGradeClassList=[],this.currentChapterList=[],this.classSTH=null,this.class_bind_model=!1,this.examination_add=!1,this.examTypes=[{label:"单元测试",value:"CHAPTER_TEST"},{label:"期中测试",value:"MIDDLE_TERM_TEST"},{label:"期末测试",value:"FINAL_TERM_TEST"},{label:"其它测试",value:"OTHER"}],this.batchDelete=function(){},this._displayDataChange=function(){},this.pageChangeClick=function(){},this.submitForm=function(){for(var e in a.validateForm.controls)a.validateForm.controls[e]&&a.validateForm.controls[e].markAsDirty();a.validateForm.valid&&a.ts.createTest(a.validateForm.value).subscribe(function(e){200===e.code?(a._message.success("创建考试成功"),a.examination_add=!1,a.router.navigate(["./test/testPaper",e.exam_id])):a._message.error(e.desc)},function(e){console.error(e)})},this.queryAllClassList=function(){a.cs.getCreatedOrAttendedClasses(a.userId).subscribe(function(e){200===e.code?a.classList=e.rooms:a._message.error(e.desc)},function(e){console.error(e)})},this.queryAllTestList=function(){a.ts.queryAllTest().subscribe(function(e){200===e.code?a.listData=e.exams:a._message.error(e.desc)},function(e){console.error(e)})},this.editExamPaper=function(e){a.router.navigate(["./test/testPaper",e])},this.validExam=function(e){a.ts.validateTest(e).subscribe(function(e){200===e.code?(a._message.success("操作成功"),a.queryAllTestList()):a._message.error(e.desc)},function(e){console.error(e)})},this.invalidExam=function(e){a.ts.dismissTest(e).subscribe(function(e){200===e.code?(a._message.success("操作成功"),a.queryAllTestList()):a._message.error(e.desc)},function(e){console.error(e)})},this.deleteExam=function(e){a.ts.deleteTest(e).subscribe(function(e){200===e.code?(a._message.success("操作成功"),a.queryAllTestList()):a._message.error(e.desc)},function(e){console.error(e)})},this.bindClass=function(){a.class_bind_model=!0,a.bindClassId?a.ts.bindClass({examId:a.selectTestId,classroomId:a.bindClassId}).subscribe(function(e){200===e.code?a._message.success("操作成功"):a._message.error(e.desc)},function(e){console.error(e)}):a._message.error("请选择绑定班级")},this.loadData=function(e){if(-1!==e.index){var t=e.option;switch(t.loading=!0,a.validateForm.value.examType){case"CHAPTER_TEST":if(0===e.index&&(a.updateCurrentGradeClassList(t.label,!1),t.loading=!1,e.resolve(a.currentGradeClassList)),1===e.index&&(t.loading=!1,a.updateCurrentChapterList(t.value),e.resolve(a.currentChapterList)),2===e.index)return;break;case"OTHER":if(0===e.index&&(a.updateCurrentGradeClassList(t.label,!0),a.currentGradeClassList.forEach(function(e){e.isLeaf=!0}),t.loading=!1,e.resolve(a.currentGradeClassList)),1===e.index)return;break;default:if(0===e.index)return;if(1===e.index)return}}else e.resolve(a.gradeList)},this._select=function(e){switch(e.index){case 0:a.classSTH=[],a.classSTH.push(e.option.value),a.validateForm.controls.grade.setValue(e.option.value);break;case 1:a.classSTH.splice(1,2),a.classSTH.push(e.option.value),a.validateForm.controls.classroomId.setValue(e.option.value);break;case 2:a.classSTH.splice(2,1),a.validateForm.controls.chapterId.setValue(e.option.value),a.classSTH.push(e.option.value)}},this.examTypeChange=function(e){switch(a.currentChapterList=[],a.currentGradeClassList=[],a.classSTH=[],e){case"CHAPTER_TEST":case"OTHER":a.gradeList.forEach(function(e){e.isLeaf=!1});break;default:a.gradeList.forEach(function(e){e.isLeaf=!0})}},this.updateCurrentGradeClassList=function(e,t){a.currentGradeClassList=[],a.classList.forEach(function(t){t.label=t.title,t.value=t.id,t.grade===e&&a.currentGradeClassList.push(t)})},this.updateCurrentChapterList=function(e){a.currentChapterList=[],a.currentGradeClassList.forEach(function(t){t.id===e&&(a.currentChapterList=t.chapters,a.currentChapterList.forEach(function(e){e.value=e.cid,e.label=e.ctitle,e.isLeaf=!0}))})},this._console=function(e){console.log(e)}}return e.prototype.getFormControl=function(e){return this.validateForm.controls[e]},e.prototype.ngOnInit=function(){var e=this;this.userId=this.uis.getUserInfo().userId,this.queryAllClassList(),this.validateForm=this.fb.group({title:["",[s.Validators.required]],intro:["",[s.Validators.required]],producerName:[this.uis.getUserInfo().userName||"nameIsNull"],producerId:[this.userId],grade:["",[s.Validators.required]],examStatus:["VALID"],examType:["",[s.Validators.required]],chapterId:[""],classroomId:[""]}),this.queryAllTestList(),this.sss.queryGrade().subscribe(function(t){200===t.code?(e.gradeList=t.gradeList,e.gradeList.forEach(function(e){e.value=e.code,e.label=e.name})):e._message.error(t.desc)},function(e){console.error(e)})},e=o([r.Component({selector:"app-examination",template:n(878),styles:[n(879)]}),i("design:paramtypes",[s.FormBuilder,a.TestService,l.NzMessageService,c.UserInfoService,d.Router,u.StudySectionService,p.ClassesService])],e)}();t.ExaminationComponent=m},450:function(e,t,n){"use strict";var o=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,s=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(r<3?i(s):r>3?i(t,n,s):i(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var r=n(2),s=n(100),a=n(13),l=n(6),c=n(11),d=n(12),u=n(56),p=function(){function e(e,t,n,o,i,r){var s=this;this.ts=e,this._message=t,this.uis=n,this.fb=o,this.sss=i,this.router=r,this.directoryList=[],this.modal_loding=!1,this.papers_add=!1,this.papers_type="handle",this.examType="ACT",this.isLoading=!1,this.isVisible=!1,this.gradeList=[],this.click_search=function(e){},this.click_a=function(e){switch(e){case"paperAdd":s.papers_add=!0}},this.click_d=function(){},this.click_all=function(e){},this.click_li=function(e){},this.papers_add_handleCancel=function(e){console.log(e),s.papers_add=!1},this.papers_add_handleOk=function(e){console.log(e),"handle"===s.papers_type?s.ts.handleSetPaper(e).subscribe(function(e){200===e.code?(s._message.success("增加试卷成功"),s.getTestPapers(),s.papers_add=!1):s._message.error(e.desc)},function(e){console.error(e)}):"ACT"===e.examPaperType?s.ts.automaticSetPaperAct(e).subscribe(function(e){200===e.code?(s._message.success("增加试卷成功"),s.getTestPapers(),s.papers_add=!1):s._message.error(e.desc)},function(e){console.error(e)}):s.ts.automaticSetPaperMusicAbility(e).subscribe(function(e){200===e.code?(s._message.success("增加试卷成功"),s.getTestPapers(),s.papers_add=!1):s._message.error(e.desc)},function(e){console.error(e)})},this.navigateTo=function(e,t){s.router.navigate(["test/paperManager/question"],{queryParams:{id:e,type:t}})},this.getTestPapers=function(){s.ts.queryPaperByUserId(s.userId).subscribe(function(e){200===e.code?s.directoryList=e.exam_papers:s._message.error(e.desc)},function(e){console.error(e)})},this.getGradeList=function(){s.sss.queryGrade().subscribe(function(e){200===e.code?s.gradeList=e.gradeList:console.error(e.desc)},function(e){console.error(e)})},this.updatePaper=function(){for(var e in s.validateForm.controls)s.validateForm.controls[e]&&s.validateForm.controls[e].markAsDirty();s.validateForm.valid&&(s.isLoading=!0,s.ts.updatePaperBaseInfo(s.validateForm.value).subscribe(function(e){200===e.code?(s._message.success("操作成功"),s.isVisible=!1,s.isLoading=!1,s.getTestPapers()):s._message.error(e.desc)},function(e){console.error(e)}))},this.setForm=function(e,t,n,o){s.validateForm.controls.id.setValue(e),s.validateForm.controls.title.setValue(t),s.validateForm.controls.score.setValue(n)},this.validateFormInit=function(){s.validateForm=s.fb.group({id:[""],title:["",[d.Validators.required]],score:["",[d.Validators.required]]})},this.getFormControl=function(e){return s.validateForm.controls[e]}}return e.prototype.ngOnInit=function(){this.userId=this.uis.getUserInfo().userId,this.getTestPapers(),this.validateFormInit()},e=o([r.Component({selector:"app-paper-manager",template:n(880),styles:[n(881)]}),i("design:paramtypes",[s.TestService,l.NzMessageService,c.UserInfoService,d.FormBuilder,u.StudySectionService,a.Router])],e)}();t.PaperManagerComponent=p},451:function(e,t,n){"use strict";var o=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,s=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(r<3?i(s):r>3?i(t,n,s):i(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var r=n(2),s=n(100),a=n(69),l=n(13),c=n(6),d=n(56),u=function(){function e(e,t,n,o,i){var r=this;this.ts=e,this.chs=t,this.router=n,this._message=o,this.sss=i,this.modal_loding=!1,this.paperQuestionList=[],this.gradeList=[],this.selectedGradeCode="",this.selectedKnowledge="",this.currentGradeCode="",this.currentDifficultyLow=0,this.currentDifficultyHigh=1,this._allChecked=!1,this._indeterminate=!1,this.questionList=[],this.question_bind_model=!1,this.allQuestionListIndex=1,this.selectedQuestionIds=[],this.question_score_model=!1,this.getGradeList=function(){r.sss.queryGrade().subscribe(function(e){200===e.code?(r.gradeList=e.gradeList,r.gradeList.forEach(function(e){e.id===r.paperInfo.grade&&(r.currentGradeCode=e.code)})):console.error(e.desc)},function(e){console.error(e)})},this.getAllQuestion=function(){r.ts.queryAllQuestionsFromPaper(r.paperId).subscribe(function(e){200===e.code?(e.questions&&(r.paperQuestionList=e.questions),r.paperInfo=e.examPaper,r.currentGradeCode=r.paperInfo.grade,r.currentTotalScore=0,r.paperQuestionList.forEach(function(e){r.currentTotalScore+=e.score}),r.getAllQuestionBankQuestion()):r._message.error(e.desc)},function(e){console.error(e)})},this.getAllQuestionBankQuestion=function(){r.chs.queryQuestionListByCondition({page_num:r.allQuestionListIndex,knowledges:r.selectedKnowledge,difficulty_low:r.currentDifficultyLow,difficulty_high:r.currentDifficultyHigh,grade_code:r.currentGradeCode,subject_type:"MUSIC_ABILITY"===r.paperType?"THEORY":r.paperType}).subscribe(function(e){200===e.code?e.questions&&(e.questions.forEach(function(e){e.checked=!1}),r.questionList=e.questions,r.allQuestionTotal=e.total):r._message.error(e.desc)},function(e){console.error(e)})},this.paperBindQuestion=function(){r.selectedQuestionIds=[],r.questionList.forEach(function(e){e.checked&&r.selectedQuestionIds.push(e.question_id)}),r.selectedQuestionIds.length+r.paperQuestionList.length>r.paperInfo.questionNum?r._message.error("试题总数不得大于"+r.paperInfo.questionNum+"!"):r.selectedQuestionIds.length&&r.ts.addQuestion({id:r.paperId,questionIds:r.selectedQuestionIds}).subscribe(function(e){200===e.code?(r.question_bind_model=!1,r._message.success("操作成功"),r.getAllQuestion()):r._message.error(e.desc)},function(e){console.error(e)})},this.questionSetScore=function(){if(r.currentQuestionId){var e=0;if(r.paperQuestionList.forEach(function(t){e+=t.score}),e+r.questionScore>r.paperInfo.score)return void r._message.error("总分不得大于"+r.paperInfo.score);r.ts.setQuestionScore({questionId:r.currentQuestionId,score:r.questionScore,id:r.paperId}).subscribe(function(e){200===e.code?(r.question_score_model=!1,r._message.success("操作成功"),r.getAllQuestion(),r.formReset()):r._message.error(e.desc)},function(e){console.error(e)})}},this.deleteQuestion=function(e){e&&r.ts.deleteQuestionFromPaper({id:r.paperId,questionId:e}).subscribe(function(e){200===e.code?(r.question_score_model=!1,r._message.success("操作成功"),r.getAllQuestion(),r.formReset()):r._message.error(e.desc)},function(e){console.error(e)})},this.formReset=function(){r.questionScore=0,r.allQuestionListIndex=1,r.getTopKnowledge()},this.getTopKnowledge=function(){r.ts.getTopKonwledge().subscribe(function(e){200===e.code?(r.topKnowledgeList=e.top,r.topKnowledgeList.forEach(function(e){e.label=e.title,e.value=e.no,e.checked=!1})):r._message.error(e.desc)},function(e){console.error(e)})},this._displayDataChange=function(e){r._message.success("数据变化"),console.log(e)},this._refreshStatus=function(){var e=r.questionList.every(function(e){return e.checked}),t=r.questionList.every(function(e){return!e.checked});r._allChecked=e,r._indeterminate=!e&&!t},this.knowledgeDataConfig=function(){var e=[];r.topKnowledgeList.forEach(function(t){t.checked&&e.push(t.value)}),r.selectedKnowledge=e.join(",")},this.reGetAllQuestionBankQuestion=function(){r.allQuestionListIndex=1,r.knowledgeDataConfig(),r.getAllQuestionBankQuestion()},this.console=function(e){console.log(e)},this.confirm=function(e){return window.confirm(e||"确定离开当前页面吗？")}}return e.prototype.ngOnInit=function(){var e=this;this.router.queryParams.subscribe(function(t){e.paperId=t.id,e.paperType=t.type}),this.getAllQuestion(),this.getTopKnowledge(),this.getGradeList()},e.prototype._checkAll=function(e){e?this.questionList.forEach(function(e){e.checked=!0}):this.questionList.forEach(function(e){return e.checked=!1}),this._refreshStatus()},e.prototype.canDeactivate=function(){return this.currentTotalScore===this.paperInfo.score||this.confirm("确定要离开当前页面吗？\n当前试卷总分为"+this.currentTotalScore+",小于试卷总分"+this.paperInfo.score)},e=o([r.Component({selector:"app-paper-question",template:n(882),styles:[n(883)]}),i("design:paramtypes",[s.TestService,a.ClassHomeworkService,l.ActivatedRoute,c.NzMessageService,d.StudySectionService])],e)}();t.PaperQuestionComponent=u},452:function(e,t,n){"use strict";var o=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,s=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(r<3?i(s):r>3?i(t,n,s):i(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var r=n(2),s=n(888),a=n(453),l=n(893),c=n(13),d=n(896),u=n(34),p=n(6),m=n(909),h=n(454),f=n(912),g=n(1215),v=n(77),y=n(455),b=n(457),z=n(1219),_=n(1222),I=n(1225),C=n(1228),S=n(1231),w=n(1234),k=n(456),T=n(458),x=n(1237),O=n(12),P=n(1240),F=n(1243),R=n(1244),A=n(1245),j=function(){function e(){}return e=o([r.NgModule({imports:[O.ReactiveFormsModule,c.RouterModule.forChild(d.TestAnalysisRoute),p.NgZorroAntdModule.forRoot(),u.CommonModule,f.NgxEchartsModule,O.FormsModule],declarations:[T.QuestionBookComponent,y.ClassAbilityComponent,b.StudentAbilityComponent,z.NlwdChartsComponent,_.SyzsChartsComponent,I.ZsfxChartsComponent,z.NlwdChartsComponent,x.YlzwChartsComponent,P.YyzsCompareChartsComponent,k.AbilityDetailComponent,C.AbilityCardComponent,S.ClassQuestionComponent,w.StudentQuestionComponent,s.CourseHomeworkComponent,m.CourseExciseComponent,h.TestIndexComponent,a.TestAnalysisComponent,s.CourseHomeworkComponent,l.AnalysisComponent,g.QuestionDetailComponent,F.QuestionChoicePipe,R.AbilityTypePipe,A.KnowledgeTypePipe],exports:[],providers:[v.TestAnalysisService]}),i("design:paramtypes",[])],e)}();t.TestAnalysisModule=j},453:function(e,t,n){"use strict";var o=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,s=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(r<3?i(s):r>3?i(t,n,s):i(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var r=n(2),s=n(11),a=function(){function e(e){this.uis=e}return e.prototype.ngOnInit=function(){this.isTeacher=this.uis.getUserInfo().is_teacher},e=o([r.Component({selector:"app-test-analysis",template:n(891),styles:[n(892)]}),i("design:paramtypes",[s.UserInfoService])],e)}();t.TestAnalysisComponent=a},454:function(e,t,n){"use strict";var o=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,s=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(r<3?i(s):r>3?i(t,n,s):i(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var r=n(2),s=n(77),a=n(11),l=n(6),c=n(13),d=function(){function e(e,t,n,o){this.tas=e,this.uis=t,this._message=n,this.router=o}return e.prototype.ngOnInit=function(){this.userId=this.uis.getUserInfo().userId,this.uis.getUserInfo().is_teacher||this.router.navigate(["analysis/ability"])},e=o([r.Component({selector:"app-test-index",template:n(897),styles:[n(898)]}),i("design:paramtypes",[s.TestAnalysisService,a.UserInfoService,l.NzMessageService,c.Router])],e)}();t.TestIndexComponent=d},455:function(e,t,n){"use strict";var o=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,s=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(r<3?i(s):r>3?i(t,n,s):i(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var r=n(2),s=n(11),a=n(77),l=n(6),c=function(){function e(e,t,n){var o=this;this.uis=e,this.tas=t,this._message=n,this.currentIndex=0,this.cardType="class",this.isCompare=!1,this.getGradeList=function(){o.tas.teacherGetGrades(o.userId).mergeMap(function(e){return o.gradeList=e.grades,o.currentGradeId=o.gradeList[0].id,o.tas.teacherGetGradeClass(o.userId,o.currentGradeId)}).subscribe(function(e){200===e.code?(o.classList=e.classes,o.currentClassId=o.classList[0].id,o.classChange()):o._message.error(e.desc)},function(e){console.error(e)})},this.getClassList=function(){o.tas.teacherGetGradeClass(o.userId,o.currentGradeId).subscribe(function(e){200===e.code?(o.classList=e.classes,o.currentClassId=o.classList[0].id,o.classChange()):o._message.error(e.desc)},function(e){console.error(e)})},this.classChange=function(){o.getAnalysisTimeData(),o.getAnalysisData(),o.getKnowledgeData(),o.getKnowledgeAnalysisData()},this.getAnalysisTimeData=function(){o.tas.getClassMusicAbilityDegree([o.currentClassId]).subscribe(function(e){200===e.code?o.abilityTimeData=e.result[o.currentClassId]:o._message.error(e.desc)},function(e){console.error(e)})},this.getAnalysisData=function(){o.tas.getClassesMusicKnowledge([o.currentClassId]).subscribe(function(e){200===e.code?o.knowledgeData=e.result[o.currentClassId]:o._message.error(e.desc)},function(e){console.error(e)})},this.getKnowledgeData=function(){o.tas.getClassesAbility([o.currentClassId]).subscribe(function(e){200===e.code?o.abilityData=e.result[o.currentClassId]:o._message.error(e.desc)},function(e){console.error(e)})},this.getKnowledgeAnalysisData=function(){o.tas.teacherGetClassKnowledgeData(o.currentClassId,o.currentGradeId,o.schoolId).subscribe(function(e){200===e.code?o.knowledgeAnalysisData=e.knowledge_details:o._message.error(e.desc)},function(e){console.error(e)})}}return e.prototype.ngOnInit=function(){this.isTeacher=this.uis.getUserInfo().is_teacher,this.userId=this.uis.getUserInfo().userId,this.characterInfo=this.uis.getUserCharacterInfo(),this.characterInfo&&(this.schoolId=this.characterInfo[0].schoolId),this.getGradeList()},e=o([r.Component({selector:"app-class-ability",template:n(899),styles:[n(900)]}),i("design:paramtypes",[s.UserInfoService,a.TestAnalysisService,l.NzMessageService])],e)}();t.ClassAbilityComponent=c},456:function(e,t,n){"use strict";var o=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,s=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(r<3?i(s):r>3?i(t,n,s):i(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var r=n(2),s=n(13),a=n(901),l=n(77),c=n(6),d=n(11),u=function(){function e(e,t,n,o){var i=this;this.activatedRoute=e,this.tas=t,this._message=n,this.uis=o,this.sourceList=a.dataSourceList,this.currentSourceType=this.sourceList[0].value,this.questionList=[],this.abilityType=!1,this.secondKnowledgeList=[],this.secondAbilityList=[],this._knowledge={yy1:"记谱法",yy2:"音高、音程、和弦",yy3:"节奏与节拍",yy4:"旋律",yy5:"调式",yy6:"曲式",yy7:"和声",yy8:"配器",yy9:"音乐文化"},this.refreshQuestion=function(){i.classId?i.abilityOrKnowledgeType in i._knowledge?(i.abilityType=!0,i.classGetKnowledgeQuestions()):i.classGetAbilityQuestions():i.abilityOrKnowledgeType in i._knowledge?(i.abilityType=!0,i.studentGetKnowledgeQuestions()):i.studentGetAbilityQuestions()},this.dataInit=function(){i.classId?i.abilityOrKnowledgeType in i._knowledge?(i.classGetKnowledgeQuestions(),i.classSubKnowledge()):(i.classGetAbilityQuestions(),i.classSubAbility()):i.abilityOrKnowledgeType in i._knowledge?(i.studentGetKnowledgeQuestions(),i.studentSubKnowledge()):(i.studentGetAbilityQuestions(),i.studentSubAbility())},this.studentGetKnowledgeQuestions=function(){i.tas.getQuestionsByStudentIdSourceSubKnowledge(i.studentId,i.currentSourceType,i.currentSecondKnowledge||i.abilityOrKnowledgeType).subscribe(function(e){200===e.code?i.questionList=e.questions:i._message.error(e.desc)},function(e){console.error(e)})},this.studentGetAbilityQuestions=function(){i.tas.getQuestionsByStudentIdSourceSubAbility(i.studentId,i.currentSourceType,i.currentSecondAbility||i.abilityOrKnowledgeType).subscribe(function(e){200===e.code?i.questionList=e.questions:i._message.error(e.desc)},function(e){console.error(e)})},this.studentSubKnowledge=function(){i.tas.getDataOfStudentSubMusicKnowledge(i.studentId,i.abilityOrKnowledgeType).subscribe(function(e){200===e.code?i.abilityOrKnowledgeData=e:i._message.error(e.desc)},function(e){console.error(e)})},this.studentSubAbility=function(){i.tas.getDataOfStudentSubstanceAbility(i.studentId,i.abilityOrKnowledgeType).subscribe(function(e){if(200===e.code)for(var t in i.abilityOrKnowledgeData=e,i.secondAbilityList=[],i.abilityOrKnowledgeData)i.secondAbilityList.push({label:e.abilitys[t],value:t});else i._message.error(e.desc)},function(e){console.error(e)})},this.classGetKnowledgeQuestions=function(){i.tas.getQuestionByCidSourceKnowledgeNo(i.classId,i.currentSourceType,i.currentSecondKnowledge||i.abilityOrKnowledgeType).subscribe(function(e){200===e.code?i.questionList=e.questions:i._message.error(e.desc)},function(e){console.error(e)})},this.classGetAbilityQuestions=function(){i.tas.getQuestionByCidSourceSubAbility(i.classId,i.currentSourceType,i.abilityOrKnowledgeType).subscribe(function(e){200===e.code?i.questionList=e.questions:i._message.error(e.desc)},function(e){console.error(e)})},this.classSubAbility=function(){i.tas.getClassSubAbility(i.classId,i.abilityOrKnowledgeType).subscribe(function(e){200===e.code?i.abilityOrKnowledgeData=e:i._message.error(e.desc)},function(e){console.error(e)})},this.classSubKnowledge=function(){i.tas.getClassSubMusicKnowlegde(i.classId,i.abilityOrKnowledgeType).subscribe(function(e){200===e.code?i.abilityOrKnowledgeData=e:i._message.error(e.desc)},function(e){console.error(e)})},this.getSecondKnowledge=function(){i.tas.getSecondLevelKnowledge(i.abilityOrKnowledgeType).subscribe(function(e){200===e.code?(i.secondKnowledgeList=e.second_level,i.currentSecondKnowledge=i.secondKnowledgeList[0].no):i._message.error(e.desc)},function(e){console.error(e)})}}return e.prototype.ngOnInit=function(){var e=this;this.isTeacher=this.uis.getUserInfo().is_teacher,this.activatedRoute.queryParams.subscribe(function(t){e.abilityOrKnowledgeType=t.type,e.studentId=t.studentId,e.classId=t.classId,e.classId?e.abilityOrKnowledgeType in e._knowledge?(e.abilityType=!0,e.classGetKnowledgeQuestions(),e.classSubKnowledge(),e.getSecondKnowledge()):(e.classGetAbilityQuestions(),e.classSubAbility()):e.abilityOrKnowledgeType in e._knowledge?(e.abilityType=!0,e.studentGetKnowledgeQuestions(),e.studentSubKnowledge(),e.getSecondKnowledge()):(e.studentGetAbilityQuestions(),e.studentSubAbility())})},e=o([r.Component({selector:"app-ability-detail",template:n(902),styles:[n(903)]}),i("design:paramtypes",[s.ActivatedRoute,l.TestAnalysisService,c.NzMessageService,d.UserInfoService])],e)}();t.AbilityDetailComponent=u},457:function(e,t,n){"use strict";var o=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,s=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(r<3?i(s):r>3?i(t,n,s):i(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var r=n(2),s=n(11),a=n(77),l=n(6);n(904);var c=function(){function e(e,t,n){var o=this;this.uis=e,this.tas=t,this._message=n,this.currentStudentId=new Proxy({},{set:function(e,t,n,i){return e[t]=n,"id"===t&&e.id&&(o.getKnowledgeData(),o.getAbilityData(),o.characterStudentAbility(),o.getKnowledgeAnalysisData()),!0},get:function(e,t){return t in e?e[t]:console.error(t+" is undefined")}}),this.currentIndex=0,this.getFirstStudentId=function(){o.tas.teacherGetGrades(o.userId).mergeMap(function(e){return o.gradeList=e.grades,o.currentGradeId=o.gradeList[0].id,o.tas.teacherGetGradeClass(o.userId,o.currentGradeId).mergeMap(function(e){return o.classList=e.classes,o.currentClassId=o.classList[0].id,o.tas.teacherGetStudents(o.currentClassId)})}).subscribe(function(e){200===e.code?(o.studentList=e.students,o.currentStudentId.id=o.studentList[0].id,o.currentStudentName=o.studentList[0].name):o._message.error(e.desc)},function(e){console.error(e)})},this.gradeChange=function(){o.classList=[],o.tas.teacherGetGradeClass(o.userId,o.currentGradeId).mergeMap(function(e){return o.classList=e.classes,o.currentClassId=o.classList[0].id,o.tas.teacherGetStudents(o.currentClassId)}).subscribe(function(e){200===e.code?(o.studentList=e.students,o.currentStudentId.id=o.studentList[0].id,o.currentStudentName=o.studentList[0].name):o._message.error(e.desc)},function(e){console.error(e)})},this.classChange=function(){o.tas.teacherGetStudents(o.currentClassId).subscribe(function(e){200===e.code?(o.studentList=e.students,o.currentStudentId.id=o.studentList[0].id,o.currentStudentName=o.studentList[0].name):o._message.error(e.desc)},function(e){console.error(e)})},this.studentChange=function(){o.currentIndex=0,o.studentList.forEach(function(e){e.id===o.currentStudentId.id&&(o.currentStudentName=e.name)})},this.indexChange=function(){o.currentIndex},this.getKnowledgeData=function(){o.tas.getDataOfStudentMusicKnowledge(o.currentStudentId.id).subscribe(function(e){200===e.code?o.knowledgeData=e.result:o._message.error(e.desc)},function(e){console.error(e)})},this.getKnowledgeAnalysisData=function(){o.tas.getStudentKnowledgeAnalysis(o.currentStudentId.id).subscribe(function(e){200===e.code?o.knowledgeAnalysisData=e.knowledge_details:o._message.error(e.desc)},function(e){console.error(e)})},this.getAbilityData=function(){o.tas.getDataOfStudentTotallyAbility(o.currentStudentId.id).subscribe(function(e){if(200===e.code){o.abilityData=e.result}else o._message.error(e.desc)},function(e){console.error(e)})},this.characterStudentAbility=function(){o.tas.getStudentMusicAbilityDegree(o.currentStudentId.id).subscribe(function(e){200===e.code?(o.studentAbilityDegreeData=e,o.classAbilityDegreeData=e.class_result):o._message.error(e.desc)},function(e){console.error(e)})}}return e.prototype.ngOnInit=function(){this.isTeacher=this.uis.getUserInfo().is_teacher,this.userId=this.uis.getUserInfo().userId,this.currentStudentId.id="",this.isTeacher?(this.cardType="teacher",this.getFirstStudentId()):(this.currentClassId=this.uis.getUserInfo().class_id,this.cardType="student",this.currentStudentId.id=this.userId)},e=o([r.Component({selector:"app-student-ability",template:n(905),styles:[n(906)]}),i("design:paramtypes",[s.UserInfoService,a.TestAnalysisService,l.NzMessageService])],e)}();t.StudentAbilityComponent=c},458:function(e,t,n){"use strict";var o=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,s=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(r<3?i(s):r>3?i(t,n,s):i(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var r=n(2),s=n(11),a=n(77),l=n(6),c=function(){function e(e,t,n){var o=this;this.uis=e,this.tas=t,this._message=n,this.currentSource="",this.currentSkill="",this.currentKnowledge="",this.getQuestionList=function(){o.checkQuestionOptionAttributes(),o.tas.getDataOfStudentErrorQuestions(o.questionOption).subscribe(function(e){200===e.code?o.questionList=e.result:o._message.error(e.desc)},function(e){console.error(e)})},this.checkQuestionOptionAttributes=function(){o.currentSource&&0!==o.currentSource.length?o.questionOption.source=o.currentSource:delete o.questionOption.source,o.currentSkill&&0!==o.currentSkill.length?o.questionOption.skill=o.currentSkill:delete o.questionOption.skill,o.currentKnowledge&&0!==o.currentKnowledge.length?o.questionOption.knowledge=o.currentKnowledge:delete o.questionOption.knowledge}}return e.prototype.ngOnInit=function(){this.userId=this.uis.getUserInfo().userId,this.questionOption={uid:this.userId,source:this.currentSource,skill:this.currentSkill,knowledge:this.currentKnowledge},this.classId=this.uis.getUserCharacterInfo().classId,this.getQuestionList()},e=o([r.Component({selector:"app-question-book",template:n(907),styles:[n(908)]}),i("design:paramtypes",[s.UserInfoService,a.TestAnalysisService,l.NzMessageService])],e)}();t.QuestionBookComponent=c},56:function(e,t,n){"use strict";var o=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,s=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(r<3?i(s):r>3?i(t,n,s):i(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var r=n(2),s=n(32),a=n(28),l=function(){function e(e){this.http=e}return e.prototype.addStudySection=function(e){var t=(new s.HttpParams).set("title",e);return this.http.post(a.environment.basePath+"classroom/learn_stage",t,{headers:{contentType:"application/x-www-form-urlencoded"}})},e.prototype.deleteStudySection=function(e){var t=(new s.HttpParams).set("id",e);return this.http.delete(a.environment.basePath+"classroom/learn_stage",{params:t,headers:{contentType:"application/x-www-form-urlencoded"}})},e.prototype.reviseStudySection=function(e,t){var n=(new s.HttpParams).set("lid",e).set("title",t);return this.http.put(a.environment.basePath+"classroom/learn_stage/"+e,n,{headers:{contentType:"application/x-www-form-urlencoded"}})},e.prototype.queryStudySection=function(e){return this.http.get(a.environment.basePath+"classroom/learn_stage/"+e)},e.prototype.queryAllStudySection=function(){return this.http.get(a.environment.basePath+"classroom/learn_stages")},e.prototype.addGrade=function(e,t){var n=(new s.HttpParams).set("lid",e).set("name",t);return this.http.post(a.environment.basePath+"classroom/grade",n,{headers:{contentType:"application/x-www-form-urlencoded"}})},e.prototype.reviseGrade=function(e,t,n){var o=(new s.HttpParams).set("gid",e).set("lid",t).set("name",n);return this.http.put(a.environment.basePath+"classroom/grade/"+e,o,{headers:{contentType:"application/x-www-form-urlencoded"}})},e.prototype.deleteGrade=function(e){return this.http.delete(a.environment.basePath+"classroom/grade/"+e,{headers:{contentType:"application/x-www-form-urlencoded"}})},e.prototype.queryGrade=function(e,t,n){var o=new s.HttpParams({fromObject:{name:e||"",id:t||"",learnStageId:n||""}});return this.http.get(a.environment.basePath+"classroom/grades",{params:o,headers:{contentType:"application/x-www-form-urlencoded"}})},e.prototype.addClass=function(e,t,n,o,i){var r=(new s.HttpParams).set("gid",e).set("name",t).set("schoolId",n).set("start_year",o).set("end_year",i);return this.http.post(a.environment.basePath+"classroom/class",r)},e.prototype.reviseClass=function(e,t,n,o,i,r){var l=(new s.HttpParams).set("gid",e).set("cid",t).set("name",n).set("schoolId",o).set("start_year",i).set("end_year",r);return this.http.put(a.environment.basePath+"classroom/class/"+t,l)},e.prototype.deleteClass=function(e){return this.http.delete(a.environment.basePath+"classroom/class/"+e)},e.prototype.queryAllClass=function(e,t,n,o){return t?this.http.get(a.environment.basePath+"classroom/class/classes?page="+e+"&gradeId="+t):this.http.get(a.environment.basePath+"classroom/class/classes?page="+e)},e.prototype.addSchool=function(e,t,n){var o=(new s.HttpParams).set("cityId",e).set("name",t).set("regionId",n);return this.http.post(a.environment.basePath+"classroom/school",o,{headers:{"Content-Type":"application/x-www-form-urlencoded"}})},e.prototype.deleteSchool=function(e){return this.http.delete(a.environment.basePath+"classroom/school/"+e)},e.prototype.reviseSchool=function(e,t,n,o){var i=(new s.HttpParams).set("sid",e).set("cityId",t).set("name",n).set("regionId",o);return this.http.put(a.environment.basePath+"classroom/school/"+e,i,{headers:{"Content-Type":"application/x-www-form-urlencoded"}})},e.prototype.querySchool=function(e,t,n,o,i){return e?this.http.get(a.environment.basePath+"classroom/school/schools?sid="+e):this.http.get(a.environment.basePath+"classroom/school/schools")},e.prototype.getProvince=function(){return this.http.get(a.environment.basePath+"user/area/provinces")},e.prototype.getCities=function(e){return this.http.get(a.environment.basePath+"user/area/citys?pid="+e)},e.prototype.getRegions=function(e){return this.http.get(a.environment.basePath+"user/area/regions?cid="+e)},e=o([r.Injectable(),i("design:paramtypes",[s.HttpClient])],e)}();t.StudySectionService=l},67:function(e,t,n){"use strict";var o=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,s=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(r<3?i(s):r>3?i(t,n,s):i(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var r=n(2),s=n(32),a=n(28),l=function(){function e(e){this.http=e}return e.prototype.userCreateClass=function(e){var t=(new s.HttpParams).set("uid",e);return this.http.post(a.environment.basePath+"classroom",t,{headers:{contentType:"application/x-www-form-unrecoded"}})},e.prototype.teacherCreateClass=function(e,t,n,o,i,r,l){var c=(new s.HttpParams).set("teacherId",e).set("gradeId",t).set("classesId",n).set("bookId",o).set("title",i).set("teacherName",r).set("imgTfileId",l);return this.http.post(a.environment.basePath+"classroom/classroom",c,{headers:{"Content-Type":"application/x-www-form-urlencoded"}})},e.prototype.userDeleteClass=function(e){return this.http.delete(a.environment.basePath+"classroom/"+e,{headers:{contentType:"application/x-www-form-unrecoded"}})},e.prototype.getCreatedOrAttendedClasses=function(e){return this.http.get(a.environment.basePath+"classroom/classrooms?uid="+e)},e.prototype.getClassDetail=function(e){return this.http.get(a.environment.basePath+"classroom/"+e)},e.prototype.stuJoinClass=function(e,t){var n=(new s.HttpParams).set("uid",e).set("code",t);return this.http.post(a.environment.basePath+"classroom/joined",n,{headers:{contentType:"application/x-www-form-unrecoded"}})},e.prototype.stuQuitClass=function(e,t){(new s.HttpParams).set("uid",e).set("rid",t);return this.http.delete(a.environment.basePath+"classroom/"+t+"/user/"+e+"/logout")},e.prototype.getClassStudents=function(e){return this.http.get(a.environment.basePath+"classroom/"+e+"/students")},e.prototype.creatClassNotice=function(e,t,n){var o=(new s.HttpParams).set("title",t).set("rid",e).set("content",n);return this.http.post(a.environment.basePath+"classroom/notice",o,{headers:{contentType:"application/x-www-form-unrecoded"}})},e.prototype.getChaperDetail=function(e,t){var n=(new s.HttpParams).set("cid",e).set("classRoomId",t);return this.http.post(a.environment.basePath+"classroom/chapter/"+e,n,{headers:{"Content-Type":"application/x-www-form-urlencoded"}})},e.prototype.getUngroupedMembers=function(e){return this.http.get(a.environment.basePath+"classroom/ungrouped?classRoomId="+e)},e.prototype.getGroups=function(e){return this.http.get(a.environment.basePath+"classroom/groups?classRoomId="+e)},e.prototype.getGroupMembers=function(e){return this.http.get(a.environment.basePath+"classroom/group/"+e+"/students")},e.prototype.addGroup=function(e,t,n){var o;return o=n?(new s.HttpParams).set("classRoomId",e).set("title",t).set("students",n.toString()):(new s.HttpParams).set("classRoomId",e).set("title",t),this.http.post(a.environment.basePath+"classroom/group",o,{headers:{"Content-Type":"application/x-www-form-urlencoded"}})},e.prototype.reviseGroupName=function(e,t){var n=(new s.HttpParams).set("gid",e).set("title",t);return this.http.put(a.environment.basePath+"classroom/group/"+e,n,{headers:{"Content-Type":"application/x-www-form-urlencoded"}})},e.prototype.deleteGroup=function(e){return this.http.delete(a.environment.basePath+"classroom/group/"+e)},e.prototype.reviseGroupMember=function(e,t,n,o){var i=(new s.HttpParams).set("students",e.toString()).set("classRoomId",t).set("sourceGroupId",n).set("destGroupId",o);return this.http.put(a.environment.basePath+"classroom/group/exchange_group",i,{headers:{"Content-Type":"application/x-www-form-urlencoded"}})},e=o([r.Injectable(),i("design:paramtypes",[s.HttpClient])],e)}();t.ClassesService=l},68:function(e,t,n){"use strict";var o=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,s=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(r<3?i(s):r>3?i(t,n,s):i(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var r=n(2),s=n(32),a=n(28),l=function(){function e(e){this.http=e}return e.prototype.getVersion=function(){return this.http.get("classroom/versions")},e.prototype.queryTeachingMaterial=function(e){var t={};for(var n in e)(e[n]||0===e[n])&&(t[n]=e[n]);var o=new s.HttpParams({fromObject:t});return this.http.get(a.environment.basePath+"classroom/book",{params:o})},e.prototype.addTeachingMaterial=function(e){var t=(new s.HttpParams).set("title",e.title).set("intro",e.intro).set("isbn",e.isbn).set("publishHouse",e.publishHouse).set("imgTfileId",e.imgTfileId).set("gradeId",e.gradeId).set("version",e.version),n=new FormData;return n.append("title",e.title),n.append("intro",e.intro),n.append("isbn",e.isbn),n.append("publishHouse",e.publishHouse),n.append("imgTfileId",e.imgTfileId),n.append("gradeId",e.gradeId),n.append("version",e.version),this.http.post(a.environment.basePath+"classroom/book",t)},e.prototype.updateTeachingMaterial=function(e,t){var n={};for(var o in e)(e[o]||0===e[o])&&(n[o]=e[o]);var i=new s.HttpParams({fromObject:n});return this.http.put(a.environment.basePath+"classroom/book/"+t,i,{headers:{"Content-Type":"application/x-www-form-urlencoded"}})},e.prototype.deleteTeachingMaterial=function(e){return this.http.delete(a.environment.basePath+"classroom/book/"+e)},e.prototype.uploadImage=function(e){return this.http.post(a.environment.basePath+"classroom/upload_file2",e)},e.prototype.addChapter=function(e){var t={};for(var n in e)(e[n]||0===e[n])&&(t[n]=e[n]);var o=new s.HttpParams({fromObject:t});return this.http.post(a.environment.basePath+"classroom/chapter",o,{headers:{"Content-Type":"application/x-www-form-urlencoded"}})},e.prototype.deleteChapter=function(e){return this.http.delete(a.environment.basePath+"classroom/chapter/"+e)},e.prototype.reviseChapter=function(e,t){var n=(new s.HttpParams).set("cid",e).set("title",t);return this.http.put(a.environment.basePath+"classroom/chapter/"+e,n,{headers:{"Content-Type":"application/x-www-form-urlencoded"}})},e.prototype.queryChapterAllAbout=function(e,t){return this.http.get(a.environment.basePath+"classroom/chapters?bid="+e+(t?"&parentId="+t:""))},e.prototype.queryAllChapters=function(e){return this.http.get(a.environment.basePath+"classroom/all_chapters?book_id="+e)},e=o([r.Injectable(),i("design:paramtypes",[s.HttpClient])],e)}();t.TeachingMaterialService=l},69:function(e,t,n){"use strict";var o=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,s=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(r<3?i(s):r>3?i(t,n,s):i(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var r=n(2),s=n(32),a=n(28),l=function(){function e(e){this.http=e,this.header={"Content-Type":"application/x-www-form-urlencoded"},this.header_json={"Content-Type":"application/json;charset=utf8"}}return e.prototype.createHomework=function(e){new s.HttpParams({fromObject:JSON.parse(JSON.stringify(e))});return this.http.post(a.environment.basePath+"classroom/task",e,{headers:{"Content-Type":"application/json;charset=utf8"}})},e.prototype.homeworkAddQuestion=function(e,t){var n=(new s.HttpParams).set("tid",e).set("questionId",t);return this.http.post(a.environment.basePath+"classroom/task_question/"+e,n,{headers:this.header})},e.prototype.updateHomework=function(e,t){var n=JSON.stringify(e);return this.http.put(a.environment.basePath+"classroom/task/"+t,n,{headers:{"Content-Type":"application/json;charset=utf8"}})},e.prototype.deleteHomework=function(e){return this.http.delete(a.environment.basePath+"classroom/task/"+e,{headers:this.header})},e.prototype.saveQuestion=function(e){var t=JSON.stringify(e);return this.http.post(a.environment.basePath+"test",t,{headers:{"Content-Type":"application/json;charset=utf8"}})},e.prototype.reviseTask=function(e,t){var n=new s.HttpParams({fromObject:JSON.parse(JSON.stringify(e))});return this.http.put(a.environment.basePath+"classroom/task/"+t,n,{headers:this.header})},e.prototype.deleteTask=function(e){return this.http.delete(a.environment.basePath+"classroom/task_question/"+e,{headers:this.header})},e.prototype.getHomeworkFromClassIdAndChapterId=function(e,t){return this.http.get(a.environment.basePath+"classroom/tasks?classroomId="+e+"&chapterId="+t)},e.prototype.queryQuestionListByCondition=function(e){var t=new s.HttpParams({fromObject:JSON.parse(JSON.stringify(e))});return this.http.get(a.environment.basePath+"test/question_list?"+t)},e.prototype.getHomeworkQuestionList=function(e){return this.http.get(a.environment.basePath+"classroom/task_questions/"+e)},e.prototype.getTaskList=function(e,t){return this.http.get(a.environment.basePath+"classroom/task_list?classroomId="+e+"&chapterId="+t)},e.prototype.getStudentsAnswerFromTaskId=function(e,t){return this.http.get(a.environment.basePath+"classroom/task_answers/"+e+"?&userId="+t)},e.prototype.studentsSubmitQuestion=function(e){var t=JSON.stringify(e);return this.http.post(a.environment.basePath+"classroom/task/commit",t,{headers:{"Content-Type":"application/json;charset=utf8"}})},e.prototype.rateTask=function(e,t){var n=(new s.HttpParams).set("taskAnswerId",e).set("score",t.toString());return this.http.put(a.environment.basePath+"classroom/task/mark/"+e,n,{headers:this.header})},e.prototype.rateAllSelectQuestion=function(e){var t={taskId:e};return this.http.put(a.environment.basePath+"classroom/task_mark/"+e,t,{headers:{"Content-Type":"application/json;charset=utf8"}})},e=o([r.Injectable(),i("design:paramtypes",[s.HttpClient])],e)}();t.ClassHomeworkService=l},691:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(2),i=n(701),r=n(703);n(28).environment.production&&o.enableProdMode(),i.platformBrowserDynamic().bootstrapModule(r.AppModule).catch(function(e){return console.log(e)})},703:function(e,t,n){"use strict";var o=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,s=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(r<3?i(s):r>3?i(t,n,s):i(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s};Object.defineProperty(t,"__esModule",{value:!0});var i=n(97),r=n(96),s=n(704),a=n(2),l=n(12),c=n(32),d=n(6),u=n(12),p=n(737),m=n(740),h=n(1246),f=n(418),g=n(1250),v=n(425),y=n(433),b=n(11),z=n(201),_=n(439),I=n(34),C=n(1251),S=n(423),w=n(118),k=n(446),T=n(452);I.registerLocaleData(C.default);var x=function(){function e(){}return e=o([a.NgModule({declarations:[p.AppComponent,h.TestHeaderComponent,f.ErrorComponent],imports:[r.BrowserModule,i.HttpModule,r.BrowserModule,l.FormsModule,u.ReactiveFormsModule,c.HttpClientModule,s.BrowserAnimationsModule,m.AppRoutingModule,g.SignModule,v.ClassesModules,_.BaseDataAdministrationModule,y.ZoonModule,w.DdCommonModule,k.TestModule,T.TestAnalysisModule,d.NgZorroAntdModule.forRoot()],providers:[b.UserInfoService,z.RegisterService,S.AuthGuard],bootstrap:[p.AppComponent]})],e)}();t.AppModule=x},715:function(e,t,n){var o={"./af":283,"./af.js":283,"./ar":284,"./ar-dz":285,"./ar-dz.js":285,"./ar-kw":286,"./ar-kw.js":286,"./ar-ly":287,"./ar-ly.js":287,"./ar-ma":288,"./ar-ma.js":288,"./ar-sa":289,"./ar-sa.js":289,"./ar-tn":290,"./ar-tn.js":290,"./ar.js":284,"./az":291,"./az.js":291,"./be":292,"./be.js":292,"./bg":293,"./bg.js":293,"./bm":294,"./bm.js":294,"./bn":295,"./bn.js":295,"./bo":296,"./bo.js":296,"./br":297,"./br.js":297,"./bs":298,"./bs.js":298,"./ca":299,"./ca.js":299,"./cs":300,"./cs.js":300,"./cv":301,"./cv.js":301,"./cy":302,"./cy.js":302,"./da":303,"./da.js":303,"./de":304,"./de-at":305,"./de-at.js":305,"./de-ch":306,"./de-ch.js":306,"./de.js":304,"./dv":307,"./dv.js":307,"./el":308,"./el.js":308,"./en-au":309,"./en-au.js":309,"./en-ca":310,"./en-ca.js":310,"./en-gb":311,"./en-gb.js":311,"./en-ie":312,"./en-ie.js":312,"./en-il":313,"./en-il.js":313,"./en-nz":314,"./en-nz.js":314,"./eo":315,"./eo.js":315,"./es":316,"./es-do":317,"./es-do.js":317,"./es-us":318,"./es-us.js":318,"./es.js":316,"./et":319,"./et.js":319,"./eu":320,"./eu.js":320,"./fa":321,"./fa.js":321,"./fi":322,"./fi.js":322,"./fo":323,"./fo.js":323,"./fr":324,"./fr-ca":325,"./fr-ca.js":325,"./fr-ch":326,"./fr-ch.js":326,"./fr.js":324,"./fy":327,"./fy.js":327,"./gd":328,"./gd.js":328,"./gl":329,"./gl.js":329,"./gom-latn":330,"./gom-latn.js":330,"./gu":331,"./gu.js":331,"./he":332,"./he.js":332,"./hi":333,"./hi.js":333,"./hr":334,"./hr.js":334,"./hu":335,"./hu.js":335,"./hy-am":336,"./hy-am.js":336,"./id":337,"./id.js":337,"./is":338,"./is.js":338,"./it":339,"./it.js":339,"./ja":340,"./ja.js":340,"./jv":341,"./jv.js":341,"./ka":342,"./ka.js":342,"./kk":343,"./kk.js":343,"./km":344,"./km.js":344,"./kn":345,"./kn.js":345,"./ko":346,"./ko.js":346,"./ky":347,"./ky.js":347,"./lb":348,"./lb.js":348,"./lo":349,"./lo.js":349,"./lt":350,"./lt.js":350,"./lv":351,"./lv.js":351,"./me":352,"./me.js":352,"./mi":353,"./mi.js":353,"./mk":354,"./mk.js":354,"./ml":355,"./ml.js":355,"./mn":356,"./mn.js":356,"./mr":357,"./mr.js":357,"./ms":358,"./ms-my":359,"./ms-my.js":359,"./ms.js":358,"./mt":360,"./mt.js":360,"./my":361,"./my.js":361,"./nb":362,"./nb.js":362,"./ne":363,"./ne.js":363,"./nl":364,"./nl-be":365,"./nl-be.js":365,"./nl.js":364,"./nn":366,"./nn.js":366,"./pa-in":367,"./pa-in.js":367,"./pl":368,"./pl.js":368,"./pt":369,"./pt-br":370,"./pt-br.js":370,"./pt.js":369,"./ro":371,"./ro.js":371,"./ru":372,"./ru.js":372,"./sd":373,"./sd.js":373,"./se":374,"./se.js":374,"./si":375,"./si.js":375,"./sk":376,"./sk.js":376,"./sl":377,"./sl.js":377,"./sq":378,"./sq.js":378,"./sr":379,"./sr-cyrl":380,"./sr-cyrl.js":380,"./sr.js":379,"./ss":381,"./ss.js":381,"./sv":382,"./sv.js":382,"./sw":383,"./sw.js":383,"./ta":384,"./ta.js":384,"./te":385,"./te.js":385,"./tet":386,"./tet.js":386,"./tg":387,"./tg.js":387,"./th":388,"./th.js":388,"./tl-ph":389,"./tl-ph.js":389,"./tlh":390,"./tlh.js":390,"./tr":391,"./tr.js":391,"./tzl":392,"./tzl.js":392,"./tzm":393,"./tzm-latn":394,"./tzm-latn.js":394,"./tzm.js":393,"./ug-cn":395,"./ug-cn.js":395,"./uk":396,"./uk.js":396,"./ur":397,"./ur.js":397,"./uz":398,"./uz-latn":399,"./uz-latn.js":399,"./uz.js":398,"./vi":400,"./vi.js":400,"./x-pseudo":401,"./x-pseudo.js":401,"./yo":402,"./yo.js":402,"./zh-cn":403,"./zh-cn.js":403,"./zh-hk":404,"./zh-hk.js":404,"./zh-tw":405,"./zh-tw.js":405};function i(e){return n(r(e))}function r(e){var t=o[e];if(!(t+1))throw new Error("Cannot find module '"+e+"'.");return t}i.keys=function(){return Object.keys(o)},i.resolve=r,e.exports=i,i.id=715},737:function(e,t,n){"use strict";var o=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,s=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(r<3?i(s):r>3?i(t,n,s):i(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var r=n(2),s=n(11),a=function(){function e(e){this.uis=e}return e.prototype.onLogin=function(e){this.user=e},e.prototype.ngOnInit=function(){localStorage.getItem("user")&&(this.userId=localStorage.getItem("user"),this.uis.queryUserInfo(this.userId)),localStorage.getItem("userInfo")&&(this.userInfo=JSON.parse(localStorage.getItem("userInfo")),this.uis.setUserInfo(this.userInfo))},e=o([r.Component({selector:"app-root",template:n(739)}),i("design:paramtypes",[s.UserInfoService])],e)}();t.AppComponent=a},738:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(){return function(){}}();t.UserInfoModel=o},739:function(e,t){e.exports='<app-header></app-header> <router-outlet (onLogin)="onLogin($event)"></router-outlet> '},740:function(e,t,n){"use strict";var o=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,s=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(r<3?i(s):r>3?i(t,n,s):i(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s};Object.defineProperty(t,"__esModule",{value:!0});var i=n(2),r=n(13),s=n(756),a=n(419),l=n(422),c=n(423),d=n(424),u={path:"classes",canActivate:[c.AuthGuard],loadChildren:function(){return new Promise(function(e,t){new Promise(function(e){e()}).then(function(t){e(n(425).ClassesModules)}.bind(null,n)).catch(function(e){t({loadChunkError:!0,details:e})})})}},p={path:"zoom",canActivate:[c.AuthGuard],loadChildren:function(){return new Promise(function(e,t){new Promise(function(e){e()}).then(function(t){e(n(433).ZoonModule)}.bind(null,n)).catch(function(e){t({loadChunkError:!0,details:e})})})}},m={path:"baseDataAdministration",canActivate:[c.AuthGuard],loadChildren:function(){return new Promise(function(e,t){new Promise(function(e){e()}).then(function(t){e(n(439).BaseDataAdministrationModule)}.bind(null,n)).catch(function(e){t({loadChunkError:!0,details:e})})})}},h={path:"test",canActivate:[c.AuthGuard],loadChildren:function(){return new Promise(function(e,t){new Promise(function(e){e()}).then(function(t){e(n(446).TestModule)}.bind(null,n)).catch(function(e){t({loadChunkError:!0,details:e})})})}},f={path:"analysis",canActivate:[c.AuthGuard],loadChildren:function(){return new Promise(function(e,t){new Promise(function(e){e()}).then(function(t){e(n(452).TestAnalysisModule)}.bind(null,n)).catch(function(e){t({loadChunkError:!0,details:e})})})}},g=[{path:"",redirectTo:"sign",pathMatch:"full"},{path:"resources",component:l.PaperManagementComponent,canActivate:[c.AuthGuard],children:[{path:"",redirectTo:"disk",pathMatch:"full"},{path:"disk",component:l.PaperManagementComponent},{path:"recycle",component:l.PaperManagementComponent},{path:"videos",component:l.PaperManagementComponent},{path:"audios",component:l.PaperManagementComponent},{path:"documents",component:l.PaperManagementComponent},{path:"imgs",component:l.PaperManagementComponent},{path:"others",component:l.PaperManagementComponent}]}].concat(a.SignRoute,[u,p,m,h,f],s.errorRoute),v=function(){function e(){}return e=o([i.NgModule({imports:[r.RouterModule.forRoot(g,{useHash:!0})],exports:[r.RouterModule],providers:[d.CanDeactivateGuard]})],e)}();t.AppRoutingModule=v},756:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(418);t.errorRoute=[{path:"error",component:o.ErrorComponent,data:{authorities:[],pageTitle:"error.title"}},{path:"accessdenied",component:o.ErrorComponent,data:{authorities:[],pageTitle:"error.title",error403:!0}},{path:"**",redirectTo:"error",pathMatch:"full"}]},757:function(e,t){e.exports='<div> <div class="row"> <div class="col-md-4"> <span class="hipster img-fluid rounded"></span> </div> <div class="col-md-8"> <h1 jhiTranslate="error.title">Error Page!</h1> <div [hidden]="!errorMessage"> <div class="alert alert-danger">{{errorMessage}} </div> </div> <div [hidden]="!error403" class="alert alert-danger" jhiTranslate="error.http.403">You are not authorized to access this page. </div> </div> </div> </div> '},767:function(e,t){e.exports='<form nz-form [formGroup]="validateForm" class="login-form" (ngSubmit)="_submitForm()"> <div nz-form-item> <div nz-form-control> <nz-input formControlName="userName" [nzPlaceHolder]="\'账号/邮箱\'" [nzSize]="\'large\'"> <ng-template #prefix> <i class="anticon anticon-user"></i> </ng-template> </nz-input> <div nz-form-explain *ngIf="validateForm.controls.userName.dirty&&validateForm.controls.userName.hasError(\'required\')"> 请输入您的账号！ </div> </div> </div> <div nz-form-item> <div nz-form-control> <nz-input formControlName="password" [nzType]="\'password\'" [nzPlaceHolder]="\'密码\'" [nzSize]="\'large\'"> <ng-template #prefix> <i class="anticon anticon-lock"></i> </ng-template> </nz-input> <div nz-form-explain *ngIf="validateForm.controls.password.dirty&&validateForm.controls.password.hasError(\'required\')"> 请输入您的密码！ </div> </div> </div> <div nz-form-item *ngIf="reviseFlag"> <div nz-form-control> <div nz-row> <div nz-col [nzSpan]="12"> <nz-input formControlName="captcha" [nzType]="\'text\'" [nzPlaceHolder]="\'验证码\'" [nzSize]="\'large\'"> <ng-template #prefix> <i class="anticon anticon-lock"></i> </ng-template> </nz-input> </div> <div nz-col [nzSpan]="12" style="text-align: right;"> <button nz-button [nzSize]="\'large\'" (click)="_getCaptcha($event)">获取验证码</button> </div> </div> <div nz-form-explain *ngIf="validateForm.controls.captcha.dirty&&validateForm.controls.captcha.hasError(\'required\')"> 请输入您的验证码！ </div> </div> </div> <div nz-form-item> <div nz-form-control> <label nz-checkbox formControlName="remember" *ngIf="!reviseFlag"> <span>记住该账号</span> </label> <a class="login-form-forgot" class="login-form-forgot" (click)="reviseFlag=!reviseFlag">{{!reviseFlag?\'忘记密码？\':\'返回登录！\'}}</a> <button nz-button class="login-form-button" [nzType]="\'primary\'" [nzSize]="\'large\'"> {{reviseFlag?\'修改密码\':\'登录\'}} </button> <a [routerLink]="\'/register\'" *ngIf="!reviseFlag">注册一个账号!</a> </div> </div> </form> '},768:function(e,t){e.exports=":host{flex:1;display:flex;flex-direction:column;justify-content:center;align-items:center}.login-form{max-width:300px}.login-form-forgot{float:right}.login-form-button{width:100%}\n"},769:function(e,t){e.exports='<form nz-form [formGroup]="validateForm" (ngSubmit)="_submitForm()"> <div nz-form-item nz-row> <div nz-form-label nz-col [nzSm]="6" [nzXs]="24"> <label for="email" nz-form-item-required>邮箱</label> </div> <div nz-form-control nz-col [nzSm]="14" [nzXs]="24" nzHasFeedback> <nz-input [nzSize]="\'large\'" formControlName="email" [nzId]="\'email\'"></nz-input> <div nz-form-explain *ngIf="getFormControl(\'email\').dirty&&getFormControl(\'email\').hasError(\'email\')"> 邮箱格式不正确！ </div> </div> </div> <div nz-form-item nz-row> <div nz-form-label nz-col [nzSm]="6" [nzXs]="24"> <label for="password" nz-form-item-required>密码</label> </div> <div nz-form-control nz-col [nzSm]="14" [nzXs]="24" nzHasFeedback> <nz-input [nzSize]="\'large\'" formControlName="password" [nzType]="\'password\'" [nzId]="\'password\'" (ngModelChange)="updateConfirmValidator()"></nz-input> <div nz-form-explain *ngIf="getFormControl(\'password\').dirty&&getFormControl(\'password\').hasError(\'required\')"> 请输入您的密码！ </div> </div> </div> <div nz-form-item nz-row> <div nz-form-label nz-col [nzSm]="6" [nzXs]="24"> <label for="checkPassword" nz-form-item-required>确认密码</label> </div> <div nz-form-control nz-col [nzSm]="14" [nzXs]="24" nzHasFeedback> <nz-input [nzSize]="\'large\'" formControlName="checkPassword" [nzType]="\'password\'" [nzId]="\'checkPassword\'"></nz-input> <div nz-form-explain *ngIf="getFormControl(\'checkPassword\').dirty&&getFormControl(\'checkPassword\').hasError(\'required\')"> 请再次输入您的密码！ </div> <div nz-form-explain *ngIf="getFormControl(\'checkPassword\').dirty&&getFormControl(\'checkPassword\').hasError(\'confirm\')"> 两次密码输入不一致！ </div> </div> </div> <div nz-form-item nz-row> <div nz-form-label nz-col [nzSm]="6" [nzXs]="24"> <label for="nickname" nz-form-item-required> <span> 用户身份 <nz-tooltip [nzTitle]="\'如果您是教师，那么请选择教师身份，如果您是学生，那么请选择学生身份\'"> <i nz-tooltip class="anticon anticon-question-circle-o"></i> </nz-tooltip> </span> </label> </div> <div nz-form-control nz-col [nzSm]="14" [nzXs]="24" nzHasFeedback> <nz-radio-group formControlName="isTeacher"> <label nz-radio [nzValue]="\'true\'"> <span>教师</span> </label> <label nz-radio [nzValue]="\'false\'"> <span>学生</span> </label> </nz-radio-group> <div nz-form-explain *ngIf="getFormControl(\'isTeacher\').dirty&&getFormControl(\'isTeacher\').hasError(\'required\')">请选择您的身份！ </div> </div> </div> <div nz-form-item nz-row> <div nz-form-label nz-col [nzSm]="6" [nzXs]="24"> <label for="phoneNumber" nz-form-item-required>电话号码</label> </div> <div nz-form-control nz-col [nzSm]="14" [nzXs]="24" nzHasFeedback [nzValidateStatus]="validateForm.controls[\'phoneNumber\']"> <nz-input-group [nzSize]="\'large\'" nzCompact> <input formControlName="phoneNumber" id="\'phoneNumber\'" nz-input style="width: 100%;"> </nz-input-group> <div nz-form-explain *ngIf="getFormControl(\'phoneNumber\').dirty&&getFormControl(\'phoneNumber\').hasError(\'required\')"> 请输入您的电话号码！ </div> </div> </div> <div nz-form-item nz-row> <div nz-form-label nz-col [nzSm]="6" [nzXs]="24"> <label for="captcha" nz-form-item-required>验证码</label> </div> <div nz-form-control nz-col [nzSm]="14" [nzXs]="24"> <div nz-row [nzGutter]="8"> <div nz-col [nzSpan]="12"> <nz-input [nzSize]="\'large\'" formControlName="captcha" [nzId]="\'captcha\'"></nz-input> </div> <div nz-col [nzSpan]="12"> <button nz-button [nzSize]="\'large\'" (click)="_getCaptcha($event)">获取验证码</button> </div> </div> <div nz-form-extra>点击按钮后您会从注册邮箱中获取我们的验证码，如果没有找到邮件，请在垃圾箱中寻找验证邮件</div> <div nz-form-explain *ngIf="getFormControl(\'captcha\').dirty&&getFormControl(\'captcha\').hasError(\'required\')"> 请输入您的验证码！ </div> </div> </div> <div nz-form-item nz-row style="margin-bottom:8px;"> <div nz-form-control nz-col [nzSpan]="14" [nzOffset]="6"> <button nz-button [nzSize]="\'large\'" [nzType]="\'primary\'">注册</button> &nbsp;&nbsp; <a [routerLink]="\'/sign\'">返回登录</a> </div> </div> </form> '},77:function(e,t,n){"use strict";var o=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,s=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(r<3?i(s):r>3?i(t,n,s):i(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var r=n(2),s=n(32),a=n(28),l=function(){function e(e){this.http=e,this.header_urlencoded={headers:{"Content-Type":"application/x-www-form-urlencoded"}},this.header_json={headers:{"Content-Type":"application/json;charset=utf8"}}}return e.prototype.getDataOfStudentCourseworkCorrect=function(e){return this.http.get(a.environment.basePath+"test/user/exerciser/accuracy?uid="+e)},e.prototype.getDataOfStudentHomeworkInTimeLevel=function(e){return this.http.get(a.environment.basePath+"test/user/task/on_time_rate?uid="+e)},e.prototype.getDataOfStudentHomeworkCorrectLevel=function(e){return this.http.get(a.environment.basePath+"test/user/task/accuracy?uid="+e)},e.prototype.getDateOfStudentAfterCourseExercise=function(e){return this.http.get(a.environment.basePath+"test/user/task/song_score?uid="+e)},e.prototype.getDataOfHighestExercise=function(e){return this.http.get(a.environment.basePath+"test/user/task/all_song_score?uid="+e)},e.prototype.getDataOfPersonalScore=function(e){return this.http.get(a.environment.basePath+"test/user/test/score?uid="+e)},e.prototype.getDataOfStudentPersonalRate=function(e){return this.http.get(a.environment.basePath+"test/user/test/score_class_position?uid="+e)},e.prototype.getDataOfStudentAbilityRadar=function(e){return this.http.get(a.environment.basePath+"test/user/test/user_ability_radar?uid="+e)},e.prototype.getDataOfArtActs=function(e){return this.http.get(a.environment.basePath+"test/art_acts/"+e)},e.prototype.getDataOfStudentAbilityByUnitMiddleTest=function(e){return this.http.get(a.environment.basePath+"test/user/chapter_test/ability?uid="+e)},e.prototype.getClassesAbilityByUnitMiddleEnd=function(e){return this.http.get(a.environment.basePath+"test/class/chapter_test/ability?cids="+e)},e.prototype.getStudentMusicAbilityDegree=function(e){return this.http.get(a.environment.basePath+"test/user/music_ability/tendency?uid="+e)},e.prototype.getDataOfStudentErrorQuestions=function(e){var t=new s.HttpParams({fromObject:JSON.parse(JSON.stringify(e))});return this.http.get(a.environment.basePath+"test/user/error_questions?"+t)},e.prototype.getDataOfStudentTotallyAbility=function(e){return this.http.get(a.environment.basePath+"test/user/ability/statistics?uid="+e)},e.prototype.getDataOfStudentSubstanceAbility=function(e,t){return this.http.get(a.environment.basePath+"test/user/sub_ability/statistics?uid="+e+"&ca="+t)},e.prototype.getDataOfStudentMusicKnowledge=function(e){return this.http.get(a.environment.basePath+"test/user/knowledge/statistics?uid="+e)},e.prototype.getDataOfStudentSubMusicKnowledge=function(e,t){return this.http.get(a.environment.basePath+"test/user/sub_knowledge/analysis?uid="+e+"&knowledge_no="+t)},e.prototype.getQuestionsByStudentIdSourceSubKnowledge=function(e,t,n){var o=new s.HttpParams({fromObject:{uid:e,source:t,knowledgeNo:n}});return this.http.get(a.environment.basePath+"test/user/knowledge_questions?"+o)},e.prototype.getQuestionsByStudentIdSourceSubAbility=function(e,t,n){var o=new s.HttpParams({fromObject:{uid:e,source:t,ca:n}});return this.http.get(a.environment.basePath+"test/user/ability_questions?"+o)},e.prototype.getQuestionAccuracyOfClass=function(e){var t=new s.HttpParams({fromObject:JSON.parse(JSON.stringify(e))});return this.http.get(a.environment.basePath+"test/class/answer_people_accuracy?"+t)},e.prototype.getStudentKnowledgeAnalysis=function(e){return this.http.get(a.environment.basePath+"test/user/knowledge/analysis?uid="+e)},e.prototype.teacherGetGrades=function(e){return this.http.get(a.environment.basePath+"classroom/class_student/grades?tid="+e)},e.prototype.teacherGetGradeClass=function(e,t){return this.http.get(a.environment.basePath+"classroom/class_student/teacher/"+e+"/classes?gid="+t)},e.prototype.teacherGetStudents=function(e){return this.http.get(a.environment.basePath+"classroom/class_student/students?cid="+e)},e.prototype.getClassMusicAbilityDegree=function(e){return this.http.get(a.environment.basePath+"test/class/music_ability/tendency?cids="+e)},e.prototype.teacherGetClassKnowledgeData=function(e,t,n){return this.http.get(a.environment.basePath+"test/class/knowledge/statistic?cid="+e+"&gid="+t+"&schoolId="+n)},e.prototype.getClassedMusicAbilityData=function(e){return this.http.get(a.environment.basePath+"test/class/music_ability/?cids="+e)},e.prototype.getClassesAbility=function(e){return this.http.get(a.environment.basePath+"test/class/ability/statistics?cids="+e)},e.prototype.getClassSubAbility=function(e,t){var n=new s.HttpParams({fromObject:{cid:e,ca:t}});return this.http.get(a.environment.basePath+"test/class/sub_ability/statistics?"+n)},e.prototype.getClassSubMusicKnowlegde=function(e,t){return this.http.get(a.environment.basePath+"test/class/sub_knowledge/statistics?cid="+e+"&knowledge="+t)},e.prototype.getQuestionByCidSourceKnowledgeNo=function(e,t,n){var o=new s.HttpParams({fromObject:{cid:e,source:t,knowledgeNo:n}});return this.http.get(a.environment.basePath+"test/class/knowledge_questions?"+o)},e.prototype.getQuestionByCidSourceSubAbility=function(e,t,n){var o=new s.HttpParams({fromObject:{cid:e,source:t,ca:n}});return this.http.get(a.environment.basePath+"test/class/ability_questions?"+o)},e.prototype.getQuestionDetailOfClass=function(e,t){var n=new s.HttpParams({fromObject:{cid:e,qid:t}});return this.http.get(a.environment.basePath+"test/class/question/answer_details?"+n)},e.prototype.getClassesMusicKnowledge=function(e){return this.http.get(a.environment.basePath+"test/class/knowledge/statistics?cids="+e)},e.prototype.getGradesMusicKnowledgeAbility=function(e,t){return this.http.get(a.environment.basePath+"test/grade/music_ability?gid="+e+"&sid="+t)},e.prototype.getCreationMaluations=function(){return this.http.get(a.environment.basePath+"test/creation/maluations")},e.prototype.getArtActMaluations=function(){return this.http.get(a.environment.basePath+"test/art_act/maluations")},e.prototype.getTopLevelKnowledge=function(){return this.http.get(a.environment.basePath+"test/knowledge/top_level")},e.prototype.getSecondLevelKnowledge=function(e){return this.http.get(a.environment.basePath+"test/knowledge/second_level?knowledge_no="+e)},e=o([r.Injectable(),i("design:paramtypes",[s.HttpClient])],e)}();t.TestAnalysisService=l},770:function(e,t){e.exports=":host{margin-top:50px}\n"},771:function(e,t){e.exports=' <global-css></global-css> <div [class]="tool_tree_view_class" (click)="click_all($event)"> <modal-loding [visible]="modal_loding" [title]="\'正在请求...\'"></modal-loding> <div class="lay-aside"> <div class="aside-box"> <div class="aside-wrap"> <ul class="nav-box"> <li class="nav-list" [class.active]="current_sidebar==\'disk\'" (click)="current_sidebar=\'disk\';refresh();"> <a [routerLink]="[\'./\', \'disk\']" class="link all" title="我的资源"><i></i>我的资源</a> </li> <li class="nav-list" [class.active]="current_sidebar==\'videos\'" (click)="current_sidebar=\'videos\';refresh();"> <a [routerLink]="[\'./\', \'videos\']" class="link video" title="视频"><i></i>视频文件(<span>{{count_videos}}</span>)</a> </li> <li class="nav-list" [class.active]="current_sidebar==\'audios\'" (click)="current_sidebar=\'audios\';refresh();"> <a [routerLink]="[\'./\', \'audios\']" class="link voice" title="音频"><i></i>音频文件(<span>{{count_audios}}</span>)</a> </li> <li class="nav-list" [class.active]="current_sidebar==\'documents\'" (click)="current_sidebar=\'documents\';refresh();"> <a [routerLink]="[\'./\', \'documents\']" class="link doc" title="文档"><i></i>文档文件(<span>{{count_documents}}</span>)</a> </li> <li class="nav-list" [class.active]="current_sidebar==\'imgs\'" (click)="current_sidebar=\'imgs\';refresh();"> <a [routerLink]="[\'./\', \'imgs\']" class="link pic" title="图片"><i></i>图片文件(<span>{{count_imgs}}</span>)</a> </li> <li class="nav-list" [class.active]="current_sidebar==\'others\'" (click)="current_sidebar=\'others\';refresh();"> <a [routerLink]="[\'./\', \'others\']" class="link all" title="其它"><i></i>其它文件(<span>{{count_others}}</span>)</a> </li> <li class="nav-list" [class.active]="current_sidebar==\'recycle\'" (click)="current_sidebar=\'recycle\';refresh();"> <a [routerLink]="[\'./\', \'recycle\']" class="link recycle" title="回收站"><i></i>回收站</a> </li> <li class="nav-list"></li> <li class="nav-list"></li> </ul> </div> </div> </div> <div id="_main_bar1" class="lay-main-toolbar"> <div id="_disk_default_toolbar" class="toolbar-btn clear disk-toolbar"> <div class="btn-message" style="display: flex;"> <a class="g-btn g-btn-gray" *ngIf="current_sidebar==\'disk\'&& !current_question_sidebar"> <nz-upload nzAction="resource/{{userId}}/folder/upload" [nzData]="uploadData" [nzBeforeUpload]="_beforUpload" [nzShowUploadList]="false" [nzHeaders]="{\'Content-Type\': \'application/x-www-form-urlencoded;charset=UTF-8\'}" [nzCustomRequest]="click_uploadResource"><span class="btn-inner"><i class="ico ico-note"></i><span class="text">上传资源</span></span> </nz-upload> </a> <a class="g-btn g-btn-gray" *ngIf="current_sidebar==\'disk\'&& !current_question_sidebar" (click)="newFolder()"><span class="btn-inner"><i class="ico ico-mkdir"></i><span class="text">新建文件夹</span></span></a> <a class="g-btn g-btn-gray" *ngIf="current_sidebar==\'friendShare\'&& !current_question_sidebar" (click)="click_delFriendShare()"><span class="btn-inner"><i class="ico ico-del"></i><span class="text">删除</span></span></a> <a data-btn-id="emptyrecycle" class="g-btn g-btn-gray" *ngIf="current_sidebar==\'recycle\'&& !current_question_sidebar" (click)="clearRecycle(userId)"><span class="btn-inner"><i class="ico ico ico-emptyrecycle"></i><span class="text">清空回收站</span></span></a> <a class="g-btn g-btn-gray" *ngIf="!current_question_sidebar" (click)="refresh()"><span class="btn-inner minpad"><i class="ico ico-ref"></i><span class="text"></span></span></a> <a class="g-btn g-btn-gray" href="javascript:;" *ngIf="current_question_sidebar" (click)="click_questionAdd(dl)"><span class="btn-inner"><i class="anticon anticon-plus"></i>添加题目</span></a> <a class="g-btn g-btn-gray" href="javascript:;" *ngIf="current_question_sidebar" (click)="showModalForComponent()"><span class="btn-inner"><i class="ico ico-share"></i><span class="text">复制</span></span></a> <a class="g-btn g-btn-gray" href="javascript:;" *ngIf="current_question_sidebar" (click)="click_moveQuention()"><span class="btn-inner"><i class="ico ico-move"></i><span class="text">移动到</span></span></a> <a class="g-btn g-btn-gray" href="javascript:;" *ngIf="current_question_sidebar" (click)="click_deleteQuention()"><span class="btn-inner"><i class="ico ico-del"></i><span class="text">删除</span></span></a> <a class="g-btn g-btn-gray" href="javascript:;" *ngIf="current_question_sidebar" (click)="click_editQuention()"><span class="btn-inner"><i class="ico ico-del"></i><span class="text">编辑</span></span></a> </div> <div class="header-search" *ngIf="current_sidebar==\'disk\'"> <div class="beautiful-input r"><span class="ico r" (click)="click_search(search_input.value)"></span> <input #search_input type="text" maxlength="40" aria-label="请输入关键字" placeholder="请输入关键字" (keyup.enter)="click_search(search_input.value)"> </div> </div> </div> </div> <div id="_main_bar2" class="lay-main-head" *ngIf="current_sidebar==\'disk\'"> <div id="_disk_file_path" class="inner"> <div class="wrap"> <label class="nz-checkall" nz-checkbox [(ngModel)]="_allChecked" [nzIndeterminate]="_indeterminate" (ngModelChange)="_checkAll($event)"></label> <div class="main-path" *ngIf="pathList"> <a tabindex="0" *ngFor="let path of pathList" (click)="click_path(path)" hidefocus="on" [style.z-index]="path.zIndex" class="path current"><span>{{path.name}}</span></a> </div> </div> </div> </div> <div id="_main_share_header" class="lay-main-head" *ngIf="current_sidebar==\'share\'"> <div class="inner"> <div class="share-head"> <span class="list name"><span class="wrap"><span class="inner">名称<label class="checkall" data-action="checkall" data-no-selection=""></label></span></span> </span> <span class="list time"><span class="wrap"><span class="inner">分享时间<i class="gap"></i></span></span> </span> <span class="list turnload"><span class="wrap"><span class="inner">转存次数<i class="gap"></i></span></span> </span> <span class="list view"><span class="wrap"><span class="inner">浏览次数<i class="gap"></i></span></span> </span> <span class="list download"><span class="wrap"><span class="inner">下载次数<i class="gap"></i></span></span> </span> </div> </div> </div> <div class="lay-main-head" *ngIf="current_sidebar==\'recycle\'"> <div class="inner"> <label class="nz-checkall" nz-checkbox [(ngModel)]="_allChecked" [nzIndeterminate]="_indeterminate" (ngModelChange)="_checkAll($event)"></label> <div class="recycle-head"> <span class="list name"><span class="wrap"><span class="inner">文件名</span></span> </span> <span class="list time"><span class="wrap"></span> </span> </div> </div> </div> <div id="_main_content" class="lay-main-con" (contextmenu)="onContextmenu($event,\'main\',null)"> <div class="inner"> <div id="_main_box" class="wrap"> <div [class]="tool_grid_view_class" data-label-for-aria="列表内容区域"> <div id="file_list" #fileList class="files clearfix"> <div *ngIf="current_sidebar==\'disk\'||current_sidebar==\'recycle\'"> <div *ngFor="let dl of (directoryList|folders)" (dblclick)="openFolder(dl)" (click)="click_yunfileResource(dl)" (contextmenu)="onContextmenu($event,\'folder\',dl)" class="list-wrap ui-draggable ui-droppable yunfile_resource yunfile_resource_folder {{dl.checked?\'ui-selected\':\'\'}}"> <div class="list clear"> <label class="checkbox" nz-checkbox [(ngModel)]="dl.checked" (ngModelChange)="_refreshStatus($event)" click-stop-propagation></label> <span data-action="enter" class="img"><i class="filetype icon-folder"> </i><i class="isShare" *ngIf="dl.isShare==1"></i></span> <span data-action="enter" class="name"><p class="text"><em><span [class]="dl.file_name_focus" title="{{dl.name}}" (blur)="blur_rename(dl,$event)" (click)="click_rename(dl)" [attr.contenteditable]="dl.contenteditable">{{dl.name}}</span></em></p></span> <span data-action="enter" class="tool"> <a *ngIf="current_sidebar==\'disk\'" (click)="musicDelete(dl)" title="删除"><span class="ico ico-del"></span></a> <a *ngIf="current_sidebar==\'recycle\'" (click)="trueDelete(dl)" title="彻底删除"><span class="ico ico-del"></span></a> <a *ngIf="current_sidebar==\'disk\'" (click)="click_li_tool_reName(dl)" title="重命名"><span class="ico ico-rename"></span></a> <a *ngIf="current_sidebar==\'recycle\'" (click)="restoreFolder(dl)" title="还原"><span class="ico ico-move"></span></a> <a *ngIf="current_sidebar==\'disk\'" (click)="openFolder(dl)" title="打开"><span class="ico ico-preview"></span></a> </span> <span data-action="enter" class="status"></span> <span data-action="enter" class="size"></span> </div> </div> <div *ngFor="let dl of (directoryList|papers)" (click)="click_yunfileResource(dl)" (contextmenu)="onContextmenu($event,\'papaer\',dl)" class="list-wrap ui-draggable ui-droppable yunfile_resource yunfile_resource_folder {{dl.checked?\'ui-selected\':\'\'}}"> <div class="list clear"> <label class="checkbox" nz-checkbox [(ngModel)]="dl.checked" (ngModelChange)="_refreshStatus($event)" click-stop-propagation></label> <span data-action="enter" class="img"><i class="filetype icon-{{dl.ext}}"> </i><i class="isShare" *ngIf="dl.isShare==1"></i></span> <span data-action="enter" class="name"><p class="text"><em><span [class]="dl.file_name_focus" title="{{dl.name}}" [attr.contenteditable]="dl.contenteditable">{{dl.name}}</span></em></p></span> <span data-action="enter" class="tool"> <a *ngIf="current_sidebar==\'disk\'" (click)="musicDelete(dl)" title="删除"><span class="ico ico-del"></span></a> <a *ngIf="current_sidebar==\'disk\'" download="{{dl.name}}" href="resource/{{dl.id}}/file" title="下载"><span class="ico ico-down"></span></a> <a *ngIf="current_sidebar==\'recycle\'" (click)="trueDelete(dl)" title="彻底删除"><span class="ico ico-del"></span></a> <a *ngIf="current_sidebar==\'recycle\'" (click)="restoreFile(dl)" title="还原"><span class="ico ico-move"></span></a> <span data-action="enter" class="status"></span> <span data-action="enter" class="size"></span> </span> </div> </div> </div> <div *ngIf="{\'videos\':1,\'audios\':1,\'documents\':1,\'imgs\':1,\'others\':1}[current_sidebar]"> <div *ngFor="let dl of (typeDirectoryList|papers)" (click)="click_yunfileResource(dl)" (contextmenu)="onContextmenu($event,\'papaer\',dl)" class="list-wrap ui-draggable ui-droppable yunfile_resource yunfile_resource_folder {{dl.checked?\'ui-selected\':\'\'}}"> <div class="list clear"> <label class="checkbox" nz-checkbox [(ngModel)]="dl.checked" (ngModelChange)="_refreshStatus($event)" click-stop-propagation></label> <span data-action="enter" class="img"><i class="filetype icon-{{dl.ext}}"> </i><i class="isShare" *ngIf="dl.isShare==1"></i></span> <span data-action="enter" class="name"><p class="text"><em><span [class]="dl.file_name_focus" title="{{dl.name}}" [attr.contenteditable]="dl.contenteditable">{{dl.name}}</span></em></p></span> <span data-action="enter" class="tool"> <a *ngIf="current_sidebar==\'disk\'" (click)="musicDelete(dl)" title="删除"><span class="ico ico-del"></span></a> <a download="{{dl.name}}" href="resource/{{dl.id}}/file" title="下载"><span class="ico ico-down"></span></a> <span data-action="enter" class="status"></span> <span data-action="enter" class="size"></span> </span> </div> </div> </div> </div> </div> </div> </div> </div> <div id="_disk_sidebar" class="dbview-nav"> <tree-view *ngIf="directoryList != null" [directoryList]="directoryTree" [deep]="0" (onClickLi)="click_tree_li($event)"></tree-view> </div> </div>   <div class="footer">选中：{{_checkedNumber}}，总共：{{directoryList.length}}</div> <nz-modal [nzVisible]="modal_share" [nzTitle]="\'分享\'" [nzWidth]="650" [nzContent]="modalContent_share" (nzOnCancel)="handleCancel($event)" (nzOnOk)="handleOk($event)"> <ng-template #modalContent_share> <ul class="nav nav-tabs nav-justified" role="tablist" id="myTab"> <li role="presentation" class="active"> <a href="#flink" aria-controls="flink" role="tab" data-toggle="tab">对象分享</a> </li> </ul> <div class="tab-content content-line"> </div> </ng-template> </nz-modal> <modal-move *ngIf="modal_move" [visible]="modal_move" [title]="\'移动\'" [directoryList]="moveTree" [folder]="true" [(selectedItem)]="move_tree_selectedItem" (click_move_li)="getMoveTreeList($event)" (onCancel)="move_handleCancel($event)" (onOk)="move_handleOk($event)"></modal-move> <modal-move *ngIf="modal_recycle" [visible]="modal_recycle" [title]="\'还原\'" [directoryList]="moveTree" [folder]="true" [(selectedItem)]="move_tree_selectedItem" (click_move_li)="getMoveTreeList($event)" (onCancel)="recoveryTo_handleCancel($event)" (onOk)="recoveryTo_handleOk($event)"></modal-move> <library-add *ngIf="library_upt" [isVisible]="library_upt" [title]="\'修改题集\'" [lib_old]="library_upt_old" (onCancel)="library_upt_handleCancel($event)" (onOk)="library_upt_handleOk($event)"></library-add> <library-add *ngIf="library_add" [isVisible]="library_add" [title]="\'创建题集\'" [lib_old]="library_upt_old" (onCancel)="library_add_handleCancel($event)" (onOk)="library_add_handleOk($event)"></library-add> <context-menu *ngIf="current_sidebar==\'disk\'" [checkedNumber]="_checkedNumber" [(_hidden)]="context_menu_visible" [type]="context_menu_type" [event]="context_menu_event" (onclickMenu)="context_menu_click($event)"></context-menu> '},772:function(e,t){e.exports="*{box-sizing:content-box !important}:host{flex:1;display:flex;flex-direction:column}\n"},773:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(426),i=n(427),r=n(428),s=n(429),a=n(430),l=n(431);t.ClassesRoute=[{path:"",component:o.ClassesComponent,children:[{path:"",redirectTo:"myClasses",pathMatch:"full"},{path:"myClasses",component:i.MyClassesComponent,children:[{path:"",redirectTo:"../myClasses",pathMatch:"full"}]},{path:"myClasses/classDetail/:id",component:r.ClassDetailComponent},{path:"myClasses/classDetail/:id/homework",component:a.ClassHomeworkDetailComponent},{path:"myClasses/classEditor/:id",component:s.EditClassComponent},{path:"questionLab",component:l.QuestionLabComponent,pathMatch:"full"}]}]},774:function(e,t){e.exports='<nz-layout class="layout" style="flex: 1;display: flex;"> <nz-sider [nzWidth]="220" style="background:#fff"> <ul nz-menu [nzMode]="\'inline\'" style="width: 100%;height: 100%;"> <li nz-menu-item routerLinkActive="ant-menu-item-selected"> <a [routerLink]="[\'myClasses\']"><span title><i class="anticon anticon-book"></i>我的课堂</span></a> </li> </ul> </nz-sider> <nz-content style="padding:20px;background:#fff;flex: 1;"> <router-outlet></router-outlet> </nz-content> </nz-layout> '},775:function(e,t){e.exports=":host{flex:1;display:flex;flex-direction:column}:host nz-content{background-color:#ececec}\n"},777:function(e,t){e.exports='<nz-spin [nzSpinning]="_isSpinning"> <form nz-form [formGroup]="validateForm" (ngSubmit)="_submitForm()" *ngIf="!userInfo.isTeacher"> <div nz-form-item nz-row> <div nz-form-label nz-col [nzSm]="6" [nzXs]="24"> <label for="code" nz-form-item-required>请输入课堂代码</label> </div> <div nz-form-control nz-col [nzSm]="14" [nzXs]="24"> <div nz-row [nzGutter]="8"> <div nz-col [nzSpan]="12"> <nz-input [nzSize]="\'large\'" formControlName="code" [nzId]="\'code\'" nzPlaceHolder="请输入课程邀请码"></nz-input> </div> <div nz-col [nzSpan]="12"> <button nz-button [nzSize]="\'large\'">加入课堂</button> </div> </div> <div nz-form-explain *ngIf="getFormControl(\'code\').dirty&&getFormControl(\'code\').hasError(\'required\')"> 请输入课程邀请码 </div> </div> </div> </form> <div nz-row [nzGutter]="8"> <app-class-ceil nz-col [nzSpan]="6" *ngFor="let class of _classes" [_class]="class" (_classChange)="onDelete($event)"></app-class-ceil> </div> </nz-spin> <div *ngIf="userInfo.isTeacher && !_isSpinning" style="margin-bottom:20px; position: fixed; bottom: 0; right: 20px;"> <button class="class-add" nz-button [nzType]="\'primary\'" [nzSize]="\'large\'" [nzShape]="\'circle\'" (click)="this.template_classAdd = true;" style="width: 80px;height: 80px;" title="新增课程"> <i class="anticon anticon-plus" style="font-size: 80px;line-height: 80px;"></i> </button> </div> <nz-modal [nzVisible]="this.template_classAdd" nzTitle="新增课堂" [nzContent]="modalContent" (nzOnOk)="this.submitAddClass($event,classForm.value);" (nzOnCancel)="this.template_classAdd = false;"> <ng-template #modalContent> <form nz-form [formGroup]="this.classForm"> <div nz-form-item nz-row> <div nz-form-label nz-col [nzSm]="6" [nzXs]="24"> <label for="title" nz-form-item-required>课堂名称</label> </div> <div nz-form-control nz-col [nzSm]="14" [nzXs]="24" nzHasFeedback> <input formControlName="title" id="\'title\'" nz-input> <div nz-form-explain *ngIf="getFormControl(\'title\').dirty&&!getFormControl(\'title\').value">请填写课堂名称 </div> </div> </div> <div nz-form-item nz-row> <div nz-form-label nz-col [nzSm]="6" [nzXs]="24"> <label for="selectClassId" nz-form-item-required>年级</label> </div> <div nz-form-control nz-col [nzSm]="14" [nzXs]="24" nzHasFeedback> <nz-select formControlName="selectGradeId" [nzPlaceHolder]="\'请选择年级\'" [nzDisabled]="false" id="\'selectGradeId\'" (ngModelChange)="gradeChange($event)"> <nz-option *ngFor="let data of gradeData" [nzLabel]="data.name" [nzValue]="data.id"></nz-option> </nz-select> <div nz-form-explain *ngIf="getFormControl(\'selectGradeId\').dirty&&!getFormControl(\'selectGradeId\').value">请选择年级 </div> </div> </div> <div nz-form-item nz-row> <div nz-form-label nz-col [nzSm]="6" [nzXs]="24"> <label for="imgTfileId" nz-form-item-required>教材封面</label> </div> <div nz-form-control nz-col [nzSm]="14" [nzXs]="24" nzHasFeedback> <nz-input [nzSize]="\'large\'" [nzId]="\'imgTfileId\'" [nzType]="\'file\'" (change)="onChange($event)"></nz-input> <div nz-form-explain *ngIf="getFormControl(\'imgTfileId\').dirty&&!_file" style="color: red;">请上传教材封面！ </div> </div> </div> <div nz-form-item nz-row> <div nz-form-label nz-col [nzSm]="6" [nzXs]="24"> <label for="materialId" nz-form-item-required>教材</label> </div> <div nz-form-control nz-col [nzSm]="14" [nzXs]="24" nzHasFeedback> <nz-select formControlName="materialId" [nzPlaceHolder]="\'选择教材\'" [nzDisabled]="_gradeReady" id="\'materialId\'"> <nz-option *ngFor="let data of teachFormData" [nzLabel]="data.title" [nzValue]="data.id"></nz-option> </nz-select> <div nz-form-explain *ngIf="getFormControl(\'materialId\').dirty&&!getFormControl(\'materialId\').value">请选择教材 </div> </div> </div> <div nz-form-item nz-row> <div nz-form-label nz-col [nzSm]="6" [nzXs]="24"> <label for="selectClassId" nz-form-item-required>班级</label> </div> <div nz-form-control nz-col [nzSm]="14" [nzXs]="24" nzHasFeedback> <nz-select formControlName="selectClassId" [nzPlaceHolder]="\'选择班级\'" [nzDisabled]="_gradeReady" id="\'selectClassId\'"> <nz-option *ngFor="let data of _gradeClassData" [nzLabel]="data.name" [nzValue]="data.id"></nz-option> </nz-select> <div nz-form-explain *ngIf="getFormControl(\'selectClassId\').dirty&&!getFormControl(\'selectClassId\').value">请选择班级 </div> </div> </div> </form> </ng-template> </nz-modal> '},778:function(e,t){e.exports=":host{position:relative}\n"},779:function(e,t){e.exports=' <div class="detail-head"> <label>课程码：{{roomCode}}</label><label>课程名称：{{roomTitle}}</label> </div> <br> <nz-tabset (nzSelectChange)="selectChange($event)"> <nz-tab> <ng-template #nzTabHeading> 章节 </ng-template> <span> <nz-collapseset [nzAccordion]="true"> <nz-collapse *ngFor="let chapter of chapters let i = index" [nzTitle]="chapter.title" [nzActive]="false"> <app-class-chapter-detail [userId]="this.userInfo.userId" [bookId]="this.bookId" [chapterId]="chapter?.cid" [roomId]="roomId"></app-class-chapter-detail> </nz-collapse> </nz-collapseset> </span> </nz-tab> <nz-tab> <ng-template #nzTabHeading> 成员 </ng-template> <span nz-row> <button *ngIf="this.userInfo.is_teacher" nz-button [nzType]="\'primary\'" (click)="this._groupTemplate_title=true;this._groupAdd=true;"> <span>添加小组</span> </button> <fieldset nz-row> <legend><i class="anticon anticon-team"></i>&nbsp;小组</legend> <div nz-row [nzGutter]="4"> <p *ngIf="!_groups">这里显示小组</p> <div nz-col [nzSpan]="4" *ngFor="let group of _groups"> <app-class-group [gid]="group.id" [_groups]="this._groups" [classroomId]="this.roomId" (onDelete)="this.groupDelete($event);" (onChange)="this.groupChangeName($event);" [groupTitle]="group.title"></app-class-group> </div> </div> </fieldset> <fieldset nz-row class="all-member" *ngIf="_unGroupedGroup && this.userInfo.is_teacher"> <legend><i class="anticon anticon-contacts"></i>&nbsp;未分组成员</legend> <nz-card nz-col [nzSpan]="4" *ngFor="let student of _unGroupedGroup; let i = index"> <ng-template #body style="position: relative;"> <p *ngIf="userInfo.is_teacher" style="position: absolute;right: 5px;top: 5px;"> <nz-popconfirm [nzTitle]="\'确定移除改成员？\'" (nzOnConfirm)="deleteStudent(student.id)" (nzOnCancel)="return;" [nzPlacement]="\'right\'"> <button nz-popconfirm nz-button class="ant-btn" style="background-color:inherit;color: black;border: none;"><i class="anticon anticon-close"></i> </button> </nz-popconfirm> </p> <span>{{student?.name||student?.email}}</span> <button nz-button class="ant-btn" [nzType]="\'primary\'" [nzShape]="\'circle\'" title="修改分组" (click)="this._groupTemplate_singleMemberSet = true;this._currentStudent = student.id;"> <i class="anticon anticon-usergroup-add"></i> </button> </ng-template> </nz-card> <p *ngIf="!students"> 本课堂没有学生。 </p> </fieldset> </span> </nz-tab> <nz-tab> <ng-template #nzTabHeading> 作业 </ng-template> <span> <nz-collapseset [nzAccordion]="false"> <nz-collapse *ngFor="let chapter of chapters let i = index" [nzTitle]="chapter.title" [nzActive]="false"> <app-chapter-homework [roomId]="this.roomId" [chapterId]="chapter.cid" [studentList]="this.students"></app-chapter-homework> </nz-collapse> </nz-collapseset> </span> </nz-tab> </nz-tabset> <nz-modal [nzVisible]="this._groupTemplate_title" [nzTitle]="this._groupAdd?\'添加小组\':\'修改小组\'" [nzContent]="modalContent" (nzOnCancel)="this._groupTemplate_title = false;" (nzOnOk)="submitForm($event,validateForm.value)"> <ng-template #modalContent> <form nz-form [formGroup]="validateForm"> <div nz-form-item nz-row> <div nz-form-label nz-col [nzSm]="6" [nzXs]="24"> <label for="groupName" nz-form-item-required>小组名称</label> </div> <div nz-form-control nz-col [nzSm]="14" [nzXs]="24" nzHasFeedback> <nz-input [nzSize]="\'large\'" formControlName="groupName" [nzId]="\'groupName\'"></nz-input> <div nz-form-explain *ngIf="getFormControl(\'groupName\').dirty&&!getFormControl(\'groupName\').value">请输入小组名称 </div> </div> </div> </form> </ng-template> </nz-modal> <nz-modal [nzVisible]="this._groupTemplate_singleMemberSet" [nzTitle]="\'添加小组\'" [nzContent]="singleMemberSetContent" (nzOnCancel)="this._groupTemplate_singleMemberSet = false;this._singleGroupId = \'\';" (nzOnOk)="this.singleSubmit([this._currentStudent],this.roomId,\'\',this._singleGroupId);this._singleGroupId = \'\';"> <ng-template #singleMemberSetContent> <nz-select style="width: 100%;" [nzPlaceHolder]="\'请选择目标小组\'" [(ngModel)]="this._singleGroupId"> <nz-option *ngFor="let group of _groups" [nzLabel]="group.title" [nzValue]="group.id"></nz-option> </nz-select> <div *ngIf="!this._singleGroupId" style="color: red;">请选择小组 </div> </ng-template> </nz-modal> <nz-modal [nzVisible]="this._groupTemplate_groupMemberSet" [nzTitle]="\'组员修改\'" [nzContent]="groupMemberSetContent" (nzOnCancel)="this._groupTemplate_groupMemberSet = false;this._cleanUp();" (nzOnOk)="this._groupTemplate_groupMemberSet = false;this._cleanUp();"> <ng-template #groupMemberSetContent> <nz-select #groupTarget *ngIf="!this._targetGroup.id;" style="width: 100%;" [nzPlaceHolder]="\'请选择目标小组\'" [(ngModel)]="this._targetGroup.id" (ngModelChange)="setTargetGroup(this._targetGroup.id)"> <template *ngFor="let group of _groups"> <nz-option *ngIf="group.title!==this._currentGroup.title;" [nzLabel]="group.title" [nzValue]="group.id"></nz-option> </template> </nz-select> <nz-transfer *ngIf="this._targetGroup.id;" [nzDataSource]="list" [nzTitles]="[this._currentGroup.title||\'Source\', this._targetGroup.title||\'Target\']" (nzSelectChange)="select($event)" (nzChange)="change($event)"> </nz-transfer> </ng-template> </nz-modal> '},780:function(e,t){e.exports="\ufeff:host ::ng-deep fieldset{border:1px dashed #e5e5e5;padding:10px;margin-top:15px;transition:all 0.2s ease-in-out 0s}:host ::ng-deep fieldset:hover{border:1px solid #4993ec}:host ::ng-deep fieldset.all-member .ant-card-body{display:flex;justify-content:space-between;align-items:center}:host ::ng-deep legend{border:none;width:auto;display:inline-block;margin:0;padding:0 10px;font-size:13px;color:#434A54}:host ::ng-deep .detail-head label{font:bold normal 16px 'Microsoft YaHei,苹方';margin-right:20px}\n"},781:function(e,t){e.exports="<p>房间id：{{roomId}}</p> "},782:function(e,t){e.exports=""},783:function(e,t){e.exports='<section> <button nz-button [nzType]="\'primary\'" [routerLink]="\'../\'"> <span>返回上一级</span> </button> <button nz-button [nzLoading]="this.rateLoading" [disabled]="this.rateLoading" [nzType]="\'primary\'" *ngIf="this.taskType == 2" (click)="this.rateAllSelectquestion()"> <span>一键批改选择题</span> </button> </section> <div style="margin-bottom:20px; position: fixed; bottom: 0; right: 20px;" *ngIf="this.taskType == 1"> <button class="class-add" nz-button [nzType]="\'primary\'" [nzSize]="\'large\'" [nzShape]="\'circle\'" style="width: 80px;height: 80px;" title="新增题目" (click)="this.question_bind_model = true;this.formClear();"> <i class="anticon anticon-plus" style="font-size: 80px;line-height: 80px;"></i> </button> </div> <div style="margin-bottom:20px; position: fixed; bottom: 0; right: 20px;" *ngIf="this.taskType == 3"> <button class="class-add" nz-button [nzType]="\'primary\'" [nzSize]="\'large\'" [nzShape]="\'circle\'" style="width: 80px;height: 80px;" title="提交作业" (click)="this.submitAnswer();"> <i class="anticon anticon-to-top" style="font-size: 80px;line-height: 80px;"></i> </button> </div> <section *ngIf="this.taskType == 1"> <div *ngFor="let _question of this.questionList; let i = index;"> <app-single-choice-question *ngIf="_question.question_type === \'SINGLE_SELECT\'" [options]="_question" [status]="1"></app-single-choice-question> <app-multiple-choice-question *ngIf="_question.question_type === \'MULTI_SELECT\'" [options]="_question" [status]="1"></app-multiple-choice-question> <app-short-answer-question *ngIf="_question.question_type === \'SHORT_ANSWER\'" [options]="_question" [index]="i" [status]="1"></app-short-answer-question> <app-visual-sing-question *ngIf="_question.question_type === \'SING\'" [options]="_question" [status]="1"></app-visual-sing-question> <button nz-button [nzType]="\'danger\'" (click)="deleteQuestion(_question.id)"> <span>删除该题</span> </button> </div> </section> <section *ngIf="this.taskType == 2"> <div *ngFor="let _question of this.questionList; let i = index;"> <app-single-choice-question *ngIf="_question.question_type === \'SINGLE_SELECT\'" [options]="_question.options" [studentAnswer]="_question.answer" [status]="2"></app-single-choice-question> <app-multiple-choice-question *ngIf="_question.question_type === \'MULTI_SELECT\'" [options]="_question.options" [studentAnswer]="_question.answer" [status]="2"></app-multiple-choice-question> <app-short-answer-question *ngIf="_question.question_type === \'SHORT_ANSWER\'" [options]="_question.options" [index]="i" [studentAnswer]="_question.answer" [status]="2"></app-short-answer-question> <app-visual-sing-question *ngIf="_question.question_type === \'SING\'" [options]="_question.options" [studentAnswer]="_question.answer" [status]="2"></app-visual-sing-question> </div> </section> <section *ngIf="this.taskType == 3"> <div *ngFor="let _question of this.questionList; let i = index;"> <app-single-choice-question *ngIf="_question.question_type === \'SINGLE_SELECT\'" [options]="_question" (answer)="this.getEmmitAnswer($event,i)" [status]="3"></app-single-choice-question> <app-multiple-choice-question *ngIf="_question.question_type === \'MULTI_SELECT\'" [options]="_question" (answer)="this.getEmmitAnswer($event,i)" [status]="3"></app-multiple-choice-question> <app-short-answer-question *ngIf="_question.question_type === \'SHORT_ANSWER\'" [options]="_question" (answer)="this.getEmmitAnswer($event,i)" [index]="i" [status]="3"></app-short-answer-question> <app-visual-sing-question *ngIf="_question.question_type === \'SING\'" [options]="_question" (answer)="this.getEmmitAnswer($event,i)" [status]="3"></app-visual-sing-question> </div> </section> <nz-modal [nzWidth]="1200" [nzVisible]="isTemplateShow" [nzTitle]="\'题目\'" [nzContent]="homeworkQuestionContent" (nzOnCancel)="isTemplateShow = false;formClear();" (nzOnOk)="submitForm()"> <ng-template #homeworkQuestionContent> <form nz-form [formGroup]="questionForm"> <div nz-form-item nz-row> <div nz-form-label nz-col [nzSm]="6" [nzXs]="24"> <label for="homeworkType" nz-form-item-required>题目类型</label> </div> <div nz-form-control nz-col [nzSm]="14" [nzXs]="24" nzHasFeedback> <nz-select style="width: 100%;" [(ngModel)]="currentQuestionType" formControlName="homeworkType" [nzPlaceHolder]="\'选择题目类型\'"> <nz-option *ngFor="let option of homeworkQuestionTypes" [nzLabel]="option.label" [nzValue]="option.value"> </nz-option> </nz-select> </div> </div> <div nz-form-item nz-row> <div nz-form-label nz-col [nzSm]="6" [nzXs]="24"> <label for="homeworkContent" nz-form-item-required>作业名称</label> </div> <div nz-form-control nz-col [nzSm]="14" [nzXs]="24" nzHasFeedback> <tiny-editor [elementId]="\'defined-tinymce-editor\'" (onEditorContentChange)="changeHomeworkTitle($event)"></tiny-editor> <div nz-form-explain *ngIf="getFormControl(\'homeworkContent\').dirty&&!getFormControl(\'homeworkContent\').value">请输入作业名称 </div> </div> </div> </form> <div nz-form-item nz-row *ngIf="this.currentQuestionType === 1"> <div nz-form-label nz-col [nzSm]="6" [nzXs]="24"> <label nz-form-item-required>作业名称</label> </div> <div nz-col [nzSm]="14" [nzXs]="24"> <div nz-row [nzType]="\'flex\'" *ngFor="let singleOption of this.singleChoiceData let i = index"> <label nz-col nzSpan="1" nz-checkbox [(ngModel)]="singleOption.isTrue" (click)="singleOptionChange(i)"> </label> <div nz-col nzSpan="22"> <nz-input [(ngModel)]="singleOption.content" [nzPlaceHolder]="\'请填写选项内容\'"></nz-input> </div> <button nz-col nzSpan="1" nz-button [nzType]="\'danger\'" class="option-delete" [nzShape]="\'circle\'" (click)="this.optionsOperator(\'single\',\'delete\', i)" title="删除选项"> <span><i class="anticon anticon-minus-circle-o"></i></span> </button> </div> <section> <button nz-button [nzType]="\'primary\'" (click)="this.optionsOperator(\'single\',\'add\')"> <span>新增选项</span> </button> </section> </div> </div> <div nz-form-item nz-row *ngIf="this.currentQuestionType === 2"> <div nz-form-label nz-col [nzSm]="6" [nzXs]="24"> <label nz-form-item-required>作业名称</label> </div> <div nz-col [nzSm]="14" [nzXs]="24"> <div nz-row [nzType]="\'flex\'" *ngFor="let multipleOption of this.multipleChoiceData let i = index"> <label nz-col nzSpan="1" nz-checkbox [(ngModel)]="multipleOption.isTrue"> </label> <div nz-col nzSpan="22"> <nz-input [(ngModel)]="multipleOption.content" [nzPlaceHolder]="\'请填写选项内容\'"></nz-input> </div> <button nz-col nzSpa="1" nz-button [nzType]="\'danger\'" class="option-delete" [nzShape]="\'circle\'" (click)="this.optionsOperator(\'multiple\',\'delete\',i)" title="删除选项"> <span><i class="anticon anticon-minus-circle-o"></i></span> </button> </div> <section> <button nz-button [nzType]="\'primary\'" (click)="this.optionsOperator(\'multiple\',\'add\')"> <span>新增选项</span> </button> </section> </div> </div> </ng-template> </nz-modal> <nz-modal [nzVisible]="this.question_bind_model" [nzTitle]="\'绑定题目\'" [nzContent]="modalContent" (nzOnCancel)="this.question_bind_model = false;" (nzOnOk)="this.homeworkBindQuestion()"> <ng-template #modalContent> <div nz-form-item nz-row> <div nz-col [nzSpan]="7" nz-form-label> <label nz-form-item-required>考试类型</label> </div> <div nz-col [nzSpan]="12" nz-form-control> <nz-select [nzPlaceHolder]="\'请选择题目\'" [(ngModel)]="this.currentQuestionId" style="width: 100%;"> <nz-option *ngFor="let question of _bindQuestionList" [nzLabel]="question.title" [nzValue]="question.id"></nz-option> </nz-select> <div nz-form-explain *ngIf="!this.currentQuestionId"> 请选择要绑定的题目! </div> </div> </div> <div nz-form-item nz-row> <div nz-col [nzSpan]="7" nz-form-label> <label nz-form-item></label> </div> <div nz-col [nzSpan]="12" nz-form-control> <nz-pagination [(nzPageIndex)]="this.allQuestionListIndex" [nzTotal]="allQuestionTotal" [nzPageSize]="20" (nzPageIndexChange)="this.getAllQuestionBankQuestion()" nzSimple></nz-pagination> </div> </div> </ng-template> </nz-modal> '},784:function(e,t){e.exports="\ufeff:host ::ng-deep .option-delete{background-color:inherit;border:none}:host ::ng-deep .answer-main-title{margin:20px 0;background-color:#f5f1f1}:host ::ng-deep .answer-main-title::before{content:'标题:';font:normal bold 20px 'yahei'}:host ::ng-deep .question-box{display:flex}:host ::ng-deep .question-display{width:80%}:host ::ng-deep .question-control{width:20%;display:flex;flex-direction:row;justify-content:center;align-items:center}:host ::ng-deep .question-type{font-size:20px;padding:10px 0}:host ::ng-deep .question-type::before,:host ::ng-deep .question-type::after{content:'·';padding:0 5px;display:inline-block;font-size:1.5em}\n"},785:function(e,t){e.exports='这里是questionLab页面 题库增加题目 题库删除题目 题库修改题目 <div style="margin-bottom:20px; position: fixed; bottom: 0; right: 20px;"> <button class="class-add" nz-button [nzType]="\'primary\'" [nzSize]="\'large\'" [nzShape]="\'circle\'" style="width: 80px;height: 80px;" title="新增题目" (click)="this.isTemplateShow = true;this.formClear();"> <i class="anticon anticon-plus" style="font-size: 80px;line-height: 80px;"></i> </button> </div> <section> <div *ngFor="let _question of this.questionList; let i = index;"> <app-single-choice-question *ngIf="_question.questionType === \'SINGLE_SELECT\'" [options]="_question" [status]="1"></app-single-choice-question> <app-multiple-choice-question *ngIf="_question.questionType === \'MULTI_SELECT\'" [options]="_question" [status]="1"></app-multiple-choice-question> <app-short-answer-question *ngIf="_question.questionType === \'SHORT_ANSWER\'" [options]="_question" [index]="i" [status]="1"></app-short-answer-question> <app-visual-sing-question *ngIf="_question.questionType === \'SING\'" [options]="_question" [status]="1"></app-visual-sing-question> </div> </section> <nz-pagination [nzPageIndex]="this.currentIndex" [nzTotal]="this.totalQuestion" nzShowTotal (nzPageIndexChange)="getQuestionList(this.currentIndex)"></nz-pagination> <nz-modal [nzWidth]="1200" [nzVisible]="isTemplateShow" [nzTitle]="\'题目\'" [nzContent]="homeworkQuestionContent" (nzOnCancel)="isTemplateShow = false;formClear();" (nzOnOk)="submitForm()"> <ng-template #homeworkQuestionContent> <form nz-form [formGroup]="this.questionForm"> <div nz-form-item nz-row> <div nz-form-label nz-col [nzSm]="6" [nzXs]="24"> <label for="homeworkType" nz-form-item-required>题目类型</label> </div> <div nz-form-control nz-col [nzSm]="14" [nzXs]="24" nzHasFeedback> <nz-select style="width: 100%;" [(ngModel)]="currentQuestionType" formControlName="homeworkType" [nzPlaceHolder]="\'选择题目类型\'"> <nz-option *ngFor="let option of homeworkQuestionTypes" [nzLabel]="option.label" [nzValue]="option.value"> </nz-option> </nz-select> </div> </div> <div nz-form-item nz-row> <div nz-form-label nz-col [nzSm]="6" [nzXs]="24"> <label for="homeworkContent" nz-form-item-required>作业名称</label> </div> <div nz-form-control nz-col [nzSm]="14" [nzXs]="24" nzHasFeedback> <tiny-editor [elementId]="\'defined-tinymce-editor\'" (onEditorContentChange)="changeHomeworkTitle($event)"></tiny-editor> <div nz-form-explain *ngIf="getFormControl(\'homeworkContent\').dirty&&!getFormControl(\'homeworkContent\').value">请输入作业名称 </div> </div> </div> </form> <div nz-form-item nz-row> <div nz-form-label nz-col [nzSm]="6" [nzXs]="24"> <label for="difficulties" nz-form-item-required>题目难度</label> </div> <div nz-form-control nz-col [nzSm]="14" [nzXs]="24"> <nz-row> <nz-col nzSpan="12"> <nz-slider [nzMin]="0" [nzMax]="1" [nzStep]="0.05" [(ngModel)]="this.questionDifficulty"></nz-slider> </nz-col> <nz-col nzSpan="4"> <nz-input-number [nzMin]="0" [nzMax]="1" [ngStyle]="{ marginLeft: \'16px\' }" [nzStep]="0.05" [(ngModel)]="this.questionDifficulty"></nz-input-number> </nz-col> </nz-row> </div> </div> <div nz-form-item nz-row *ngIf="this.currentQuestionType === 1"> <div nz-form-label nz-col [nzSm]="6" [nzXs]="24"> <label nz-form-item-required>作业名称</label> </div> <div nz-col [nzSm]="14" [nzXs]="24"> <div nz-row [nzType]="\'flex\'" *ngFor="let singleOption of this.singleChoiceData let i = index"> <label nz-col nzSpan="1" nz-checkbox [(ngModel)]="singleOption.isTrue" (click)="singleOptionChange(i)"> </label> <div nz-col nzSpan="22"> <nz-input [(ngModel)]="singleOption.content" [nzPlaceHolder]="\'请填写选项内容\'"></nz-input> </div> <button nz-col nzSpan="1" nz-button [nzType]="\'danger\'" class="option-delete" [nzShape]="\'circle\'" (click)="this.optionsOperator(\'single\',\'delete\', i)" title="删除选项"> <span><i class="anticon anticon-minus-circle-o"></i></span> </button> </div> <section> <button nz-button [nzType]="\'primary\'" (click)="this.optionsOperator(\'single\',\'add\')"> <span>新增选项</span> </button> </section> </div> </div> <div nz-form-item nz-row *ngIf="this.currentQuestionType === 2"> <div nz-form-label nz-col [nzSm]="6" [nzXs]="24"> <label nz-form-item-required>作业名称</label> </div> <div nz-col [nzSm]="14" [nzXs]="24"> <div nz-row [nzType]="\'flex\'" *ngFor="let multipleOption of this.multipleChoiceData let i = index"> <label nz-col nzSpan="1" nz-checkbox [(ngModel)]="multipleOption.isTrue"> </label> <div nz-col nzSpan="22"> <nz-input [(ngModel)]="multipleOption.content" [nzPlaceHolder]="\'请填写选项内容\'"></nz-input> </div> <button nz-col nzSpa="1" nz-button [nzType]="\'danger\'" class="option-delete" [nzShape]="\'circle\'" (click)="this.optionsOperator(\'multiple\',\'delete\',i)" title="删除选项"> <span><i class="anticon anticon-minus-circle-o"></i></span> </button> </div> <section> <button nz-button [nzType]="\'primary\'" (click)="this.optionsOperator(\'multiple\',\'add\')"> <span>新增选项</span> </button> </section> </div> </div> </ng-template> </nz-modal> '},786:function(e,t){e.exports=""},787:function(e,t,n){"use strict";var o=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,s=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(r<3?i(s):r>3?i(t,n,s):i(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var r=n(2),s=n(12),a=function(){function e(e){this.fb=e}return e.prototype._submitForm=function(){for(var e in this.validateForm.controls)e&&this.validateForm.controls[e].markAsDirty()},e.prototype.getFormControl=function(e){return this.validateForm.controls[e]},e.prototype.ngOnInit=function(){this.validateForm=this.fb.group({code:[null,[s.Validators.required]]})},e=o([r.Component({selector:"app-classes-join",template:n(788),styles:[n(789)]}),i("design:paramtypes",[s.FormBuilder])],e)}();t.ClassesJoinComponent=a},788:function(e,t){e.exports='<form nz-form [formGroup]="validateForm" (ngSubmit)="_submitForm()"> <div nz-form-item nz-row> <div nz-form-label nz-col [nzSm]="6" [nzXs]="24"> <label for="code" nz-form-item-required>Captcha</label> </div> <div nz-form-control nz-col [nzSm]="14" [nzXs]="24"> <div nz-row [nzGutter]="8"> <div nz-col [nzSpan]="12"> <nz-input [nzSize]="\'large\'" formControlName="code" [nzId]="\'code\'" nzPlaceHolder="请输入课程邀请码"></nz-input> </div> <div nz-col [nzSpan]="12"> <button nz-button [nzSize]="\'large\'">加入课堂</button> </div> </div> <div nz-form-explain *ngIf="getFormControl(\'code\').dirty&&getFormControl(\'code\').hasError(\'required\')">请输入课程邀请码</div> </div> </div> </form> '},789:function(e,t){e.exports=""},790:function(e,t,n){"use strict";var o=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,s=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(r<3?i(s):r>3?i(t,n,s):i(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var r=n(2),s=n(6),a=n(67),l=n(11),c=function(){function e(e,t,n,o){var i=this;this.message=e,this.cs=t,this.uis=n,this._message=o,this.bodyStyle={padding:0},this._classChange=new r.EventEmitter,this._cancel=function(){this.message.info("click cancel")},this.quitclass=function(e){i.cs.stuQuitClass(i.userInfo.userId,e).subscribe(function(e){200===e.code?(i._message.create("success","成员移除成功"),i.ngOnInit()):i._message.create("error","成员移除失败")},function(e){console.error(e)})},this._confirm=function(){i.cs.userDeleteClass(i._class.id).subscribe(function(e){200===e.code?(i.message.info("该课堂删除成功"),i._classChange.emit(!0)):i.message.error("该课堂删除失败")},function(e){console.error(e)})}}return e.prototype.ngOnInit=function(){this.userInfo=this.uis.getUserInfo()},o([r.Input(),i("design:type",Object)],e.prototype,"_class",void 0),o([r.Output(),i("design:type",Object)],e.prototype,"_classChange",void 0),e=o([r.Component({selector:"app-class-ceil",template:n(791),styles:[n(792)]}),i("design:paramtypes",[s.NzMessageService,a.ClassesService,l.UserInfoService,s.NzMessageService])],e)}();t.ClassCeilComponent=c},791:function(e,t){e.exports='<nz-card style="width:240px"> <ng-template #body> <div class="custom-image" [routerLink]="[\'classDetail\',_class.id]"> <nz-dropdown> <a class="ant-dropdown-link" nz-dropdown> <img alt="图片" width="100%" [src]="\'data:image/jpg;base64,\'+_class.img"/> </a> <ul nz-menu> <li nz-menu-item style="display: flex; justify-content: space-around;"> <button nz-button class="ant-btn" [routerLink]="[\'classDetail\',_class.id]">进入课堂</button> <nz-popconfirm *ngIf="userInfo.is_teacher" [nzTitle]="\'确定要删除这个课堂吗？\'" (nzOnConfirm)="_confirm()" (nzOnCancel)="_cancel()" [nzPlacement]="\'right\'"> <button nz-popconfirm nz-button class="ant-btn">删除课堂</button> </nz-popconfirm> <nz-popconfirm *ngIf="!userInfo.is_teacher" [nzTitle]="\'确定要退出这个课堂吗？\'" (nzOnConfirm)="quitclass(_class.id)" (nzOnCancel)="_cancel()" [nzPlacement]="\'right\'"> <button nz-popconfirm nz-button class="ant-btn">退出课堂</button> </nz-popconfirm> </li> </ul> </nz-dropdown> </div> <div class="custom-card" *ngIf="_class?.title"> <h3>{{_class.title}}</h3> </div> </ng-template> </nz-card> '},792:function(e,t){e.exports=":host ::ng-deep{margin-bottom:24px}:host ::ng-deep nz-card{margin:0 auto}:host ::ng-deep nz-dropdown{width:100%}:host ::ng-deep nz-dropdown .ant-dropdown-link{height:300px;display:flex;overflow:hidden;justify-content:center;align-items:center}\n"},793:function(e,t,n){"use strict";var o=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,s=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(r<3?i(s):r>3?i(t,n,s):i(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var r=n(2),s=n(67),a=n(6),l=n(68),c=n(206),d=n(32),u=n(11),p=n(28),m=(function(){}(),function(){function e(e,t,n,o,i,r){var s=this;this.cs=e,this._message=t,this.tms=n,this.ccts=o,this.http=i,this.uis=r,this.getDefaultTemplate=function(){s.ccts.getBookChapterTemplate(s.bookId,s.chapterId).subscribe(function(e){200===e.code?e.templates&&(s.chapterData=e.templates[0].chapter_resources[0].children,s.chapterTitle=e.templates[0].title,s.currTemplateTitle=e.templates[0].title):s._message.error(e.desc)},function(e){console.error(e)})},this.getPureChapter=function(){s.tms.queryChapterAllAbout(s.bookId,s.chapterId).subscribe(function(e){200===e.code?(s.pureChapterData=e.chapterAndResources,s.pureDataToCurrentData(s.pureChapterData)):s._message.create("error",e.desc)},function(e){console.error(e)})},this.getTemplateInfo=function(e,t,n){t.stopPropagation(),s.ccts.getTemplateInfo(e).subscribe(function(e){200===e.code?(s.revisingTemplateData=e.listTemplateChapterResource,s.operatingTemplate.title=n,s.revisingTemplateDataToCurrentData(s.revisingTemplateData)):s._message.error(e.desc)},function(e){console.error(e)})},this.reviseTemplateSave=function(){if(!s.operatingTemplate.title)return s._message.error("请输入模板名称"),!1;s.templateAdd?s.ccts.teacherCreateTemplate(s.userId,s.operatingTemplate.title,JSON.stringify(s.operatingTemplate.json),s.bookId,s.roomId).subscribe(function(e){200===e.code?(s._message.success("新增模板成功"),s.getTemplateList(),s.templateAdd=!1):s._message.error(e.desc)},function(e){console.error(e)}):s.ccts.reviseTemplate(s.currentTemplateId,s.operatingTemplate.title,s.operatingTemplate.json).mergeMap(function(e){if(200===e.code)return s.ccts.getTemplateInfo(s.currentTemplateId);s._message.error("保存操作失败")},function(e){console.error(e)}).subscribe(function(e){200===e.code?(s.revisingTemplateData=e.listTemplateChapterResource,s.revisingTemplateDataToCurrentData(s.revisingTemplateData)):s._message.error(e.desc)},function(e){console.error(e)})},this.templateOperationMain=function(){s.templateOperation=!s.templateOperation,s.templateList||s.getTemplateList()},this.templateOperationCancel=function(){s.templateAdd?s.templateAdd=!1:s.templateOperation=!1},this.reviseCurrentTemplate=function(e,t){if(t)return s._message.error("此模板已经是默认模板"),!1;s.ccts.classChapterSetDefaultTemplate(e,s.chapterId,s.roomId).subscribe(function(e){200===e.code?(s._message.success("操作成功"),s.getTemplateList(),s.getDefaultTemplate()):s._message.error(e.desc)},function(e){console.error(e)})},this.templateOperationAdd=function(){s.templateAdd=!0,s.pureChapterData||s.getPureChapter()},this.deleteTemplate=function(e,t){s._message.success("正在执行删除操作"),t?s._message.error("不能删除此模板，若想删除此模板，请先将其他模板设置为当前模板"):s.ccts.deleteTemplate(e).subscribe(function(e){200===e.code?(s._message.success("删除成功"),s.getTemplateList()):s._message.error(e.desc)},function(e){console.error(e)})},this.click_uploadResource=function(e){var t=new FormData;t.append("file",e.file),t.append("json",JSON.stringify({fileName:e.file.name,resourceType:"RESOURCE"})),s.http.post(p.environment.basePath+"resource/",t).subscribe(function(t){200===t.code?(s._message.create("success","上传成功"),s.templateAdd?(s.pureChapterData[s.currentIndex].resourceList[0].name=e.file.name,s.pureChapterData[s.currentIndex].resourceList[0].id=t.rid):(s.revisingTemplateData[s.currentIndex].resource.name=e.file.name,s.revisingTemplateData[s.currentIndex].resource.id=t.rid),s.operatingTemplate.json.relations[s.currentIndex].song_id=t.rid,s.operatingTemplate.json.relations[s.currentIndex].resource_id=t.rid):s._message.create("error",t.desc)},function(e){console.error(e)})},this.uploadChange=function(e,t){console.dir(e),console.log(t)},this.getTemplateList=function(){s.ccts.getClassroomChapterTemplateList(s.roomId,s.chapterId).subscribe(function(e){200===e.code?(s.templateList=e.listTemplate,s._message.create("success","获取模板列表成功"),e.listTemplate.forEach(function(e,t){e.isDefault&&(s.currTemplateTitle=e.title)})):s._message.create("error",e.desc)},function(e){console.error(e)})},this.pureDataToCurrentData=function(e){e.forEach(function(e,t){s.operatingTemplate.json.relations.push({chapter_title:e.chapter.title,chapter_id:e.chapter.id,parent_chapter_id:e.chapter.parentId,song_id:e.resourceList?e.resourceList[0].id:"",resource_id:e.resourceList?e.resourceList[0].id:""})})},this.revisingTemplateDataToCurrentData=function(e){e.forEach(function(e,t){s.operatingTemplate.json.relations.push({chapter_title:e.chapter.title,chapter_id:e.chapter.id,parent_chapter_id:e.chapter.parentId,song_id:e.resource?e.resource.id:"",resource_id:e.resource?e.resource.id:""})})},this.console=function(e){console.log(e)},this.operatingTemplate={title:"",json:{relations:[]}}}return e.prototype.ngOnInit=function(){this.templateAdd=!1,this.templateOperation=!1,this.resources={},this.isTeacher=this.uis.getUserInfo().is_teacher,this.getDefaultTemplate()},o([r.Input(),i("design:type",String)],e.prototype,"userId",void 0),o([r.Input(),i("design:type",String)],e.prototype,"chapterId",void 0),o([r.Input(),i("design:type",String)],e.prototype,"bookId",void 0),o([r.Input(),i("design:type",String)],e.prototype,"roomId",void 0),e=o([r.Component({selector:"app-class-chapter-detail",template:n(794),styles:[n(795)]}),i("design:paramtypes",[s.ClassesService,a.NzMessageService,l.TeachingMaterialService,c.ClassChapterTemplateService,d.HttpClient,u.UserInfoService])],e)}());t.ClassChapterDetailComponent=m},794:function(e,t){e.exports='<section nz-row nzType="flex" nzAlign="middle"> <span nz-col>当前模板：{{this.currTemplateTitle||\'暂无模板\'}}</span> <button *ngIf="this.isTeacher" nz-col (click)="this.templateOperationMain();" nz-button [nzType]="\'primary\'" style="margin-left: auto;"> <span>模板设置</span> </button> </section> <div> <section *ngIf="!templateOperation&&this.chapterData"> <nz-timeline *ngFor="let chapter of this.chapterData"> <nz-timeline-item> <div nz-row [nzType]="\'flex\'" [nzAlign]="\'middle\'"> <span nz-col class="chapter-title">{{chapter.ctitle}}</span> </div> </nz-timeline-item> <nz-timeline-item [nzColor]="\'red\'"> <ng-template #custom> <i class="anticon anticon-file"></i> </ng-template> {{chapter.resource_name || \'该章节暂未绑定资源\'}} </nz-timeline-item> </nz-timeline> </section> <section nz-row [nzGutter]="5" [nzType]="\'flex\'" *ngIf="templateOperation"> <div nz-col nzSpan="8"> <section class="template-title">章节模板编辑显示 <span style="color: red">{{templateAdd?\'（新增模板）\':\'（模板修改）\'}}</span> </section> <section *ngIf="!templateAdd"> 当前模板名称： <input nz-input type="text" [(ngModel)]="operatingTemplate.title" placeholder="请输入模板名称" style="width: 100px;"> <nz-timeline *ngFor="let chapter of this.revisingTemplateData; let i = index;"> <nz-timeline-item> <div nz-row [nzType]="\'flex\'" [nzAlign]="\'middle\'"> <span nz-col class="chapter-title">{{chapter.chapter.title}}</span> <nz-upload nz-col class="chapter-btn" nzAction="resource/" [nzShowUploadList]="false" (nzChange)="this.uploadChange($event,i)" [nzCustomRequest]="this.click_uploadResource"> <button nz-button (click)="this.currentIndex = i;"> <i class="anticon anticon-upload"></i><span>上传资源</span> </button> </nz-upload> </div> </nz-timeline-item> <nz-timeline-item [nzColor]="\'red\'"> <ng-template #custom> <i class="anticon anticon-file"></i> </ng-template> {{chapter.resource.name || \'该章节暂未绑定资源\'}} </nz-timeline-item> </nz-timeline> </section> <section *ngIf="templateAdd"> <nz-timeline *ngFor="let chapter of this.pureChapterData; let i = index"> <nz-timeline-item> <div nz-row [nzType]="\'flex\'" [nzAlign]="\'middle\'"> <span nz-col class="chapter-title">{{chapter.chapter.title}}</span> <nz-upload nz-col class="chapter-btn" nzAction="resource/" [nzShowUploadList]="false" (nzChange)="this.uploadChange($event,i)" [nzCustomRequest]="this.click_uploadResource"> <button nz-button (click)="this.currentIndex = i;"> <i class="anticon anticon-upload"></i><span>上传资源</span> </button> </nz-upload> </div> </nz-timeline-item> <nz-timeline-item [nzColor]="\'red\'" *ngIf="chapter.resourceList"> <ng-template #custom> <i class="anticon anticon-file"></i> </ng-template> {{chapter.resourceList[0].name || \'该章节暂未绑定资源\'}} </nz-timeline-item> </nz-timeline> </section> </div> <div nz-col nzSpan="8"> <ul class="template-operation"> <li> <button nz-button [nzType]="\'primary\'" (click)="this.reviseTemplateSave()"> <i class="anticon anticon-save"></i><span>保存</span> </button> </li> <li> <button nz-button [nzType]="\'danger\'" (click)="this.templateOperationCancel()"> <i class="anticon anticon-rollback"></i><span>取消</span> </button> </li> </ul> </div> <div nz-col nzSpan="8"> <section class="template-title">模板列表</section> <ul> <li *ngFor="let template of this.templateList"> <nz-tag (click)="this.getTemplateInfo(template.id,$event,template.title)" [nzColor]="template.isDefault?\'#87d068\':\'blue\'" nzClosable="false"> {{template.title}} </nz-tag> <nz-popconfirm *ngIf="!template.isDefault" [nzTitle]="\'确定要删除这个模板吗？\'" (nzOnConfirm)="deleteTemplate(template.id, template.isDefault)"> <a nz-popconfirm title="删除模板"><i class="anticon anticon-close"></i></a> </nz-popconfirm> <nz-popconfirm *ngIf="!template.isDefault" [nzTitle]="\'是否将此模板设置为默认模板？\'" (nzOnConfirm)="reviseCurrentTemplate(template.id, template.isDefault)"> <a nz-popconfirm title="设置为当前模板"><i class="anticon anticon-login"></i></a> </nz-popconfirm> </li> <li> <button *ngIf="!this.templateAdd" nz-button [nzType]="\'default\'" (click)="this.templateOperationAdd()"> <i class="anticon anticon-plus"></i><span>新增模板</span> </button> <input nz-input #input *ngIf="this.templateAdd" type="text" [(ngModel)]="operatingTemplate.title" placeholder="请输入模板名称" style="width: 100px;"> </li> </ul> </div> </section> </div> '},795:function(e,t){e.exports=":host ::ng-deep fieldset{border:1px dashed #e5e5e5;padding:10px;margin-top:15px;transition:all 0.2s ease-in-out 0s}:host ::ng-deep fieldset:hover{border:1px solid #4993ec}:host ::ng-deep legend{border:none;width:auto;display:inline-block;margin:0;padding:0 10px;font-size:13px;color:#434A54}:host .template-operation{display:flex;flex-direction:column;justify-content:center;align-items:center}:host .template-operation li{text-align:center;padding:15px 0}:host .chapter-btn{margin-left:auto}:host .chapter-title{overflow:hidden;white-space:nowrap;text-overflow:ellipsis}\n"},796:function(e,t,n){"use strict";var o=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,s=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(r<3?i(s):r>3?i(t,n,s):i(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var r=n(2),s=n(67),a=n(6),l=n(12),c=function(){function e(e,t,n){var o=this;this.cs=e,this._message=t,this.fb=n,this.onDelete=new r.EventEmitter,this.onChange=new r.EventEmitter,this._groupTemplate_title=!1,this._groupTemplate_singleMemberSet=!1,this._groupTemplate_groupMemberSet=!1,this._reviseGourp=!1,this.submitForm=function(){o.validateForm.controls.groupName.markAsDirty(),o.validateForm.valid&&o.reviseGroupTitle(o.gid,o.validateForm.controls.groupName.value)},this.setCurrentGroup=function(e,t){o.validateForm.controls.groupName.setValue(t)},this.reviseGroupTitle=function(e,t){o.cs.reviseGroupName(e,t).subscribe(function(e){200===e.code?(o.groupTitle=t,o._message.success("操作成功"),o.onChange.emit(!0),o._groupTemplate_title=!1):o._message.error(e.desc)},function(e){o._message.error(e)})},this.reviseGroupMember=function(e,t,n,i){e=e.filter(function(e){return e.checked}).map(function(e){return e.value}),o.cs.reviseGroupMember(e,t,n,i).subscribe(function(e){200===e.code?(o._message.success("操作成功"),o.onChange.emit(!0)):o._message.error(e.desc)},function(e){o._message.error(e)})},this.deleteGroup=function(e){o.cs.deleteGroup(e).subscribe(function(e){200===e.code?(o._message.success("操作成功"),o.onDelete.emit(!0)):o._message.error(e.desc)},function(e){o._message.error(e)})},this.groupMembersInit=function(e){o.cs.getGroupMembers(e).subscribe(function(e){200===e.code?e.students&&(o.students=o.studentListUtil(e.students)):o._message.error(e.desc)},function(e){o._message.error(e)})},this.getFormControl=function(e){return o.validateForm.controls[e]},this.studentListUtil=function(e){return e.map(function(e){return{value:e.id,label:e.name||e.email,checked:!1}})}}return e.prototype.ngOnInit=function(){var e=this;this.groupMembersInit(this.gid),this.validateForm=this.fb.group({groupName:[null,l.Validators.required]}),this._groups=this._groups.filter(function(t){return t.id!==e.gid})},o([r.Input(),i("design:type",String)],e.prototype,"classroomId",void 0),o([r.Input(),i("design:type",String)],e.prototype,"gid",void 0),o([r.Input(),i("design:type",String)],e.prototype,"groupTitle",void 0),o([r.Input(),i("design:type",Object)],e.prototype,"_groups",void 0),o([r.Output(),i("design:type",Object)],e.prototype,"onDelete",void 0),o([r.Output(),i("design:type",Object)],e.prototype,"onChange",void 0),e=o([r.Component({selector:"app-class-group",template:n(797),styles:[n(798)]}),i("design:paramtypes",[s.ClassesService,a.NzMessageService,l.FormBuilder])],e)}();t.ClassGroupComponent=c},797:function(e,t){e.exports='<nz-card> <ng-template #title> <p style="position: absolute;right: 5px;top: 0;"> <nz-popconfirm [nzTitle]="\'确定删除该组？\'" (nzOnConfirm)="deleteGroup(this.gid)" (nzOnCancel)="return;" [nzPlacement]="\'right\'"> <button *ngIf="!this._reviseGourp" nz-popconfirm nz-button class="ant-btn" title="删除该组" style="background-color:inherit;color: black;border: none;"><i class="anticon anticon-close"></i></button> </nz-popconfirm> </p> <p style="position: absolute;right: 5px;top: 0;"> <nz-popconfirm [nzTitle]="\'分组操作\'" [nzCancelText]="\'删除组员\'" [nzOkText]="\'移动组员\'" (nzOnConfirm)="this._groupTemplate_singleMemberSet = true;" (nzOnCancel)="this.reviseGroupMember(this.students,this.classroomId,this.gid,\'\');" [nzPlacement]="\'right\'"> <button *ngIf="this._reviseGourp" nz-popconfirm nz-button class="ant-btn" title="分组操作" style="background-color:inherit;color: black;border: none;"><i class="anticon anticon-setting"></i></button> </nz-popconfirm> </p> <span (dblclick)="this._groupTemplate_title=true;this.setCurrentGroup(this.gid,groupTitle);" title="{{groupTitle}}">组名：{{groupTitle}}</span> </ng-template> <ng-template #body> <nz-checkbox-group class="group-member-body" *ngIf="this.students" [(ngModel)]="this.students" (ngModelChange)="this._reviseGourp = true;"></nz-checkbox-group> <br> </ng-template> </nz-card> <nz-modal [nzVisible]="this._groupTemplate_title" [nzTitle]="this._groupAdd?\'添加小组\':\'修改小组\'" [nzContent]="modalContent_group" (nzOnCancel)="this._groupTemplate_title = false;" (nzOnOk)="submitForm($event,validateForm.value)"> <ng-template #modalContent_group> <form nz-form [formGroup]="validateForm"> <div nz-form-item nz-row> <div nz-form-label nz-col [nzSm]="6" [nzXs]="24"> <label for="groupName" nz-form-item-required>小组名称</label> </div> <div nz-form-control nz-col [nzSm]="14" [nzXs]="24" nzHasFeedback> <nz-input [nzSize]="\'large\'" formControlName="groupName" [nzId]="\'groupName\'"></nz-input> <div nz-form-explain *ngIf="getFormControl(\'groupName\').dirty&&!getFormControl(\'groupName\').value">请输入小组名称 </div> </div> </div> </form> </ng-template> </nz-modal> <nz-modal [nzVisible]="this._groupTemplate_singleMemberSet" [nzTitle]="\'添加小组\'" [nzContent]="singleMemberSetContent" (nzOnCancel)="this._groupTemplate_singleMemberSet = false;this._singleGroupId = \'\';" (nzOnOk)="this.reviseGroupMember(this.students,this.classroomId,this.gid,this._singleGroupId);this._singleGroupId = \'\';"> <ng-template #singleMemberSetContent> <nz-select style="width: 100%;" [nzPlaceHolder]="\'请选择目标小组\'" [(ngModel)]="this._singleGroupId"> <nz-option *ngFor="let group of _groups" [nzLabel]="group.title" [nzValue]="group.id"></nz-option> </nz-select> <div *ngIf="!this._singleGroupId" style="color: red;">请选择小组 </div> </ng-template> </nz-modal> '},798:function(e,t){e.exports=":host ::ng-deep .group-member-body .ant-checkbox-wrapper:nth-of-type(1){margin-left:8px}\n"},799:function(e,t,n){"use strict";var o=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,s=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(r<3?i(s):r>3?i(t,n,s):i(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var r=n(2),s=n(206),a=function(){function e(e){var t=this;this.cct=e,this.cleanTemplate=new r.EventEmitter,this.cleanYourContent=function(e){t.cleanTemplate.emit(e)}}return o([r.Input(),i("design:type",String)],e.prototype,"currentChapterData",void 0),o([r.Input(),i("design:type",String)],e.prototype,"chapterId",void 0),o([r.Input(),i("design:type",String)],e.prototype,"classroomId",void 0),o([r.Input(),i("design:type",String)],e.prototype,"teacherId",void 0),o([r.Output(),i("design:type",Object)],e.prototype,"cleanTemplate",void 0),e=o([r.Component({selector:"app-template-control",template:n(800),styles:[n(801)]}),i("design:paramtypes",[s.ClassChapterTemplateService])],e)}();t.TemplateControlComponent=a},800:function(e,t){e.exports='<div nz-row [nzType]="\'flex\'"> <section nz-col nzspan="8">模板display chapterId: {{chapterId}} teacherId: {{teacherId}} classroomId: {{classroomId}} </section> <section nz-col nzspan="8">保存修改 <button nz-button class="ant-btn" (click)="cleanYourContent(true)"> <span>清除模板</span> <i class="anticon anticon-close"></i> </button> </section> <section nz-col nzspan="8">模板list&control</section> </div> '},801:function(e,t){e.exports=""},802:function(e,t,n){"use strict";var o=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,s=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(r<3?i(s):r>3?i(t,n,s):i(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var r=n(2),s=n(11),a=n(69),l=n(6),c=function(){function e(e,t,n){var o=this;this.uis=e,this.chs=t,this._message=n,this.eventE=new r.EventEmitter,this._homeworkMembersModal=!1,this.updateHomework=function(){o.eventE.emit({homeworkStatus:"update",homeworkName:o.homeworkName,homeworkId:o.homeworkId,homeworkTypes:o.homeworkType,homeworkDeadLine:o.deadline})},this.deleteHomework=function(){o.eventE.emit({homeworkStatus:"delete",homeworkId:o.homeworkId})}}return e.prototype.ngOnInit=function(){switch(this.isEditing=!1,this.userInfo=this.uis.getUserInfo(),this.deadlineFormatData=new Date(this.deadline),this.homeworkType){case"PRE_CLASSROOM":this.homeworkTypeFormatData="课前";break;case"IN_CLASSROOM":this.homeworkTypeFormatData="课中";break;case"AFTER_CLASSROOM":this.homeworkTypeFormatData="课后"}},o([r.Input(),i("design:type",String)],e.prototype,"homeworkId",void 0),o([r.Input(),i("design:type",Object)],e.prototype,"studentLIst",void 0),o([r.Input(),i("design:type",String)],e.prototype,"homeworkName",void 0),o([r.Input(),i("design:type",Object)],e.prototype,"homeworkType",void 0),o([r.Input(),i("design:type",Object)],e.prototype,"deadline",void 0),o([r.Output(),i("design:type",Object)],e.prototype,"eventE",void 0),e=o([r.Component({selector:"app-class-homework",template:n(803),styles:[n(804)]}),i("design:paramtypes",[s.UserInfoService,a.ClassHomeworkService,l.NzMessageService])],e)}();t.ClassHomeworkComponent=c},803:function(e,t){e.exports='<nz-card nz-col [nzSpan]="6"> <ng-template #body style="position: relative;"> <p *ngIf="userInfo.is_teacher" style="position: absolute;right: 5px;top: 5px;"> <nz-popconfirm [nzTitle]="\'确定删除该作业？\'" (nzOnConfirm)="deleteHomework()" (nzOnCancel)="return;" [nzPlacement]="\'right\'"> <button nz-popconfirm nz-button class="ant-btn" title="删除作业" style="background-color:inherit;color: red;border: none;"><i class="anticon anticon-close"></i> </button> </nz-popconfirm> </p> <p *ngIf="userInfo.is_teacher" style="position: absolute;right: 25px;top: 5px;"> <button nz-button class="ant-btn" title="修改作业" (click)="updateHomework();" style="background-color:inherit;color: black;border: none;"> <i class="anticon anticon-edit"></i> </button> </p> <section class="text-name"> <span *ngIf="!this.isEditing;" title="{{homeworkName}}">作业名称：{{homeworkName}}</span> </section> <section class="text-name"> <span *ngIf="!this.isEditing;" title="{{homeworkTypeFormatData}}">作业类型：{{homeworkTypeFormatData}}</span> </section> <section class="text-name"> <span *ngIf="!this.isEditing;" title="{{deadlineFormatData.toLocaleString(\'chinese\',{hour12:false})}}">截止时间：{{deadlineFormatData.toLocaleString(\'chinese\',{hour12:false})}}</span> </section> <section> <button *ngIf="userInfo.is_teacher" nz-button [nzType]="\'primary\'" [nzShape]="\'circle\'" title="编辑作业题目" [routerLink]="[\'homework\']" [queryParams]="{\'taskId\':this.homeworkId,\'taskType\':1}"> <i class="anticon anticon-edit"></i> </button> <button *ngIf="userInfo.is_teacher" nz-button [nzType]="\'primary\'" [nzShape]="\'circle\'" title="批改作业" (click)="this._homeworkMembersModal = true;"> <i class="anticon anticon-like-o"></i> </button> <button *ngIf="!userInfo.is_teacher" nz-button [nzType]="\'primary\'" [nzShape]="\'circle\'" title="完成作业" [routerLink]="[\'homework\']" [queryParams]="{\'taskId\':this.homeworkId,\'taskType\':3}"> <i class="anticon anticon-hourglass"></i> </button> </section> </ng-template> </nz-card> <nz-modal [nzVisible]="this._homeworkMembersModal" [nzTitle]="\'班级成员\'" [nzContent]="homeworkMemberContent" (nzOnCancel)="this._homeworkMembersModal = false;" (nzOnOk)="this._homeworkMembersModal = false;"> <ng-template #homeworkMemberContent> <ul> <li *ngFor="let student of this.studentLIst"> <p>{{student.name}}</p> <button nz-button [nzType]="\'primary\'" [routerLink]="[\'homework\']" [queryParams]="{\'taskId\':this.homeworkId,\'taskType\':2,\'studentId\':student.id}"> <span> 批改作业 </span> </button> </li> </ul> </ng-template> </nz-modal> '},804:function(e,t){e.exports=".text-name{overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.text-name>span{display:block}\n"},805:function(e,t,n){"use strict";var o=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,s=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(r<3?i(s):r>3?i(t,n,s):i(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var r=n(2),s=n(12),a=n(6),l=n(69),c=n(13),d=n(11),u=function(){function e(e,t,n,o,i){var r=this;this.fb=e,this._message=t,this.router=n,this.chs=o,this.uis=i,this._addHomework=!1,this._homeworkAdd=!0,this.homeworkTypes=[{label:"课前",value:"PRE_CLASSROOM"},{label:"课中",value:"IN_CLASSROOM"},{label:"课后",value:"AFTER_CLASSROOM"}],this.getFormControl=function(e){return r._addHomeworkForm.controls[e]},this.getQuestionList=function(){r.chs.getTaskList(r.roomId,r.chapterId).subscribe(function(e){200===e.code?r.taskList=e.taskList:r._message.error(e.desc)},function(e){console.error(e)})},this.createHomework=function(e){for(var t in console.log(e),r._addHomeworkForm.controls)r._addHomeworkForm.controls[t]&&r._addHomeworkForm.controls[t].markAsDirty();r._addHomeworkForm.valid&&(r._homeworkAdd?(r.chs.createHomework({chapterId:r.chapterId,classRoomId:r.roomId,title:r._addHomeworkForm.controls.homeworkTitle.value,taskType:r._addHomeworkForm.controls.homeworkType.value,dendline:Date.parse(r._addHomeworkForm.controls.homeworkDeadline.value)}).subscribe(function(e){200===e.code?(r._message.success("新增作业成功"),r.router.navigate(["/classes/myClasses/classDetail/"+r.roomId+"/homework"],{queryParams:{taskId:e.taskId,taskType:1}})):r._message.error(e.desc)},function(e){console.error(e)}),r._addHomework=!1,r._addHomeworkForm.reset()):r.chs.updateHomework({tid:r._editingHomeworkId,title:r._addHomeworkForm.controls.homeworkTitle.value,taskType:r._addHomeworkForm.controls.homeworkType.value,dendline:Date.parse(r._addHomeworkForm.controls.homeworkDeadline.value)},r._editingHomeworkId).subscribe(function(e){200===e.code?(r._message.success("修改作业成功"),r._addHomework=!1,r.getQuestionList()):r._message.error(e.desc)},function(e){console.error(e)}))},this.deleteHomework=function(e){r.chs.deleteHomework(e).subscribe(function(e){200===e.code?(r._message.success("删除成功"),r.getQuestionList()):r._message.error(e.desc)},function(e){console.error(e)})},this.cardCallback=function(e){"update"===e.homeworkStatus&&(r._addHomeworkForm.controls.homeworkTitle.setValue(e.homeworkName),r._addHomeworkForm.controls.homeworkType.setValue(e.homeworkTypes),r._addHomeworkForm.controls.homeworkDeadline.setValue(e.homeworkDeadLine),r._editingHomeworkId=e.homeworkId,r._homeworkAdd=!1,r._addHomework=!0,r.getQuestionList()),"delete"===e.homeworkStatus&&r.deleteHomework(e.homeworkId)}}return e.prototype.ngOnInit=function(){this.isTeacher=this.uis.getUserInfo().is_teacher,this._addHomeworkForm=this.fb.group({homeworkTitle:[null,s.Validators.required],homeworkType:[null,s.Validators.required],homeworkDeadline:[null,s.Validators.required]}),this.getQuestionList()},o([r.Input(),i("design:type",String)],e.prototype,"chapterId",void 0),o([r.Input(),i("design:type",String)],e.prototype,"roomId",void 0),o([r.Input(),i("design:type",Object)],e.prototype,"studentList",void 0),e=o([r.Component({selector:"app-chapter-homework",template:n(806),styles:[n(807)]}),i("design:paramtypes",[s.FormBuilder,a.NzMessageService,c.Router,l.ClassHomeworkService,d.UserInfoService])],e)}();t.ChapterHomeworkComponent=u},806:function(e,t){e.exports='<button *ngIf="this.isTeacher" nz-button class="ant-btn" (click)="this._currentHomeworkChapterId = chapterId;this._addHomework = true;this._homeworkAdd = true;">新增作业 </button> <fieldset nz-row> <app-class-homework *ngFor="let task of this.taskList" [homeworkId]="task.id" [deadline]="task.dendline" [homeworkName]="task.title" [homeworkType]="task.taskType" [studentLIst]="this.studentList" (eventE)="cardCallback($event)"></app-class-homework> </fieldset> <nz-modal [nzVisible]="this._addHomework" [nzTitle]="this._homeworkAdd?\'新增作业\':\'修改作业\'" [nzContent]="homeworkModalContent" (nzOnCancel)="this._addHomework = false;" (nzOnOk)="createHomework($event,_addHomeworkForm.value)"> <ng-template #homeworkModalContent> <form nz-form [formGroup]="_addHomeworkForm"> <div nz-form-item nz-row> <div nz-form-label nz-col [nzSm]="6" [nzXs]="24"> <label for="homeworkTitle" nz-form-item-required>作业名称</label> </div> <div nz-form-control nz-col [nzSm]="14" [nzXs]="24" nzHasFeedback> <nz-input [nzSize]="\'large\'" formControlName="homeworkTitle" [nzId]="\'homeworkTitle\'"></nz-input> <div nz-form-explain *ngIf="getFormControl(\'homeworkTitle\').dirty&&!getFormControl(\'homeworkTitle\').value">请输入作业名称 </div> </div> </div> <div nz-form-item nz-row> <div nz-form-label nz-col [nzSm]="6" [nzXs]="24"> <label for="homeworkTitle" nz-form-item-required>作业类型</label> </div> <div nz-form-control nz-col [nzSm]="14" [nzXs]="24" nzHasFeedback> <nz-select formControlName="homeworkType" style="width: 100%;" [nzPlaceHolder]="\'选择类型\'"> <nz-option *ngFor="let option of homeworkTypes" [nzLabel]="option.label" [nzValue]="option.value"> </nz-option> </nz-select> <div nz-form-explain *ngIf="getFormControl(\'homeworkTitle\').dirty&&!getFormControl(\'homeworkTitle\').value">请选择作业类型 </div> </div> </div> <div nz-form-item nz-row> <div nz-form-label nz-col [nzSm]="6" [nzXs]="24"> <label for="homeworkDeadline" nz-form-item-required>作业截止时间</label> </div> <div nz-form-control nz-col [nzSm]="14" [nzXs]="24" nzHasFeedback> <nz-datepicker formControlName="homeworkDeadline" style="width: 100%;" nzShowTime [nzFormat]="\'YYYY-MM-DD HH:mm:ss\'" [nzPlaceHolder]="\'Start date\'"></nz-datepicker> <div nz-form-explain *ngIf="getFormControl(\'homeworkDeadline\').dirty&&!getFormControl(\'homeworkDeadline\').value">请选择截止日期 </div> </div> </div> </form> </ng-template> </nz-modal> '},807:function(e,t){e.exports=""},808:function(e,t,n){"use strict";(function(e){var o=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,s=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(r<3?i(s):r>3?i(t,n,s):i(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var r=n(2),s=n(32),a=function(){function t(e){this.http=e,this.onEditorContentChange=new r.EventEmitter}return t.prototype.ngAfterViewInit=function(){var t=this,n=this;e.init({selector:"#"+this.elementId,height:200,plugins:["link","table","image"],skin_url:"assets/skins/lightgray",setup:function(e){t.editor=e,e.on("keyup change",function(){var n=e.getContent();t.onEditorContentChange.emit(n)})},images_upload_handler:function(e,t,o){var i=new FormData;console.log(e.filename());var r=e.filename().match(/\.(\S*)/)[1];i.append("file",e.blob(),e.filename()),n.uploadFile("resource",i).subscribe(function(e){var n="D:/dd-yinyue/resource/"+e.rid+"."+r;t(n)})}})},t.prototype.uploadFile=function(e,t){var n=new s.HttpHeaders;return n.set("Content-Type","multipart/form-data"),this.http.post(e,t,{headers:n})},t.prototype.ngOnDestroy=function(){e.remove(this.editor)},o([r.Input(),i("design:type",String)],t.prototype,"elementId",void 0),o([r.Output(),i("design:type",Object)],t.prototype,"onEditorContentChange",void 0),t=o([r.Component({selector:"tiny-editor",template:n(810),styles:[n(811)]}),i("design:paramtypes",[s.HttpClient])],t)}();t.TinyEditorComponent=a}).call(t,n(809))},810:function(e,t){e.exports='<textarea id="{{elementId}}"></textarea> '},811:function(e,t,n){var o=n(812);e.exports="string"==typeof o?o:o.toString()},814:function(e,t,n){"use strict";var o=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,s=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(r<3?i(s):r>3?i(t,n,s):i(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var r=n(2),s=n(150),a=function(){function e(){var e=this;this.answer=new r.EventEmitter,this.emmitAnswer=function(){e.answer.emit(e.questionAnswer)}}return e.prototype.ngOnInit=function(){},o([r.Input(),i("design:type",Number)],e.prototype,"status",void 0),o([r.Input(),i("design:type",s.QuestionModel)],e.prototype,"options",void 0),o([r.Input(),i("design:type",Object)],e.prototype,"studentAnswer",void 0),o([r.Output(),i("design:type",Object)],e.prototype,"answer",void 0),e=o([r.Component({selector:"app-single-choice-question",template:n(815),styles:[n(816)]}),i("design:paramtypes",[])],e)}();t.SingleChoiceQuestionComponent=a},815:function(e,t){e.exports='<h3 class="question-type">单选题</h3> <div *ngIf="this.status !=2 " class=""> <section class="answer-main-title" [innerHTML]="this.options.title"> </section> <nz-radio-group [(ngModel)]="questionAnswer" (ngModelChange)="this.emmitAnswer()"> <label nz-radio *ngFor="let choice of this.options.options" [nzValue]="choice.value"> <span>{{choice.content}}</span> </label> </nz-radio-group> </div> <div *ngIf="this.status == 2"> <section class="answer-main-title" [innerHTML]="this.options.title"> </section> <ul> <li *ngFor="let choice of this.options.options"> {{choice.content}} </li> </ul> <section> <p>学生答案：<span style="color: red;">{{this.studentAnswer?.answer}}</span></p> <p *ngIf="this.studentAnswer?.isTrue != null"><strong>{{this.studentAnswer?.isTrue?"正确":"错误"}}</strong></p> <p *ngIf="this.studentAnswer?.score">分数：<span>{{this.studentAnswer?.score}}</span></p> </section> </div> '},816:function(e,t){e.exports=""},817:function(e,t,n){"use strict";var o=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,s=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(r<3?i(s):r>3?i(t,n,s):i(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var r=n(2),s=n(150),a=function(){function e(){var e=this;this.answer=new r.EventEmitter,this.questionOptions=[],this.answerList=[],this.answerEmit=function(){e.questionOptions.filter(function(e){return!0===e.checked}).forEach(function(t){e.answerList.push(t.value)}),e.answer.emit(e.answerList.join(","))}}return e.prototype.ngOnInit=function(){var e=this;this.options.options.forEach(function(t,n){e.questionOptions.push({label:t.content,value:t.value,checked:!1})})},o([r.Input(),i("design:type",Number)],e.prototype,"status",void 0),o([r.Input(),i("design:type",s.QuestionModel)],e.prototype,"options",void 0),o([r.Input(),i("design:type",Object)],e.prototype,"studentAnswer",void 0),o([r.Output(),i("design:type",Object)],e.prototype,"answer",void 0),e=o([r.Component({selector:"app-multiple-choice-question",template:n(818),styles:[n(819)]}),i("design:paramtypes",[])],e)}();t.MultipleChoiceQuestionComponent=a},818:function(e,t){e.exports='<h3 class="question-type">多选题</h3> <div *ngIf="this.status != 2"> <section class="answer-main-title" [innerHTML]="this.options.title"> </section> <section> <nz-checkbox-group [(ngModel)]="this.questionOptions" (ngModelChange)="this.answerEmit()"></nz-checkbox-group> </section> </div> <div *ngIf="this.status == 2"> <section class="answer-main-title" [innerHTML]="this.options.title"> </section> <ul> <li *ngFor="let choice of this.options.options">{{choice.content}}</li> </ul> <section> <p>学生答案：<span style="color: red;">{{this.studentAnswer?.answer}}</span></p> <p *ngIf="this.studentAnswer?.isTrue != null"><strong>{{this.studentAnswer?.isTrue?"正确":"错误"}}</strong></p> <p *ngIf="this.studentAnswer?.score">分数：<span>{{this.studentAnswer?.score}}</span></p> </section> </div> '},819:function(e,t){e.exports=""},820:function(e,t,n){"use strict";var o=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,s=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(r<3?i(s):r>3?i(t,n,s):i(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var r=n(2),s=n(150),a=n(11),l=n(6),c=n(32),d=n(69),u=n(28),p=function(){function e(e,t,n,o){var i=this;this.uis=e,this.http=t,this._message=n,this.chs=o,this.answer=new r.EventEmitter,this.shortAnswerScore=new r.EventEmitter,this.answerEmmit=function(e){i.answer.emit(e)},this.scoreEmmit=function(){i.shortAnswerScore.emit(i.score)},this.click_uploadResource=function(e){var t=new FormData;t.append("file",e.file),t.append("resourceType","RESOURCE"),t.append("fileName",e.file.name);var n=JSON.stringify({fileName:e.file.name,resourceType:"RESOURCE"});i.http.post(u.environment.basePath+"resource/",{json:n,file:t},{headers:{"Content-Type":"multipart/form-data"}}).subscribe(function(e){200===e.code?(i._message.create("success","上传成功"),i.answerEmmit(e.rid)):i._message.create("success",e.desc)},function(e){console.error(e)})},this.submitScore=function(){i.chs.rateTask(i.studentAnswer.id,i.score).subscribe(function(e){200===e.code?i._message.success("评分成功"):i._message.error(e.desc)},function(e){console.error(e)})}}return e.prototype.ngOnInit=function(){this.score=1,this.userId=this.uis.getUserInfo().userId},o([r.Input(),i("design:type",Number)],e.prototype,"status",void 0),o([r.Input(),i("design:type",s.QuestionModel)],e.prototype,"options",void 0),o([r.Input(),i("design:type",Object)],e.prototype,"studentAnswer",void 0),o([r.Output(),i("design:type",Object)],e.prototype,"answer",void 0),o([r.Output(),i("design:type",Object)],e.prototype,"shortAnswerScore",void 0),e=o([r.Component({selector:"app-visual-sing-question",template:n(821),styles:[n(822)]}),i("design:paramtypes",[a.UserInfoService,c.HttpClient,l.NzMessageService,d.ClassHomeworkService])],e)}();t.VisualSingQuestionComponent=p},821:function(e,t){e.exports='<h3 class="question-type">视唱题</h3> <div *ngIf="this.status != 2"> <section class="answer-main-title" [innerHTML]="this.options.title"></section> <nz-upload nzAction="resource" [nzShowUploadList]="false" [nzHeaders]="{\'Content-Type\': \'application/x-www-form-urlencoded;charset=UTF-8\'}" [nzCustomRequest]="click_uploadResource"><span class="btn-inner"><i class="ico ico-note"></i><span class="text">上传资源</span></span> </nz-upload> </div> <div *ngIf="this.status == 2"> <section class="answer-main-title" [innerHTML]="this.options.title"> </section> <section> <p>学生答案：<span style="color: red;">{{this.studentAnswer?.answer}}</span></p> <p *ngIf="this.studentAnswer?.isTrue != null"><strong>{{this.studentAnswer?.isTrue?"正确":"错误"}}</strong></p> <p *ngIf="this.studentAnswer?.score">分数：<span>{{this.studentAnswer?.score}}</span></p> </section> <nz-input-number [(ngModel)]="score" (ngModuleChange)="this.scoreEmmit()" [nzMin]="1" [nzStep]="1"></nz-input-number> <button nz-button [nzType]="\'primary\'" (click)="this.submitScore();"> <span>提交评分</span> </button> </div> '},822:function(e,t){e.exports=""},823:function(e,t,n){"use strict";var o=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,s=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(r<3?i(s):r>3?i(t,n,s):i(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var r=n(2),s=n(150),a=n(69),l=n(6),c=function(){function e(e,t){var n=this;this.chs=e,this._message=t,this.answer=new r.EventEmitter,this.shortAnswerScore=new r.EventEmitter,this.answerEmmit=function(e){n.answer.emit(e)},this.scoreEmmit=function(){n.shortAnswerScore.emit(n.score)},this.submitScore=function(){n.chs.rateTask(n.studentAnswer.id,n.score).subscribe(function(e){200===e.code?n._message.success("评分成功"):n._message.error(e.desc)},function(e){console.error(e)})}}return e.prototype.ngOnInit=function(){this.score=1,this.tinyId="shortAnswer"+this.index},o([r.Input(),i("design:type",Number)],e.prototype,"status",void 0),o([r.Input(),i("design:type",Number)],e.prototype,"index",void 0),o([r.Input(),i("design:type",Object)],e.prototype,"studentAnswer",void 0),o([r.Input(),i("design:type",s.QuestionModel)],e.prototype,"options",void 0),o([r.Output(),i("design:type",Object)],e.prototype,"answer",void 0),o([r.Output(),i("design:type",Object)],e.prototype,"shortAnswerScore",void 0),e=o([r.Component({selector:"app-short-answer-question",template:n(824),styles:[n(825)]}),i("design:paramtypes",[a.ClassHomeworkService,l.NzMessageService])],e)}();t.ShortAnswerQuestionComponent=c},824:function(e,t){e.exports='<h3 class="question-type">简答题</h3> <div *ngIf="this.status != 2"> <section class="answer-main-title" [innerHTML]="this.options.title"> </section> <tiny-editor [elementId]="tinyId" (onEditorContentChange)="this.answerEmmit($event)"></tiny-editor> </div> <div *ngIf="this.status == 2" class="question-box"> <div class="question-display"> <section class="answer-main-title" [innerHTML]="this.options.title"> </section> <section> <p>学生答案：<span style="color: red;">{{this.studentAnswer?.answer}}</span></p> <p *ngIf="this.studentAnswer?.isTrue != null"><strong>{{this.studentAnswer?.isTrue?"正确":"错误"}}</strong></p> <p *ngIf="this.studentAnswer?.score">分数：<span>{{this.studentAnswer?.score}}</span></p> </section> </div> <div class="question-control"> <nz-input-number [(ngModel)]="score" (ngModuleChange)="this.scoreEmmit()" [nzMin]="1" [nzStep]="1"></nz-input-number> <br> <button nz-button [nzType]="\'primary\'" (click)="this.submitScore();"> <span>提交评分</span> </button> </div> </div> '},825:function(e,t){e.exports=""},826:function(e,t,n){"use strict";var o=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,s=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(r<3?i(s):r>3?i(t,n,s):i(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s};Object.defineProperty(t,"__esModule",{value:!0});var i=n(2),r=function(){function e(){}return e=o([i.Component({selector:"question-frame",template:n(827),styles:[n(828)]})],e)}();t.QuestionFrameComponent=r},827:function(e,t){e.exports=""},828:function(e,t){e.exports=""},829:function(e,t){e.exports='<nz-layout class="layout" style="flex: 1;"> <nz-sider [nzWidth]="220" style="background:#fff"> <ul nz-menu [nzMode]="\'inline\'" style="width: 100%;height: 100%;"> <li nz-menu-item routerLinkActive="ant-menu-item-selected"><a [routerLink]="[\'infoMaintain\']"><span title><i class="anticon anticon-user"></i>基本信息</span></a></li> <li nz-menu-item routerLinkActive="ant-menu-item-selected"><a [routerLink]="[\'changeAvatar\']"><span title><i class="anticon anticon-user"></i>修改头像</span></a></li> <li nz-menu-item routerLinkActive="ant-menu-item-selected"><a [routerLink]="[\'changePassword\']"><span title><i class="anticon anticon-user"></i>修改密码</span></a></li> </ul> </nz-sider> <nz-content style="padding:20px;background:#fff; min-height: 280px;"> <router-outlet></router-outlet> </nz-content> </nz-layout> '},830:function(e,t){e.exports=":host{flex:1;display:flex;flex-direction:column}\n"},831:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(434),i=n(435),r=n(436),s=n(437);t.ZoonRoute=[{path:"",component:o.ZoonComponent,children:[{path:"",redirectTo:"infoMaintain",pathMatch:"full"},{path:"infoMaintain",component:i.InfoMaintainComponent},{path:"changeAvatar",component:r.UserAvatarComponent},{path:"changePassword",component:s.PasswordManagerComponent}]}]},832:function(e,t){e.exports='<form nz-form [formGroup]="validateForm" (ngSubmit)="_submitForm()"> <div nz-form-item nz-row> <div nz-form-label nz-col [nzSm]="6" [nzXs]="24"> <label for="name">姓名</label> </div> <div nz-form-control nz-col [nzSm]="14" [nzXs]="24" nzHasFeedback> <nz-input formControlName="name" [nzSize]="\'large\'" [nzId]="\'name\'"></nz-input> </div> </div> <div nz-form-item nz-row> <div nz-form-label nz-col [nzSm]="6" [nzXs]="24"> <label for="age">年龄</label> </div> <div nz-form-control nz-col [nzSm]="14" [nzXs]="24" nzHasFeedback> <nz-input formControlName="age" [nzSize]="\'large\'" [nzId]="\'age\'" [nzType]="\'number\'"></nz-input> </div> </div> <div nz-form-item nz-row> <div nz-form-label nz-col [nzSm]="6" [nzXs]="24"> <label for="school">学校</label> </div> <div nz-form-control nz-col [nzSm]="14" [nzXs]="24" nzHasFeedback> <nz-input formControlName="school" [nzSize]="\'large\'" [nzId]="\'school\'"></nz-input> </div> </div> <div nz-form-item nz-row> <div nz-form-label nz-col [nzSm]="6" [nzXs]="24"> <label for="grade">年级</label> </div> <div nz-form-control nz-col [nzSm]="14" [nzXs]="24" nzHasFeedback> <nz-input formControlName="grade" [nzSize]="\'large\'" [nzId]="\'grade\'"></nz-input> </div> </div> <div nz-form-item nz-row> <div nz-form-label nz-col [nzSm]="6" [nzXs]="24"> <label for="gender"> <span> 性别 </span> </label> </div> <div nz-form-control nz-col [nzSm]="14" [nzXs]="24" nzHasFeedback> <nz-radio-group formControlName="gender"> <label nz-radio [nzValue]="\'MAN\'"> <span>男</span> </label> <label nz-radio [nzValue]="\'WOMAN\'"> <span>女</span> </label> </nz-radio-group> </div> </div> <div nz-form-item nz-row style="margin-bottom:8px;"> <div nz-form-control nz-col [nzSpan]="14" [nzOffset]="6"> <button nz-button [nzSize]="\'large\'" [nzType]="\'primary\'">保存</button> &nbsp;&nbsp; <a [routerLink]="\'/classes/myClasses\'">{{userId?\'取消\':\'返回登录\'}}</a> </div> </div> </form> '},833:function(e,t){e.exports=""},834:function(e,t){e.exports='<nz-upload class="avatar-uploader" [nzAction]="uploadUrl" nzName="avatar" [nzShowUploadList]="false" [nzBeforeUpload]="beforeUpload" [nzData]="uploadData" [nzCustomRequest]="selfUpload_file" (nzChange)="handleChange($event)"> <i *ngIf="!avatarUrl" class="anticon anticon-plus avatar-uploader-trigger"></i> <img *ngIf="avatarUrl" [src]="avatarUrl" class="avatar"> </nz-upload> '},835:function(e,t){e.exports=":host ::ng-deep .avatar-uploader,:host ::ng-deep .avatar-uploader-trigger,:host ::ng-deep .avatar{width:150px;height:150px;display:block}:host ::ng-deep .avatar-uploader{display:block;border:1px dashed #d9d9d9;border-radius:6px;cursor:pointer}:host ::ng-deep .avatar-uploader-trigger{display:table-cell;vertical-align:middle;font-size:28px;color:#999}\n"},836:function(e,t){e.exports='<form nz-form [formGroup]="validateForm" class="login-form" (ngSubmit)="_submitForm()"> <div nz-form-item> <div nz-form-control> <nz-input formControlName="userName" [nzPlaceHolder]="\'账号/邮箱\'" [nzSize]="\'large\'"> <ng-template #prefix> <i class="anticon anticon-user"></i> </ng-template> </nz-input> <div nz-form-explain *ngIf="validateForm.controls.userName.dirty&&validateForm.controls.userName.hasError(\'required\')"> 请输入您的账号！ </div> </div> </div> <div nz-form-item> <div nz-form-control> <nz-input formControlName="password" [nzType]="\'password\'" [nzPlaceHolder]="\'密码\'" [nzSize]="\'large\'"> <ng-template #prefix> <i class="anticon anticon-lock"></i> </ng-template> </nz-input> <div nz-form-explain *ngIf="validateForm.controls.password.dirty&&validateForm.controls.password.hasError(\'required\')"> 请输入您的密码！ </div> </div> </div> <div nz-form-item> <div nz-form-control> <div nz-row> <div nz-col [nzSpan]="12"> <nz-input formControlName="captcha" [nzType]="\'text\'" [nzPlaceHolder]="\'验证码\'" [nzSize]="\'large\'"> <ng-template #prefix> <i class="anticon anticon-lock"></i> </ng-template> </nz-input> </div> <div nz-col [nzSpan]="12" style="text-align: right;"> <button nz-button [nzSize]="\'large\'" (click)="_getCaptcha($event)">获取验证码</button> </div> </div> <div nz-form-explain *ngIf="validateForm.controls.captcha.dirty&&validateForm.controls.captcha.hasError(\'required\')"> 请输入您的验证码！ </div> </div> </div> <div nz-form-item> <div> <button nz-button class="login-form-button" [nzType]="\'primary\'" [nzSize]="\'large\'"> 修改密码 </button> </div> </div> </form> '},837:function(e,t){e.exports=":host{flex:1;display:flex;flex-direction:column;justify-content:flex-start;align-items:flex-start}.login-form{max-width:800px}.login-form-forgot{float:right}.login-form-button{width:100%}\n"},838:function(e,t,n){"use strict";var o=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,s=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(r<3?i(s):r>3?i(t,n,s):i(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s};Object.defineProperty(t,"__esModule",{value:!0});var i=n(2),r=function(){function e(){}return e.prototype.dealWithSize=function(e){var t="B",n=parseInt(e,0);return n>=1024&&(t="K",n/=1024),n>=1024&&(t="M",n/=1024),n>=1024&&(t="G",n/=1024),n.toFixed(1)+t},e.prototype.dealWithTimeTZ=function(e){return e=(e=e.replace(/T/g," ")).replace(/Z/g,"")},e.prototype.dealWithSourceStatus=function(e,t,n){if(1===t||"doc"===n||"docx"===n||"xls"===n||"xlsx"===n||"ppt"===n||"pptx"===n)switch(e){case 0:return"等待转码";case 1:return"转码中";case 2:return;default:return"转码失败"}},e=o([i.Injectable()],e)}();t.DirectoryUtil=r},839:function(e,t,n){"use strict";var o=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,s=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(r<3?i(s):r>3?i(t,n,s):i(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s};Object.defineProperty(t,"__esModule",{value:!0});var i=n(2),r=function(){function e(){}return e=o([i.Component({selector:"app-my-resources",template:n(840),styles:[n(841)]})],e)}();t.ResourcesComponent=r},840:function(e,t){e.exports="<h3>我的资源</h3> "},841:function(e,t){e.exports=""},842:function(e,t,n){"use strict";var o=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,s=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(r<3?i(s):r>3?i(t,n,s):i(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s};Object.defineProperty(t,"__esModule",{value:!0});var i=n(2),r=function(){function e(){}return e.prototype.transform=function(e){return e.filter(function(e){return"folder"===e.type})},e=o([i.Pipe({name:"folders"})],e)}();t.FoldersPipe=r;var s=function(){function e(){}return e.prototype.transform=function(e){return e.filter(function(e){return"library"===e.type})},e=o([i.Pipe({name:"librarys"})],e)}();t.LibrarysPipe=s;var a=function(){function e(){}return e.prototype.transform=function(e){return e.filter(function(e){return"question"===e.type})},e=o([i.Pipe({name:"questions"})],e)}();t.QuestionsPipe=a;var l=function(){function e(){}return e.prototype.transform=function(e){return e.filter(function(e){return"paper"===e.type})},e=o([i.Pipe({name:"papers"})],e)}();t.PapersPipe=l;var c=function(){function e(){}return e.prototype.transform=function(e){return String.fromCharCode(65+e)},e=o([i.Pipe({name:"numberToPipe"})],e)}();t.NumberToPipe=c},843:function(e,t,n){"use strict";var o=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,s=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(r<3?i(s):r>3?i(t,n,s):i(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var r=n(2),s=function(){function e(){this.onClickLi=new r.EventEmitter}return e.prototype.click_li=function(e){this.onClickLi.emit(e)},o([r.Input(),i("design:type",Number)],e.prototype,"deep",void 0),o([r.Input(),i("design:type",Array)],e.prototype,"directoryList",void 0),o([r.Output(),i("design:type",Object)],e.prototype,"onClickLi",void 0),e=o([r.Component({selector:"tree-view",template:n(844),styles:["*{box-sizing:content-box !important;}"]})],e)}();t.TreeViewComponent=s},844:function(e,t){e.exports='<ul> <li *ngFor="let d of directoryList" data-list="true" class="litem"> <a class="item" (click)="click_li(d);" [class.item-open]="d.item_open" [class.list-selected]="d.list_selected" href="javascript:void(0)" [style.padding-left]="deep*14+\'px\'"> <span [class]="d.tree_icon_class"> <span class="text ellipsis" title="{{d.name}}">{{d.name}}</span> <i *ngIf="d.type==\'folder\'" data-ico="true" class="ico"></i> </span> </a> <tree-view *ngIf="d.list != null" [directoryList]="d.list" [deep]="(deep+1)" (onClickLi)="click_li($event)"></tree-view> </li> </ul>'},845:function(e,t,n){"use strict";var o=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,s=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(r<3?i(s):r>3?i(t,n,s):i(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var r=n(2),s=n(149),a=n(846),l=n(6),c=function(){function e(e,t){var n=this;this.directoryService=e,this._message=t,this.visible=!1,this.folder=!1,this.library=!1,this.onOk=new r.EventEmitter,this.onCancel=new r.EventEmitter,this.handleOk=function(e){n.onOk.emit(n.selectedItem)},this.handleCancel=function(e){n.onCancel.emit(e)},this.directoryList=[]}return Object.defineProperty(e.prototype,"userId",{get:function(){return this._userId},set:function(e){null!=e&&(this._userId=e.trim(),this.directoryList=[],this.getDirectoryList(null))},enumerable:!0,configurable:!0}),e.prototype.getDirectoryList=function(e){var t=this;this.directoryService.getByParent(null==e?"0":e.id,this.userId).then(function(n){if(null!=n&&"1"===n.code){null==e&&(n.parent.name=n.parent.folderName||n.parent.libraryName,n.parent.type="folder",n.parent.item_open="item-open",n.parent.list_selected="list-selected",n.parent.tree_icon_class="link",t.directoryList=[n.parent],t.selectedItem=t.directoryList[0]);var o=[];t.folder&&n.libraryFolder.forEach(function(e){e.type="folder",e.name=e.folderName,e.tree_icon_class="link",o.push(e)}),t.library&&n.library.forEach(function(e){e.type="library",e.name=e.libraryName,e.parentId=e.libraryFolderId,e.tree_icon_class="link-library",o.push(e)}),null==e?t.directoryList[0].list=o:e.list=o}else t._message.create("error","获取数据失败")})},e.prototype.click_li=function(e){this.selectedItem.list_selected="",e.list_selected="list-selected",this.selectedItem=e,"folder"===e.type&&("item-open"===e.item_open||(e.item_open="item-open",this.getDirectoryList(e)))},o([r.Input(),i("design:type",String)],e.prototype,"title",void 0),o([r.Input(),i("design:type",Object)],e.prototype,"visible",void 0),o([r.Input(),i("design:type",Object)],e.prototype,"folder",void 0),o([r.Input(),i("design:type",Object)],e.prototype,"library",void 0),o([r.Input(),i("design:type",Array)],e.prototype,"directoryList",void 0),o([r.Input(),i("design:type",s.Directory)],e.prototype,"selectedItem",void 0),o([r.Output(),i("design:type",Object)],e.prototype,"onOk",void 0),o([r.Output(),i("design:type",Object)],e.prototype,"onCancel",void 0),o([r.Input(),i("design:type",String),i("design:paramtypes",[String])],e.prototype,"userId",null),e=o([r.Component({selector:"modal-move",template:n(847),styles:["*{box-sizing:content-box !important;}"]}),i("design:paramtypes",[a.DirectoryService,l.NzMessageService])],e)}();t.MoveModalComponent=c},846:function(e,t,n){"use strict";var o=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,s=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(r<3?i(s):r>3?i(t,n,s):i(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var r=n(2),s=n(97);n(203),n(204);var a=n(28),l=function(){function e(e){this.http=e,this.headers=new s.Headers({"Content-Type":"application/json"})}return e.prototype.getRoot=function(e){return this.http.get("resource/folder?uid="+e).toPromise().then(function(e){return e.json()}).catch(this.handleError)},e.prototype.getByParent=function(e,t){return this.http.get("resource/folder?uid="+t+"&parentId="+e).toPromise().then(function(e){return e.json()}).catch(this.handleError)},e.prototype.newFolder=function(e,t,n){return this.http.post("resource/"+t+"/folder",{parentId:e,uid:t,isdelete:0,folderName:n},{headers:this.headers}).toPromise().then(function(e){return e.json()}).catch(this.handleError)},e.prototype.batchDelete=function(e,t){return this.http.post(a.environment.basePath+"api/batch-delete",{userId:t,deleteList:e},{headers:this.headers}).toPromise().then(function(e){return e.json()}).catch(this.handleError)},e.prototype.batchDeleteFolder=function(e,t){return this.http.post("resource/"+t+"/folder/deletefolderlogical",{uid:e,folderId:t},{headers:this.headers}).toPromise().then(function(e){return e.json()}).catch(this.handleError)},e.prototype.batchDeleteFile=function(e,t){return this.http.post("resource/"+t+"/folder/deleteresourcelogical",{resourceId:t,fid:e},{headers:this.headers}).toPromise().then(function(e){return e.json()}).catch(this.handleError)},e.prototype.batchMove=function(e,t){return this.http.post(a.environment.basePath+"api/batch-move",{parentId:t,moveList:e},{headers:this.headers}).toPromise().then(function(e){return e.json()}).catch(this.handleError)},e.prototype.reName=function(e,t){return this.http.put(a.environment.basePath+"api/q-library-folders-update",{id:e,folderName:t},{headers:this.headers}).toPromise().then(function(e){return e.json()}).catch(this.handleError)},e.prototype.getQRecycleBinTree=function(e){return this.http.get(a.environment.basePath+"api/getQRecycleBinTree?userId="+e).toPromise().then(function(e){return e.json()}).catch(this.handleError)},e.prototype.pseudoDeleteQRecycleBin=function(e){return this.http.post(a.environment.basePath+"api/batch-pseudoDeleteQRecycleBin",{deleteList:e},{headers:this.headers}).toPromise().then(function(e){return e.json()}).catch(this.handleError)},e.prototype.pseudoDeleteFile=function(e){return this.http.post(a.environment.basePath+"api/batch-pseudoDeleteQRecycleBin",{deleteList:e},{headers:this.headers}).toPromise().then(function(e){return e.json()}).catch(this.handleError)},e.prototype.pseudoDeleteFolder=function(e,t){return this.http.post("resource/"+e+"/folder",{uid:e,folderId:t},{headers:this.headers}).toPromise().then(function(e){return e.json()}).catch(this.handleError)},e.prototype.batchRecovery=function(e){return this.http.post(a.environment.basePath+"api/batchRecovery",e,{headers:this.headers}).toPromise().then(function(e){return e.json()}).catch(this.handleError)},e.prototype.recoveryTo=function(e,t,n){return this.http.post(a.environment.basePath+"api/recoveryTo",{recycelBinId:e,type:t,parentId:n},{headers:this.headers}).toPromise().then(function(e){return e.json()}).catch(this.handleError)},e.prototype.mySharesCount=function(e){return this.http.get(a.environment.basePath+"api/q-question-my-shares-count/"+e).toPromise().then(function(e){return e.json()}).catch(this.handleError)},e.prototype.targetSharesCount=function(e){return this.http.get(a.environment.basePath+"api/q-question-target-shares-count/"+e).toPromise().then(function(e){return e.json()}).catch(this.handleError)},e.prototype.getQRecycleBinCount=function(e){return this.http.get(a.environment.basePath+"api/getQRecycleBinCount?userId="+e).toPromise().then(function(e){return e.json()}).catch(this.handleError)},e.prototype.fuzzySearch=function(e,t){return this.http.get(a.environment.basePath+"api/q-libraries-FuzzySearch?libraryName="+e+"&folderOwner="+t).toPromise().then(function(e){return e.json()}).catch(this.handleError)},e.prototype.handleError=function(e){return Promise.reject(e)},e=o([r.Injectable(),i("design:paramtypes",[s.Http])],e)}();t.DirectoryService=l},847:function(e,t){e.exports='<nz-modal [nzVisible]="visible" [nzTitle]="title" [nzContent]="modalContent_move" (nzOnCancel)="handleCancel($event)" (nzOnOk)="handleOk($event)"> <ng-template #modalContent_move> <div class="modal-body"> <div class="mod-dirbox"> <div class="dirbox-dirs"> <div class="dirbox-dir dirbox-curdir"> <label>{{title}}到：</label> <p id="_file_move_paths_to" tabindex="0" class="filePath"> <a href="javascript:void(0)" *ngIf="selectedItem">{{selectedItem.name}}</a> </p> </div> <div class="dirbox-tree"> <tree-view *ngIf="directoryList != null" [directoryList]="directoryList" [deep]="1" (onClickLi)="click_li($event)"></tree-view> </div> </div> </div> </div> </ng-template> </nz-modal> '},848:function(e,t,n){"use strict";var o=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,s=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(r<3?i(s):r>3?i(t,n,s):i(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var r=n(2),s=n(149),a=n(12),l=function(){function e(e){var t=this;this.fb=e,this.isVisible=!1,this.onOk=new r.EventEmitter,this.onCancel=new r.EventEmitter,this.isConfirmLoading=!1,this.showModal=function(){t.isVisible=!0},this.handleOk=function(e){t.isConfirmLoading=!0,t.onOk.emit(t.validateForm.value)},this.handleCancel=function(e){t.isVisible=!1,t.resetForm(),t.onCancel.emit(e)},this.submitForm=function(e){for(var n in t.validateForm.controls)t.validateForm.controls[n]&&t.validateForm.controls[n].markAsDirty();console.log(e)}}return e.prototype.resetForm=function(){for(var e in this.validateForm.reset(),this.validateForm.controls)this.validateForm.controls[e]&&this.validateForm.controls[e].markAsPristine()},e.prototype.validateConfirmPassword=function(){var e=this;setTimeout(function(){e.validateForm.controls.passwordConfirmation.updateValueAndValidity()})},e.prototype.getFormControl=function(e){return this.validateForm.controls[e]},e.prototype.ngOnInit=function(){this.validateForm=this.fb.group({id:[null==this.lib_old?"":this.lib_old.id,[]],libraryName:[null==this.lib_old?"":this.lib_old.name,[a.Validators.required]],remarks:[null==this.lib_old?"":this.lib_old.remarks,[a.Validators.required]]})},o([r.Input(),i("design:type",Object)],e.prototype,"isVisible",void 0),o([r.Input(),i("design:type",String)],e.prototype,"title",void 0),o([r.Input(),i("design:type",s.Directory)],e.prototype,"lib_old",void 0),o([r.Output(),i("design:type",Object)],e.prototype,"onOk",void 0),o([r.Output(),i("design:type",Object)],e.prototype,"onCancel",void 0),e=o([r.Component({selector:"library-add",template:n(849),styles:[]}),i("design:paramtypes",[a.FormBuilder])],e)}();t.LibraryAddComponent=l},849:function(e,t){e.exports='<div> <nz-modal [nzVisible]="isVisible" [nzTitle]="title" [nzContent]="modalContent" (nzOnCancel)="handleCancel($event)" (nzOnOk)="handleOk($event)" [nzConfirmLoading]="isConfirmLoading"> <ng-template #modalContent> <form nz-form [formGroup]="validateForm"> <div nz-form-item nz-row> <div nz-form-label nz-col [nzSpan]="7"> <label nz-form-item-required>题集名称</label> </div> <div nz-col [nzSpan]="12" nz-form-control nzHasFeedback> <nz-input formControlName="libraryName" [nzType]="\'text\'" [nzPlaceHolder]="\'请输入题目名\'" [nzSize]="\'large\'"> </nz-input> <div nz-form-explain *ngIf="getFormControl(\'libraryName\').dirty&&getFormControl(\'libraryName\').hasError(\'required\')">请填写题集名称!</div> <div nz-form-explain *ngIf="getFormControl(\'libraryName\').dirty&&getFormControl(\'libraryName\').pending">Validating...</div> </div> </div> <div nz-form-item nz-row> <div nz-col [nzSpan]="7" nz-form-label> <label nz-form-item-required>题集描述</label> </div> <div nz-col [nzSpan]="12" nz-form-control> <nz-input formControlName="remarks" [nzRows]="2" [nzType]="\'textarea\'" [nzPlaceHolder]="\'请输入题目描述\'" [nzSize]="\'large\'"> </nz-input> <div nz-form-explain *ngIf="getFormControl(\'remarks\').dirty&&getFormControl(\'remarks\').hasError(\'required\')">请填写题目描述!</div> </div> </div> </form> </ng-template> </nz-modal> </div> '},850:function(e,t,n){"use strict";var o=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,s=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(r<3?i(s):r>3?i(t,n,s):i(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var r=n(2),s=function(){function e(){this.onclickMenu=new r.EventEmitter,this._left="-300px"}return Object.defineProperty(e.prototype,"event",{set:function(e){var t=this;this._hidden=null,this._left="-300px",null!=e&&setTimeout(function(){t.contextMenu.nativeElement.clientWidth+e.x+10<e.view.innerWidth?t._left=e.x+"px":t._left=e.view.innerWidth-t.contextMenu.nativeElement.clientWidth-10+"px",t.contextMenu.nativeElement.clientHeight+e.y+10<e.view.innerHeight?t._top=e.y+"px":t._top=e.y-t.contextMenu.nativeElement.clientHeight-10+"px"},100)},enumerable:!0,configurable:!0}),e.prototype.click_menu=function(e){this.onclickMenu.emit(e)},o([r.ViewChild("contextMenu"),i("design:type",Object)],e.prototype,"contextMenu",void 0),o([r.Input(),i("design:type",String)],e.prototype,"_hidden",void 0),o([r.Input(),i("design:type",String)],e.prototype,"type",void 0),o([r.Input(),i("design:type",Number)],e.prototype,"checkedNumber",void 0),o([r.Output(),i("design:type",Object)],e.prototype,"onclickMenu",void 0),o([r.Input(),i("design:type",Object),i("design:paramtypes",[Object])],e.prototype,"event",null),e=o([r.Component({selector:"context-menu",template:n(851),styles:["*{box-sizing:content-box !important;}"]}),i("design:paramtypes",[])],e)}();t.ContextMenuComponent=s},851:function(e,t){e.exports='<div class="content-menu" #contextMenu [style.top]="_top" [style.left]="_left" [attr.hidden]="_hidden"> <ul class="large" *ngIf="type==\'main\'"> <li (click)="click_menu(\'newTJ\')"> <a><i class="ico ico-note"></i><span>创建题集</span></a> </li> <li (click)="click_menu(\'newFolder\')"> <a><i class="ico ico-mkdir"></i><span>新建文件夹<span></span></span> </a> </li> <li (click)="click_menu(\'refresh\')"> <a><i class="ico ico-ref"></i><span>刷新 (F5)<span></span></span> </a> </li> <li (click)="click_menu(\'paste\')"> <a><i class="ico ico-paste"></i><span>粘贴 (Ctrl+V)<span></span></span> </a> </li> </ul> <ul class="large" *ngIf="checkedNumber==1&&type==\'folder\'"> <li (click)="click_menu(\'open\')"> <a><i class="ico ico-preview"></i><span>打开<span></span></span> </a> </li> <li (click)="click_menu(\'del\')"> <a><i class="ico ico-del"></i><span>删除 (Delete)<span></span></span> </a> </li> <li (click)="click_menu(\'move\')"> <a><i class="ico ico-move"></i><span>移动到<span></span></span> </a> </li> <li (click)="click_menu(\'cut\')"> <a><i class="ico ico-cut"></i><span>剪切 (Ctrl+X)<span></span></span> </a> </li> <li (click)="click_menu(\'rename\')"> <a><i class="ico ico-rename"></i><span>重命名<span></span></span> </a> </li> </ul> <ul class="large" *ngIf="checkedNumber==1&&type==\'library\'"> <li (click)="click_menu(\'open\')"> <a><i class="ico ico-preview"></i><span>打开<span></span></span> </a> </li> <li (click)="click_menu(\'addTM\')"> <a><i class="ico ico-upload" style="font-size: 25px;margin-top: -3px;">+</i><span>添加题目</span></a> </li> <li (click)="click_menu(\'del\')"> <a><i class="ico ico-del"></i><span>删除 (Delete)<span></span></span> </a> </li> <li (click)="click_menu(\'move\')"> <a><i class="ico ico-move"></i><span>移动到<span></span></span> </a> </li> <li (click)="click_menu(\'cut\')"> <a><i class="ico ico-cut"></i><span>剪切 (Ctrl+X)<span></span></span> </a> </li> <li (click)="click_menu(\'rename\')"> <a><i class="ico ico-rename"></i><span>编辑<span></span></span> </a> </li> <li (click)="click_menu(\'share\')"> <a><i class="ico ico-share"></i><span>分享<span></span></span> </a> </li> </ul> <ul class="large" *ngIf="checkedNumber>1"> <li (click)="click_menu(\'del\')"> <a><i class="ico ico-del"></i><span>删除 (Delete)<span></span></span> </a> </li> <li (click)="click_menu(\'move\')"> <a><i class="ico ico-move"></i><span>移动到<span></span></span> </a> </li> </ul> </div>'},852:function(e,t,n){"use strict";var o=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,s=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(r<3?i(s):r>3?i(t,n,s):i(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s};Object.defineProperty(t,"__esModule",{value:!0});var i=n(2),r=function(){function e(){}return e=o([i.Component({selector:"global-css",encapsulation:i.ViewEncapsulation.None,template:"\n        <style></style>",styles:["html{overflow:hidden !important;}"]})],e)}();t.GlobalCssComponent=r},853:function(e,t){e.exports='<nz-layout class="layout" style="flex: 1;display: flex;"> <nz-sider [nzWidth]="220" style="background:#fff"> <ul nz-menu [nzMode]="\'inline\'" style="width: 100%;height: 100%;"> <li nz-menu-item routerLinkActive="ant-menu-item-selected"> <a [routerLink]="[\'studySectionManagement\']"><span title><i class="anticon anticon-database"></i>学段、年级管理</span></a> </li> <li nz-menu-item routerLinkActive="ant-menu-item-selected"> <a [routerLink]="[\'teachingMaterial\']"><span title><i class="anticon anticon-book"></i>教材管理</span></a> </li> </ul> </nz-sider> <nz-content style="padding:20px;background:#fff;flex: 1;"> <router-outlet></router-outlet> </nz-content> </nz-layout> '},854:function(e,t){e.exports=":host ::ng-deep{display:flex;flex:1;overflow:auto}\n"},855:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(440),i=n(441),r=n(442),s=n(443),a=n(444),l=n(445);t.BDARoute=[{path:"",component:o.BaseDataAdministrationComponent,children:[{path:"",redirectTo:"studySectionManagement",pathMatch:"full"},{path:"studySectionManagement",component:s.StudySectionManagementComponent},{path:"teachingMaterial",component:i.TeachingMaterialComponent},{path:"resources",component:r.ResourcesComponent},{path:"teachingMaterial/addMaterial",component:a.AddClassComponent,pathMatch:"full"},{path:"teachingMaterial/book/:id",component:l.BookComponent},{path:"teachingMaterial/addMaterial/:id",component:a.AddClassComponent,pathMatch:"full"}]}]},856:function(e,t){e.exports=' <div nz-row [nzGutter]="8"> <app-materials nz-col [nzSpan]="6" *ngFor="let book of booklist" [book]="book" (onDelete)="this._deleteMaterial($event)"></app-materials> <div style="margin-bottom:20px; position: fixed; bottom: 0; right: 20px;"> <button class="class-add" nz-button [nzType]="\'primary\'" [nzSize]="\'large\'" [nzShape]="\'circle\'" (click)="this.router.navigate([\'./baseDataAdministration/teachingMaterial/addMaterial\']);" style="width: 80px;height: 80px;" title="新增课程"> <i class="anticon anticon-plus" style="font-size: 80px;line-height: 80px;"></i> </button> </div> </div> '},857:function(e,t){e.exports=""},858:function(e,t){e.exports=' <global-css></global-css> <div [class]="tool_tree_view_class" (click)="click_all($event)"> <modal-loding [visible]="modal_loding" [title]="\'正在请求...\'"></modal-loding> <div class="lay-aside"> <div class="aside-box"> <div class="aside-wrap"> <ul class="nav-box"> <li class="nav-list" [class.active]="current_sidebar==\'disk\'" (click)="current_sidebar=\'disk\';refresh();"> <a [routerLink]="[\'./\', \'disk\']" class="link all" title="我的资源"><i></i>我的资源</a> </li> <li class="nav-list" [class.active]="current_sidebar==\'videos\'" (click)="current_sidebar=\'videos\';refresh();"> <a [routerLink]="[\'./\', \'videos\']" class="link video" title="视频"><i></i>视频文件(<span>{{count_videos}}</span>)</a> </li> <li class="nav-list" [class.active]="current_sidebar==\'audios\'" (click)="current_sidebar=\'audios\';refresh();"> <a [routerLink]="[\'./\', \'audios\']" class="link voice" title="音频"><i></i>音频文件(<span>{{count_audios}}</span>)</a> </li> <li class="nav-list" [class.active]="current_sidebar==\'documents\'" (click)="current_sidebar=\'documents\';refresh();"> <a [routerLink]="[\'./\', \'documents\']" class="link doc" title="文档"><i></i>文档文件(<span>{{count_documents}}</span>)</a> </li> <li class="nav-list" [class.active]="current_sidebar==\'imgs\'" (click)="current_sidebar=\'imgs\';refresh();"> <a [routerLink]="[\'./\', \'imgs\']" class="link pic" title="图片"><i></i>图片文件(<span>{{count_imgs}}</span>)</a> </li> <li class="nav-list" [class.active]="current_sidebar==\'others\'" (click)="current_sidebar=\'others\';refresh();"> <a [routerLink]="[\'./\', \'others\']" class="link all" title="其它"><i></i>其它文件(<span>{{count_others}}</span>)</a> </li> <li class="nav-list" [class.active]="current_sidebar==\'recycle\'" (click)="current_sidebar=\'recycle\';refresh();"> <a [routerLink]="[\'./\', \'recycle\']" class="link recycle" title="回收站"><i></i>回收站</a> </li> <li class="nav-list"></li> <li class="nav-list"></li> </ul> </div> </div> </div> <div id="_main_bar1" class="lay-main-toolbar"> <div id="_disk_default_toolbar" class="toolbar-btn clear disk-toolbar"> <div class="btn-message" style="display: flex;"> <a class="g-btn g-btn-gray" *ngIf="current_sidebar==\'disk\'&& !current_question_sidebar"> <nz-upload nzAction="resource/{{userId}}/folder/upload" [nzData]="uploadData" [nzBeforeUpload]="_beforUpload" [nzShowUploadList]="false" [nzHeaders]="{\'Content-Type\': \'application/x-www-form-urlencoded;charset=UTF-8\'}" [nzCustomRequest]="click_uploadResource"><span class="btn-inner"><i class="ico ico-note"></i><span class="text">上传资源</span></span> </nz-upload> </a> <a class="g-btn g-btn-gray" *ngIf="current_sidebar==\'disk\'&& !current_question_sidebar" (click)="newFolder()"><span class="btn-inner"><i class="ico ico-mkdir"></i><span class="text">新建文件夹</span></span></a> <a class="g-btn g-btn-gray" *ngIf="current_sidebar==\'friendShare\'&& !current_question_sidebar" (click)="click_delFriendShare()"><span class="btn-inner"><i class="ico ico-del"></i><span class="text">删除</span></span></a> <a data-btn-id="emptyrecycle" class="g-btn g-btn-gray" *ngIf="current_sidebar==\'recycle\'&& !current_question_sidebar" (click)="clearRecycle(userId)"><span class="btn-inner"><i class="ico ico ico-emptyrecycle"></i><span class="text">清空回收站</span></span></a> <a class="g-btn g-btn-gray" *ngIf="!current_question_sidebar" (click)="refresh()"><span class="btn-inner minpad"><i class="ico ico-ref"></i><span class="text"></span></span></a> <a class="g-btn g-btn-gray" href="javascript:;" *ngIf="current_question_sidebar" (click)="click_questionAdd(dl)"><span class="btn-inner"><i class="anticon anticon-plus"></i>添加题目</span></a> <a class="g-btn g-btn-gray" href="javascript:;" *ngIf="current_question_sidebar" (click)="showModalForComponent()"><span class="btn-inner"><i class="ico ico-share"></i><span class="text">复制</span></span></a> <a class="g-btn g-btn-gray" href="javascript:;" *ngIf="current_question_sidebar" (click)="click_moveQuention()"><span class="btn-inner"><i class="ico ico-move"></i><span class="text">移动到</span></span></a> <a class="g-btn g-btn-gray" href="javascript:;" *ngIf="current_question_sidebar" (click)="click_deleteQuention()"><span class="btn-inner"><i class="ico ico-del"></i><span class="text">删除</span></span></a> <a class="g-btn g-btn-gray" href="javascript:;" *ngIf="current_question_sidebar" (click)="click_editQuention()"><span class="btn-inner"><i class="ico ico-del"></i><span class="text">编辑</span></span></a> </div> </div> </div> <div id="_main_bar2" class="lay-main-head" *ngIf="current_sidebar==\'disk\'"> <div id="_disk_file_path" class="inner"> <div class="wrap"> <label class="nz-checkall" nz-checkbox [(ngModel)]="_allChecked" [nzIndeterminate]="_indeterminate" (ngModelChange)="_checkAll($event)"></label> <div class="main-path" *ngIf="pathList"> <a tabindex="0" *ngFor="let path of pathList" (click)="click_path(path)" hidefocus="on" [style.z-index]="path.zIndex" class="path current"><span>{{path.name}}</span></a> </div> </div> </div> </div> <div id="_main_share_header" class="lay-main-head" *ngIf="current_sidebar==\'share\'"> <div class="inner"> <div class="share-head"> <span class="list name"><span class="wrap"><span class="inner">名称<label class="checkall" data-action="checkall" data-no-selection=""></label></span></span> </span> <span class="list time"><span class="wrap"><span class="inner">分享时间<i class="gap"></i></span></span> </span> <span class="list turnload"><span class="wrap"><span class="inner">转存次数<i class="gap"></i></span></span> </span> <span class="list view"><span class="wrap"><span class="inner">浏览次数<i class="gap"></i></span></span> </span> <span class="list download"><span class="wrap"><span class="inner">下载次数<i class="gap"></i></span></span> </span> </div> </div> </div> <div class="lay-main-head" *ngIf="current_sidebar==\'recycle\'"> <div class="inner"> <label class="nz-checkall" nz-checkbox [(ngModel)]="_allChecked" [nzIndeterminate]="_indeterminate" (ngModelChange)="_checkAll($event)"></label> <div class="recycle-head"> <span class="list name"><span class="wrap"><span class="inner">文件名</span></span> </span> <span class="list time"><span class="wrap"></span> </span> </div> </div> </div> <div id="_main_content" class="lay-main-con" (contextmenu)="onContextmenu($event,\'main\',null)"> <div class="inner"> <div id="_main_box" class="wrap"> <div [class]="tool_grid_view_class" data-label-for-aria="列表内容区域"> <div id="file_list" #fileList class="files clearfix"> <div *ngIf="current_sidebar==\'disk\'||current_sidebar==\'recycle\'"> <div *ngFor="let dl of (directoryList|folders)" (dblclick)="openFolder(dl)" (click)="click_yunfileResource(dl)" (contextmenu)="onContextmenu($event,\'folder\',dl)" class="list-wrap ui-draggable ui-droppable yunfile_resource yunfile_resource_folder {{dl.checked?\'ui-selected\':\'\'}}"> <div class="list clear"> <label class="checkbox" nz-checkbox [(ngModel)]="dl.checked" (ngModelChange)="_refreshStatus($event)" click-stop-propagation></label> <span data-action="enter" class="img"><i class="filetype icon-folder"> </i><i class="isShare" *ngIf="dl.isShare==1"></i></span> <span data-action="enter" class="name"><p class="text"><em><span [class]="dl.file_name_focus" title="{{dl.name}}" (blur)="blur_rename(dl,$event)" (click)="click_rename(dl)" [attr.contenteditable]="dl.contenteditable">{{dl.name}}</span></em></p></span> <span data-action="enter" class="tool"> <a *ngIf="current_sidebar==\'disk\'" (click)="musicDelete(dl)" title="删除"><span class="ico ico-del"></span></a> <a *ngIf="current_sidebar==\'recycle\'" (click)="trueDelete(dl)" title="彻底删除"><span class="ico ico-del"></span></a> <a *ngIf="current_sidebar==\'disk\'" (click)="click_li_tool_reName(dl)" title="重命名"><span class="ico ico-rename"></span></a> <a *ngIf="current_sidebar==\'recycle\'" (click)="restoreFolder(dl)" title="还原"><span class="ico ico-move"></span></a> <a *ngIf="current_sidebar==\'disk\'" (click)="openFolder(dl)" title="打开"><span class="ico ico-preview"></span></a> </span> <span data-action="enter" class="status"></span> <span data-action="enter" class="size"></span> </div> </div> <div *ngFor="let dl of (directoryList|papers)" (click)="click_yunfileResource(dl)" (contextmenu)="onContextmenu($event,\'papaer\',dl)" class="list-wrap ui-draggable ui-droppable yunfile_resource yunfile_resource_folder {{dl.checked?\'ui-selected\':\'\'}}"> <div class="list clear"> <label class="checkbox" nz-checkbox [(ngModel)]="dl.checked" (ngModelChange)="_refreshStatus($event)" click-stop-propagation></label> <span data-action="enter" class="img"><i class="filetype icon-{{dl.ext}}"> </i><i class="isShare" *ngIf="dl.isShare==1"></i></span> <span data-action="enter" class="name"><p class="text"><em><span [class]="dl.file_name_focus" title="{{dl.name}}" [attr.contenteditable]="dl.contenteditable">{{dl.name}}</span></em></p></span> <span data-action="enter" class="tool"> <a *ngIf="current_sidebar==\'disk\'" (click)="musicDelete(dl)" title="删除"><span class="ico ico-del"></span></a> <a *ngIf="current_sidebar==\'disk\'" download="{{dl.name}}" href="resource/{{dl.id}}/file" title="下载"><span class="ico ico-down"></span></a> <a *ngIf="current_sidebar==\'recycle\'" (click)="trueDelete(dl)" title="彻底删除"><span class="ico ico-del"></span></a> <a *ngIf="current_sidebar==\'recycle\'" (click)="restoreFile(dl)" title="还原"><span class="ico ico-move"></span></a> <span data-action="enter" class="status"></span> <span data-action="enter" class="size"></span> </span> </div> </div> </div> <div *ngIf="{\'videos\':1,\'audios\':1,\'documents\':1,\'imgs\':1,\'others\':1}[current_sidebar]"> <div *ngFor="let dl of (typeDirectoryList|papers)" (click)="click_yunfileResource(dl)" (contextmenu)="onContextmenu($event,\'papaer\',dl)" class="list-wrap ui-draggable ui-droppable yunfile_resource yunfile_resource_folder {{dl.checked?\'ui-selected\':\'\'}}"> <div class="list clear"> <label class="checkbox" nz-checkbox [(ngModel)]="dl.checked" (ngModelChange)="_refreshStatus($event)" click-stop-propagation></label> <span data-action="enter" class="img"><i class="filetype icon-{{dl.ext}}"> </i><i class="isShare" *ngIf="dl.isShare==1"></i></span> <span data-action="enter" class="name"><p class="text"><em><span [class]="dl.file_name_focus" title="{{dl.name}}" [attr.contenteditable]="dl.contenteditable">{{dl.name}}</span></em></p></span> <span data-action="enter" class="tool"> <a *ngIf="current_sidebar==\'disk\'" (click)="musicDelete(dl)" title="删除"><span class="ico ico-del"></span></a> <a download="{{dl.name}}" href="resource/{{dl.id}}/file" title="下载"><span class="ico ico-down"></span></a> <span data-action="enter" class="status"></span> <span data-action="enter" class="size"></span> </span> </div> </div> </div> </div> </div> </div> </div> </div> <div id="_disk_sidebar" class="dbview-nav"> <tree-view *ngIf="directoryList != null" [directoryList]="directoryTree" [deep]="0" (onClickLi)="click_tree_li($event)"></tree-view> </div> </div>   <div class="footer">选中：{{_checkedNumber}}，总共：{{directoryList.length}}</div> <nz-modal [nzVisible]="modal_share" [nzTitle]="\'分享\'" [nzWidth]="650" [nzContent]="modalContent_share" (nzOnCancel)="handleCancel($event)" (nzOnOk)="handleOk($event)"> <ng-template #modalContent_share> <ul class="nav nav-tabs nav-justified" role="tablist" id="myTab"> <li role="presentation" class="active"> <a href="#flink" aria-controls="flink" role="tab" data-toggle="tab">对象分享</a> </li> </ul> <div class="tab-content content-line"> </div> </ng-template> </nz-modal> <modal-move *ngIf="modal_move" [visible]="modal_move" [title]="\'移动\'" [directoryList]="moveTree" [folder]="true" [(selectedItem)]="move_tree_selectedItem" (click_move_li)="getMoveTreeList($event)" (onCancel)="move_handleCancel($event)" (onOk)="move_handleOk($event)"></modal-move> <modal-move *ngIf="modal_recycle" [visible]="modal_recycle" [title]="\'还原\'" [directoryList]="moveTree" [folder]="true" [(selectedItem)]="move_tree_selectedItem" (click_move_li)="getMoveTreeList($event)" (onCancel)="recoveryTo_handleCancel($event)" (onOk)="recoveryTo_handleOk($event)"></modal-move> <library-add *ngIf="library_upt" [isVisible]="library_upt" [title]="\'修改题集\'" [lib_old]="library_upt_old" (onCancel)="library_upt_handleCancel($event)" (onOk)="library_upt_handleOk($event)"></library-add> <library-add *ngIf="library_add" [isVisible]="library_add" [title]="\'创建题集\'" [lib_old]="library_upt_old" (onCancel)="library_add_handleCancel($event)" (onOk)="library_add_handleOk($event)"></library-add> <context-menu *ngIf="current_sidebar==\'disk\'" [checkedNumber]="_checkedNumber" [(_hidden)]="context_menu_visible" [type]="context_menu_type" [event]="context_menu_event" (onclickMenu)="context_menu_click($event)"></context-menu> '},859:function(e,t){e.exports="*{box-sizing:content-box !important}:host{flex:1;display:flex;flex-direction:column}\n"},860:function(e,t){e.exports='<section> <button nz-button [nzType]="\'primary\'" (click)="_schoolIsVisible = true;_schoolAdd = true;cleanCurrentSchool()"> <span>新增学校</span> </button> </section> <nz-modal [nzVisible]="_schoolIsVisible" [nzTitle]="_schoolAdd?\'新增学校\':\'修改学校\'" [nzContent]="modalContent_school" (nzOnCancel)="_schoolIsVisible = false;cleanCurrentSection();" (nzOnOk)="submitForm($event,validateForm.value)"> <ng-template #modalContent_school> <form nz-form [formGroup]="validateForm"> <div nz-form-item nz-row> <div nz-form-label nz-col [nzSm]="6" [nzXs]="24"> <label for="sectionInput" nz-form-item-required>选择城市</label> </div> <div nz-form-control nz-col [nzSm]="14" [nzXs]="24" nzHasFeedback> <nz-cascader formControlName="cityId" nzChangeOnSelect [(ngModel)]="_value" (ngModelChange)="_console($event)" (nzChange)="_console($event)" (nzLoad)="loadData($event)"> </nz-cascader> </div> </div> <div nz-form-item nz-row> <div nz-form-label nz-col [nzSm]="6" [nzXs]="24"> <label for="schoolName" nz-form-item-required>学校名称</label> </div> <div nz-form-control nz-col [nzSm]="14" [nzXs]="24" nzHasFeedback> <nz-input [nzSize]="\'large\'" formControlName="schoolName" [nzId]="\'schoolName\'"></nz-input> <div nz-form-explain *ngIf="getFormControl(\'schoolName\').dirty&&!getFormControl(\'schoolName\').value">请输入学段名称 </div> <div nz-form-explain *ngIf="getFormControl(\'cityId\').dirty&&!getFormControl(\'cityId\').value">请输入学段名称 </div> </div> </div> </form> </ng-template> </nz-modal> <nz-modal [nzVisible]="_sectionIsVisible" [nzTitle]="_sectionAdd?\'新增学段\':\'修改学段\'" [nzContent]="modalContent" (nzOnCancel)="_sectionIsVisible = false;cleanCurrentSection();" (nzOnOk)="submitForm($event,validateForm.value)"> <ng-template #modalContent> <form nz-form [formGroup]="validateForm"> <div nz-form-item nz-row> <div nz-form-label nz-col [nzSm]="6" [nzXs]="24"> <label for="sectionInput" nz-form-item-required>学段名称</label> </div> <div nz-form-control nz-col [nzSm]="14" [nzXs]="24" nzHasFeedback> <nz-input [nzSize]="\'large\'" formControlName="sectionInput" [nzId]="\'sectionInput\'"></nz-input> <div nz-form-explain *ngIf="getFormControl(\'sectionInput\').dirty&&!getFormControl(\'sectionInput\').value">请输入学段名称 </div> </div> </div> </form> </ng-template> </nz-modal> <nz-modal [nzVisible]="_gradeIsVisible" [nzTitle]="_gradeAdd?\'新增年级\':\'修改年级\'" [nzContent]="gradeContent" (nzOnCancel)="_gradeIsVisible=false;cleanCurrentGrade();" (nzOnOk)="submitForm($event,validateForm.value)"> <ng-template #gradeContent> <form nz-form [formGroup]="validateForm"> <div nz-form-item nz-row> <div nz-form-label nz-col [nzSm]="6" [nzXs]="24"> <label for="grade" nz-form-item-required>年级</label> </div> <div nz-form-control nz-col [nzSm]="14" [nzXs]="24" nzHasFeedback [nzValidateStatus]="validateForm.controls[\'grade\']"> <nz-input-group [nzSize]="\'large\'" nzCompact> <nz-select formControlName="gradeSection" style="width: 30%;" [nzPlaceHolder]="\'选择学段\'"> <nz-option *ngFor="let data of _sectionData" [nzLabel]="data.title" [nzValue]="data.id"></nz-option> </nz-select> <input formControlName="grade" id="\'grade\'" nz-input style="width: 70%;"> </nz-input-group> <div nz-form-explain *ngIf="getFormControl(\'grade\').dirty&&!getFormControl(\'grade\').value"> 请输入年级名称 </div> <div nz-form-explain *ngIf="getFormControl(\'gradeSection\').dirty&&!getFormControl(\'gradeSection\').value"> 请选择学段 </div> </div> </div> </form> </ng-template> </nz-modal> <nz-modal [nzVisible]="_classIsVisible" [nzTitle]="_classAdd?\'新增班级\':\'修改班级\'" [nzContent]="classContent" (nzOnCancel)="_classIsVisible=false;cleanCurrentClassName();" (nzOnOk)="submitForm($event,validateForm.value)"> <ng-template #classContent> <form nz-form [formGroup]="validateForm"> <div nz-form-item nz-row> <div nz-form-label nz-col [nzSm]="6" [nzXs]="24"> <label for="grade_school" nz-form-item-required>学校</label> </div> <div nz-form-control nz-col [nzSm]="14" [nzXs]="24" nzHasFeedback [nzValidateStatus]="validateForm.controls[\'grade_school\']"> <nz-select formControlName="grade_school" [nzPlaceHolder]="\'选择学校\'" [nzDisabled]="true"> <nz-option *ngFor="let data of _schoolData" [nzLabel]="data.student.name" [nzValue]="data.student.id"></nz-option> </nz-select> <div nz-form-explain *ngIf="getFormControl(\'grade_school\').dirty&&!getFormControl(\'grade_school\').value"> 请选择学校 </div> </div> </div> <div nz-form-item nz-row> <div nz-form-label nz-col [nzSm]="6" [nzXs]="24"> <label for="grade" nz-form-item-required>班级</label> </div> <div nz-form-control nz-col [nzSm]="14" [nzXs]="24" nzHasFeedback [nzValidateStatus]="validateForm.controls[\'className\']"> <nz-input-group [nzSize]="\'large\'" nzCompact> <nz-select formControlName="grade" style="width: 50%;" [nzPlaceHolder]="\'选择年级\'"> <nz-option *ngFor="let data of _gradeData" [nzLabel]="data.learnStage.title +\'-\'+ data.name" [nzValue]="data.id"></nz-option> </nz-select> <input formControlName="className" id="\'className\'" nz-input style="width: 50%;"> </nz-input-group> <div nz-form-explain *ngIf="getFormControl(\'grade\').dirty&&!getFormControl(\'grade\').value" style="color: red"> 请选择年级 </div> <div nz-form-explain *ngIf="getFormControl(\'className\').dirty&&!getFormControl(\'className\').value" style="color: red"> 请输入班级名称 </div> </div> </div> <div nz-form-item nz-row> <div nz-form-label nz-col [nzSm]="6" [nzXs]="24"> <label for="start_year" nz-form-item-required>开始时间</label> </div> <div nz-form-control nz-col [nzSm]="14" [nzXs]="24" nzHasFeedback [nzValidateStatus]="validateForm.controls[\'start_year\']"> <nz-input-group [nzSize]="\'large\'" nzCompact> <nz-input-number formControlName="start_year" id="\'start_year\'"></nz-input-number> </nz-input-group> <div nz-form-explain *ngIf="getFormControl(\'start_year\').dirty&&!getFormControl(\'start_year\').value" style="color: red"> 请选择开始时间 </div> </div> </div> <div nz-form-item nz-row> <div nz-form-label nz-col [nzSm]="6" [nzXs]="24"> <label for="end_year" nz-form-item-required>结束时间</label> </div> <div nz-form-control nz-col [nzSm]="14" [nzXs]="24" nzHasFeedback [nzValidateStatus]="validateForm.controls[\'end_year\']"> <nz-input-group [nzSize]="\'large\'" nzCompact> <nz-input-number formControlName="end_year" id="\'end_year\'"></nz-input-number> </nz-input-group> <div nz-form-explain *ngIf="getFormControl(\'end_year\').dirty&&!getFormControl(\'end_year\').value" style="color: red"> 请选择结束时间 </div> </div> </div> </form> </ng-template> </nz-modal> <nz-table #nzTable_school [nzScroll]="{ y: 240 }" [nzDataSource]="_schoolData" [nzPageSize]="10" [nzBordered]="true" [nzLoading]="_loading" [nzIsPagination]="_pagination" [nzShowFooter]="false" [nzShowTitle]="false" [nzSize]="\'middle\'"> <ng-template #nzFixedHeader [ngIf]="_header&&!_fixHeader"> <thead nz-thead> <tr> <th nz-th [nzWidth]="\'50%\'"><span>学校名称</span></th> <th nz-th [nzWidth]="\'50%\'"><span>操作</span></th> </tr> </thead> </ng-template> <tbody nz-tbody> <tr nz-tbody-tr *ngFor="let data of nzTable_school.data"> <td nz-td> {{data.district.province?data.district.province.name+\'--\':\'\'}}{{data.district.city?data.district.city.name+\'--\':\'\'}}{{data.district.region?data.district.region.name+\'--\':\'\'}}{{data.student.name}} </td> <td nz-td> <span> <a (click)="cleanCurrentGrade();this.validateForm.controls[\'grade_school\'].setValue(data.student.id);_classIsVisible = true;_classAdd = true;">新增班级</a> <span nz-table-divider></span> <a (click)="_schoolIsVisible = true;_schoolAdd = false;setCurrentSchool(data.student.id,data.student.name,data.student.tityId)">修改</a> <span nz-table-divider></span> <nz-popconfirm [nzTitle]="\'确定要删除这个学段吗？\'" (nzOnConfirm)="deleteSchool(data.student.id)" (nzOnCancel)="cancel()"> <a nz-popconfirm (click)="setCurrentSchool(data.student.id,data.student.name,data.student.tityId)">删除</a> </nz-popconfirm> </span> </td> </tr> </tbody> </nz-table> <nz-table #nzTable [nzScroll]="{ y: 240 }" [nzDataSource]="_sectionData" [nzPageSize]="10" [nzBordered]="true" [nzLoading]="_loading" [nzIsPagination]="false" [nzShowFooter]="false" [nzShowTitle]="false" [nzSize]="\'middle\'"> <ng-template #nzFixedHeader [ngIf]="_header&&!_fixHeader"> <thead nz-thead> <tr> <th nz-th [nzWidth]="\'50%\'"><span>学段名称</span></th> </tr> </thead> </ng-template> <tbody nz-tbody> <tr nz-tbody-tr *ngFor="let data of nzTable.data"> <td nz-td>{{data.title}}</td> </tr> </tbody> </nz-table> <nz-table #nzTable_grade [nzScroll]="{ y: 240 }" [nzDataSource]="_gradeData" [nzPageSize]="10" [nzBordered]="true" [nzLoading]="_loading" [nzIsPagination]="false" [nzShowFooter]="false" [nzShowTitle]="false" [nzSize]="\'middle\'"> <ng-template #nzFixedHeader [ngIf]="_header&&!_fixHeader"> <thead nz-thead> <tr> <th nz-th [nzWidth]="\'50%\'"><span>年级名称</span></th> </tr> </thead> </ng-template> <tbody nz-tbody> <tr nz-tbody-tr *ngFor="let data of nzTable_grade.data"> <td nz-td>{{data.learnStage.title}}--{{data.name}}</td> </tr> </tbody> </nz-table> <nz-table #nzTable_class [nzScroll]="{ y: 240 }" [nzAjaxData]="_classData" [nzBordered]="true" [nzLoading]="_loading" [nzIsPagination]="true" [nzPageIndex]="_currentPage" (nzPageIndexChangeClick)="_pageChange($event);" [nzTotal]="_totalClasses" [nzPageSize]="10" [nzShowFooter]="false" [nzShowTitle]="false" [nzSize]="\'middle\'"> <ng-template #nzFixedHeader [ngIf]="_header&&!_fixHeader"> <thead nz-thead> <tr> <th nz-th [nzWidth]="\'50%\'"><span>班级名称</span></th> <th nz-th [nzWidth]="\'50%\'"><span>操作</span></th> </tr> </thead> </ng-template> <tbody nz-tbody> <tr nz-tbody-tr *ngFor="let data of nzTable_class.data"> <td nz-td> {{data.school?data.school.name+\'--\':\'\'}}{{data.grade.learnStage.title}}--{{data.grade.name}}--{{data.name}} </td> <td nz-td> <span> <a (click)="_classIsVisible = true;_classAdd = false;setCurrentClassName(data.id,data.name,data.gradeId,data.schoolId,data.start_year,data.end_year)">修改</a> <span nz-table-divider></span> <nz-popconfirm [nzTitle]="\'确定要删除这个年级吗？\'" (nzOnConfirm)="deleteClass(data.id)" (nzOnCancel)="cancel()"> <a nz-popconfirm (click)="setCurrentClassName(data.id,data.name,data.gradeId,data.schoolId,data.start_year,data.end_year)">删除</a> </nz-popconfirm> </span> </td> </tr> </tbody> </nz-table> '},861:function(e,t){e.exports=".components-table-demo-control-bar{margin-bottom:10px}.components-table-demo-control-bar ::ng-deep .ant-form-item{margin-right:16px;margin-bottom:8px}:host ::ng-deep .ant-table{margin-bottom:20px}\n"},862:function(e,t){e.exports='<form nz-form [formGroup]="validateForm" (ngSubmit)="_submitForm()"> <div nz-form-item nz-row> <div nz-form-label nz-col [nzSm]="6" [nzXs]="24"> <label for="title" nz-form-item-required>教材名称</label> </div> <div nz-form-control nz-col [nzSm]="14" [nzXs]="24" nzHasFeedback> <nz-input [nzSize]="\'large\'" formControlName="title" [nzId]="\'title\'"></nz-input> <div nz-form-explain *ngIf="getFormControl(\'title\').dirty&&getFormControl(\'title\').hasError(\'required\')"> 请输入教材名称 </div> </div> </div> <div nz-form-item nz-row> <div nz-form-label nz-col [nzSm]="6" [nzXs]="24"> <label for="intro" nz-form-item-required>教材简介</label> </div> <div nz-form-control nz-col [nzSm]="14" [nzXs]="24" nzHasFeedback> <nz-input [nzSize]="\'large\'" formControlName="intro" [nzId]="\'intro\'"></nz-input> <div nz-form-explain *ngIf="getFormControl(\'intro\').dirty&&getFormControl(\'intro\').hasError(\'required\')"> 请输入教材简介！ </div> </div> </div> <div nz-form-item nz-row> <div nz-form-label nz-col [nzSm]="6" [nzXs]="24"> <label for="isbn" nz-form-item-required> <span>教材ISBN编码</span> <nz-tooltip [nzTitle]="\'中国出版社ISBN代码\'"> <i nz-tooltip class="anticon anticon-question-circle-o"></i> </nz-tooltip> </label> </div> <div nz-form-control nz-col [nzSm]="14" [nzXs]="24" nzHasFeedback> <nz-input [nzSize]="\'large\'" formControlName="isbn" [nzId]="\'isbn\'"></nz-input> <div nz-form-explain *ngIf="getFormControl(\'isbn\').dirty&&getFormControl(\'isbn\').hasError(\'required\')"> 请输入教材编码 </div> </div> </div> <div nz-form-item nz-row> <div nz-form-label nz-col [nzSm]="6" [nzXs]="24"> <label for="publishHouse" nz-form-item-required> <span> 出版社名称 </span> </label> </div> <div nz-form-control nz-col [nzSm]="14" [nzXs]="24" nzHasFeedback> <nz-input [nzSize]="\'large\'" formControlName="publishHouse" [nzId]="\'publishHouse\'"></nz-input> <div nz-form-explain *ngIf="getFormControl(\'publishHouse\').dirty&&getFormControl(\'publishHouse\').hasError(\'required\')"> 请输入出版社名称！ </div> </div> </div> <div nz-form-item nz-row> <div nz-form-label nz-col [nzSm]="6" [nzXs]="24"> <label for="imgTfileId" nz-form-item-required>教材封面</label> </div> <div nz-form-control nz-col [nzSm]="14" [nzXs]="24" nzHasFeedback> <nz-input [nzSize]="\'large\'" [nzId]="\'imgTfileId\'" [nzType]="\'file\'" (change)="onChange($event)"></nz-input> <div nz-form-explain *ngIf="getFormControl(\'imgTfileId\').dirty&&!_file" style="color: red;">请上传教材封面！ </div> </div> </div> <div nz-form-item nz-row> <div nz-form-label nz-col [nzSm]="6" [nzXs]="24"> <label for="gradeId" nz-form-item-required>学段、年级</label> </div> <div nz-form-control nz-col [nzSm]="14" [nzXs]="24" nzHasFeedback> {{_text}} <nz-cascader [nzShowInput]="false" [nzOptions]="_options" [(ngModel)]="_value" (ngModelChange)="_console($event)" (nzChange)="_console($event)" (nzLoad)="loadData($event)" (nzSelectionChange)="onSelectionChange($event)"> <a href="javascript: void(0)">选择年级学段</a> </nz-cascader> <div nz-form-explain *ngIf="getFormControl(\'gradeId\').dirty&&!getFormControl(\'gradeId\').value" style="color: red;">请选择学段和年级！ </div> </div> </div> <div nz-form-item nz-row> <div nz-form-label nz-col [nzSm]="6" [nzXs]="24"> <label for="version" nz-form-item-required>教材版次</label> </div> <div nz-form-control nz-col [nzSm]="14" [nzXs]="24" nzHasFeedback> <div nz-row [nzGutter]="8"> <nz-select formControlName="version"> <nz-option *ngFor="let version of _versions" [nzLabel]="version.label" [nzValue]="version.value"></nz-option> </nz-select> </div> <div nz-form-explain *ngIf="getFormControl(\'version\').dirty&&getFormControl(\'version\').hasError(\'required\')"> 请选择教材版次 </div> </div> </div> <div nz-form-item nz-row style="margin-bottom:8px;"> <div nz-form-control nz-col [nzSpan]="14" [nzOffset]="6"> <button nz-button [nzSize]="\'large\'" [nzType]="\'primary\'">确定</button> &nbsp; <a *ngIf="!this.bookId" routerLink="../">取消</a> <a *ngIf="this.bookId" routerLink="../../book/{{this.bookId}}">取消</a> </div> </div> </form> '},863:function(e,t){e.exports=":host ::ng-deep input[type='file']{border:none;width:auto}:host ::ng-deep input[type='file']:focus,:host ::ng-deep input[type='file'] :visited{outline:none;border:none;box-shadow:none}:host ::ng-deep .ant-cascader-picker{width:auto}\n"},864:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TeachFormData=[{value:"CHANG_GE",label:"唱歌 （人教版）"},{value:"XIN_SHANG",label:"欣赏（人教版）"},{value:"HUO_DONG",label:"活动（人教版）"},{value:"LING_TING",label:"聆听（人教版）"},{value:"YAN_CHANG",label:"演唱（人教版）"},{value:"ZHI_SHI_JI_NENG",label:"知识与技能（人教版）"},{value:"YAN_ZOU",label:"演奏（人教版）"},{value:"BIAN_CHUANG_HUO_DONG",label:"编创与活动（人教版）"},{value:"YAN_CHANG_S",label:"演唱（苏教版）"},{value:"LING_TING_S",label:"聆听（苏教版）"},{value:"BIAN_CHUANG_HUO_DONG_S",label:"编创与活动（苏教版）"},{value:"YAN_ZOU_S",label:"演奏（苏教版）"},{value:"GE_BIAO_YAN",label:"歌表演（湘教版）"},{value:"YIN_YUE_ZHI_SHI",label:"音乐知识（湘教版）"},{value:"YIN_YUE_YOU_XI",label:"音乐游戏（湘教版）"},{value:"TING_SHANG",label:"听赏（湘教版）"},{value:"LV_DONG",label:"律动（湘教版）"},{value:"HUO_DONG_X",label:"活动（湘教版）"},{value:"YAN_ZOU_X",label:"演奏（湘教版）"},{value:"ZONG_HE_BIAO_YAN",label:"综合表演（湘教版）"},{value:"YAN_CHANG_X",label:"演唱（湘教版）"},{value:"CHANG_YI_CHANG",label:"唱一唱（湘教版）"},{value:"TING_SHANG_YU_GEN_CHANG",label:"听赏与跟唱（湘教版）"},{value:"REN_SHI_YUE_QI",label:"认识乐器（湘教版）"},{value:"JI_TI_WU",label:"集体舞（湘教版）"},{value:"SHENG_YIN_BIAO_XIAN",label:"声音表现（湘教版）"},{value:"DU_PU_CHANG_GE",label:"读谱唱歌（湘教版）"},{value:"YIN_YUE_JIA_GU_SHI",label:"音乐家故事（湘教版）"}]},865:function(e,t){e.exports='<nz-modal [nzVisible]="templateAdd" [nzTitle]="\'添加章节\'" [nzContent]="chapterAdd" (nzOnCancel)="templateAdd=false;;" (nzOnOk)="submitForm($event,validateForm.value)"> <ng-template #chapterAdd> <form nz-form [formGroup]="validateForm"> <div nz-form-item nz-row> <div nz-form-label nz-col [nzSm]="6" [nzXs]="24"> <label for="teachForm" nz-form-item-required>教学形式</label> </div> <div nz-form-control nz-col [nzSm]="14" [nzXs]="24" nzHasFeedback [nzValidateStatus]="validateForm.controls[\'teachForm\']"> <nz-select formControlName="teachForm" [nzPlaceHolder]="\'选择教学形式\'"> <nz-option *ngFor="let data of this.teachFormData" [nzLabel]="data.label" [nzValue]="data.value"></nz-option> </nz-select> <div nz-form-explain *ngIf="getFormControl(\'teachForm\').dirty&&!getFormControl(\'teachForm\').value"> 请选择教学形式 </div> </div> </div> <div nz-form-item nz-row> <div nz-form-label nz-col [nzSm]="6" [nzXs]="24"> <label for="title" nz-form-item-required>章节名称</label> </div> <div nz-form-control nz-col [nzSm]="14" [nzXs]="24" nzHasFeedback [nzValidateStatus]="validateForm.controls[\'title\']"> <input formControlName="title" id="\'title\'" nz-input> <div nz-form-explain *ngIf="getFormControl(\'title\').dirty&&!getFormControl(\'title\').value"> 请输入章节名称 </div> </div> </div> </form> </ng-template> </nz-modal> <nz-modal [nzVisible]="templateRevise" [nzTitle]="\'修改章节\'" (nzOnCancel)="templateRevise=false;" (nzOnOk)="submitForm($event,reviseForm.value)" [nzContent]="chapterRevise"> <ng-template #chapterRevise> <form nz-form [formGroup]="reviseForm"> <div nz-form-item nz-row> <div nz-form-label nz-col [nzSm]="6" [nzXs]="24"> <label for="rf_title" nz-form-item-required>章节名称</label> </div> <div nz-form-control nz-col [nzSm]="14" [nzXs]="24" nzHasFeedback [nzValidateStatus]="validateForm.controls[\'rf_title\']"> <input formControlName="rf_title" id="\'rf_title\'" nz-input> <div nz-form-explain *ngIf="getFormControl(\'rf_title\').dirty&&!getFormControl(\'rf_title\').value"> 请输入章节名称 </div> </div> </div> </form> </ng-template> </nz-modal> <p>教材ID：{{bookId}}</p> <button nz-button [nzType]="\'primary\'" routerLink="../../addMaterial/{{bookId}}"><span>教材基础信息修改</span></button> <fieldset> <legend><i class="anticon anticon-team"></i>章节 <button nz-button title="新增章节" (click)="this.templateAdd = true;"><i class="anticon anticon-plus"></i></button> </legend> </fieldset> <app-book-chapter [chapter]="this.chapters" (onAlert)="this.chapterOperation($event)"></app-book-chapter> '},866:function(e,t){e.exports=""},867:function(e,t,n){"use strict";var o=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,s=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(r<3?i(s):r>3?i(t,n,s):i(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var r=n(2),s=n(6),a=function(){function e(e){var t=this;this._message=e,this.onDelete=new r.EventEmitter,this._confirm=function(){t.onDelete.emit(t.book.id)},this._cancel=function(){t._message.success("取消删除")}}return e.prototype.ngOnInit=function(){},o([r.Input(),i("design:type",Object)],e.prototype,"book",void 0),o([r.Output(),i("design:type",Object)],e.prototype,"onDelete",void 0),e=o([r.Component({selector:"app-materials",template:n(868),styles:[n(869)]}),i("design:paramtypes",[s.NzMessageService])],e)}();t.MaterialsComponent=a},868:function(e,t){e.exports='<nz-card style="width:240px"> <ng-template #body> <div class="custom-image" [routerLink]="[\'book\',book.id]"> <nz-dropdown> <a class="ant-dropdown-link" nz-dropdown> <img alt="图片" width="100%" [src]="\'D:/dd-yinyue/resource/\'+book.imgTfileId"/> </a> <ul nz-menu> <li nz-menu-item style="display: flex; justify-content: space-around;"> <button nz-button class="ant-btn" [routerLink]="[\'book\',book.id]">编辑教材</button> <nz-popconfirm [nzTitle]="\'确定要删除这个教材吗？\'" (nzOnConfirm)="_confirm()" (nzOnCancel)="_cancel()" [nzPlacement]="\'right\'"> <button nz-popconfirm nz-button class="ant-btn">删除教材</button> </nz-popconfirm> </li> </ul> </nz-dropdown> </div> <div class="custom-card" *ngIf="book?.title"> <h3>{{book.title}}</h3> </div> </ng-template> </nz-card> '},869:function(e,t){e.exports=":host ::ng-deep .custom-image img{display:block}:host ::ng-deep .custom-card{padding:10px 16px}:host ::ng-deep .custom-card p{color:#999}:host ::ng-deep .ant-card-body{padding:0}:host ::ng-deep nz-dropdown{width:100%}:host ::ng-deep nz-dropdown .ant-dropdown-link{height:300px;display:flex;overflow:hidden;justify-content:center;align-items:center}\n"},870:function(e,t,n){"use strict";var o=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,s=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(r<3?i(s):r>3?i(t,n,s):i(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var r=n(2),s=n(68),a=n(6),l=function(){function e(e,t){var n=this;this.tms=e,this._message=t,this.onAlert=new r.EventEmitter,this._alert=function(e){n.onAlert.emit(e)},this._cancel=function(){n._message.success("取消删除")}}return e.prototype.ngOnInit=function(){},o([r.Input(),i("design:type",Array)],e.prototype,"chapter",void 0),o([r.Output(),i("design:type",Object)],e.prototype,"onAlert",void 0),e=o([r.Component({selector:"app-book-chapter",template:n(871),styles:[n(872)]}),i("design:paramtypes",[s.TeachingMaterialService,a.NzMessageService])],e)}();t.BookChapterComponent=l},871:function(e,t){e.exports='<nz-collapseset> <nz-collapse *ngFor="let cha of this.chapter" [nzTitle]="cha.ptitle"> <button nz-button title="新增章节" (click)="this._alert({type:\'add\',id:cha.pid})"><i class="anticon anticon-plus-circle-o"></i></button> <button nz-button title="修改章节" (click)="this._alert({type:\'revise\',id:cha.pid})"><i class="anticon anticon-tool"></i></button> <nz-popconfirm [nzTitle]="\'确定要删除这个章节吗？\'" (nzOnConfirm)="this._alert({type:\'delete\',id:cha.pid})" (nzOnCancel)="_cancel()" [nzPlacement]="\'right\'"> <button nz-popconfirm nz-button class="ant-btn" title="删除章节"><i class="anticon anticon-delete"></i></button> </nz-popconfirm> <p>id {{cha.pid}}</p> <div *ngIf="cha.children&&cha.children.length>0"> <nz-collapseset> <nz-collapse *ngFor="let cha_c of cha.children" [nzTitle]="cha_c.ctitle"> <button nz-button title="修改章节" (click)="this._alert({type:\'revise\',id:cha_c.cid})"><i class="anticon anticon-tool"></i></button> <nz-popconfirm [nzTitle]="\'确定要删除这个章节吗？\'" (nzOnConfirm)="this._alert({type:\'delete\',id:cha_c.cid})" (nzOnCancel)="_cancel()" [nzPlacement]="\'right\'"> <button nz-popconfirm nz-button class="ant-btn" title="删除章节"><i class="anticon anticon-delete"></i></button> </nz-popconfirm> <p>id {{cha_c.cid}}</p> </nz-collapse> </nz-collapseset> </div> </nz-collapse> </nz-collapseset> '},872:function(e,t){e.exports=""},873:function(e,t){e.exports=' <modal-loding [visible]="modal_loding" [title]="\'正在请求...\'"></modal-loding> <div class="d_outer" (click)="click_all($event)"> <div class="d_main"> <div class="d_header"> <div class="toolbar clear"> <div class="btn-message"> <a class="g-btn g-btn-gray" (click)="paper_bind_model = true;"><span class="btn-inner"><i class="ico ico-note"></i><span class="text">绑定试卷</span></span></a> <a style="margin-left:100px;" class="g-btn g-btn-gray" (click)="this.papers_type=\'handle\';click_a(\'paperAdd\');"><span class="btn-inner"><i class="ico ico-note"></i><span class="text">手动组卷</span></span></a> <a class="g-btn g-btn-gray" (click)="this.papers_type=\'auto\';click_a(\'paperAdd\');"><span class="btn-inner"><i class="ico ico-note"></i><span class="text">自动组卷</span></span></a> </div> </div> </div> <div class="d_content"> <nz-table #nzTable [nzAjaxData]="directoryList" [nzIsPagination]="false"> <thead nz-thead> <tr> <th nz-th><span>试卷名称</span></th> <th nz-th><span>试卷类型</span></th> <th nz-th><span>题目数量</span></th> <th nz-th><span>试卷总分</span></th> <th nz-th><span>作答时间</span></th> <th nz-th><span>测验操作</span></th> </tr> </thead> <tbody nz-tbody> <tr nz-tbody-tr *ngFor="let data of nzTable.data" (dblclick)="this.doubleClick(data.id,data.examPaperType)"> <td nz-td class="exam-title" title="{{data.title}}"> {{data.title}} </td> <td nz-td> {{data.examPaperType|examPaperTypePipe}} </td> <td nz-td> {{data.questionNum}} </td> <td nz-td> {{data.score}} </td> <td nz-td> {{data.resolvedTime}} </td> <td> <button nz-button [nzType]="\'primary\'" [nzShape]="\'circle\'" title="编辑试卷题目" [routerLink]="[\'./question\']" [queryParams]="{id:data.id,type:data.examPaperType}"> <i class="anticon anticon-setting"></i></button> <button nz-button [nzType]="\'primary\'" [nzShape]="\'circle\'" title="编辑试卷基本信息" (click)="this.setForm(data.id,data.title,data.score,data.grade);this.isBaseVisible=true;"> <i class="anticon anticon-edit"></i></button> <button nz-button [nzType]="\'danger\'" [nzShape]="\'circle\'" title="删除试卷" (click)="this.deletePaper(data.id)"> <i class="anticon anticon-delete"></i></button> </td> </tr> </tbody> </nz-table> </div> </div> </div> <nz-modal [nzVisible]="this.paper_bind_model" [nzTitle]="\'绑定试卷\'" [nzContent]="modalContent" (nzOnCancel)="handleCancel($event)" (nzOnOk)="handleOk($event)"> <ng-template #modalContent> <form nz-form [formGroup]="validateForm"> <div nz-form-item nz-row> <div nz-col [nzSpan]="7" nz-form-label> <label nz-form-item-required>考试试卷</label> </div> <div nz-col [nzSpan]="12" nz-form-control> <nz-select [nzPlaceHolder]="\'请选择试卷\'" formControlName="examPaperId"> <nz-option *ngFor="let paper of paperList" [nzLabel]="paper.title" [nzValue]="paper.id"></nz-option> </nz-select> <div nz-form-explain *ngIf="getFormControl(\'examPaperId\').dirty&&getFormControl(\'examPaperId\').hasError(\'required\')"> 请输入创建者姓名! </div> </div> </div> <div nz-form-item nz-row> </div> </form> </ng-template> </nz-modal> <papers-add [isVisible]="papers_add" (onCancel)="papers_add_handleCancel($event)" [paperType]="this.papers_type" [(examType)]="this.examType" (onOk)="papers_add_handleOk($event)"></papers-add> <nz-modal [nzVisible]="isBaseVisible" [nzTitle]="\'编辑试卷\'" [nzContent]="modalContent1" (nzOnCancel)="this.isVisible=false;this.validateFormInit();" (nzOnOk)="this.updatePaper();"> <ng-template #modalContent1> <form nz-form [formGroup]="validateBaseForm"> <div nz-form-item nz-row> <div nz-form-label nz-col [nzSpan]="7"> <label nz-form-item-required>试卷名称</label> </div> <div nz-col [nzSpan]="12" nz-form-control nzHasFeedback> <nz-input formControlName="title" [nzType]="\'text\'" [nzPlaceHolder]="\'请输入试卷名\'" [nzSize]="\'large\'"> </nz-input> <div nz-form-explain *ngIf="getBaseFormControl(\'title\').dirty&&getBaseFormControl(\'title\').hasError(\'required\')"> 请填写试卷名称! </div> <div nz-form-explain *ngIf="getBaseFormControl(\'title\').dirty&&getBaseFormControl(\'title\').pending">Validating... </div> </div> </div> <div nz-form-item nz-row> <div nz-col [nzSpan]="7" nz-form-label> <label nz-form-item-required>试卷分数</label> </div> <div nz-col [nzSpan]="12" nz-form-control> <nz-input-number formControlName="score" [nzMin]="0" [nzStep]="1"></nz-input-number> <div nz-form-explain *ngIf="getBaseFormControl(\'score\').dirty&&getBaseFormControl(\'score\').hasError(\'required\')"> 请填写试卷描述! </div> <div nz-form-explain *ngIf="getBaseFormControl(\'score\').dirty&&getBaseFormControl(\'score\').pending">Validating... </div> </div> </div> </form> </ng-template> </nz-modal> '},874:function(e,t){e.exports=""},875:function(e,t){e.exports='<nz-layout class="layout" style="flex: 1;display: flex;"> <nz-sider [nzWidth]="220" style="background:#fff"> <ul nz-menu [nzMode]="\'inline\'" style="width: 100%;height: 100%;"> <li nz-menu-item routerLinkActive="ant-menu-item-selected"> <a [routerLink]="[\'paperManager\']"><span title><i class="anticon anticon-database"></i>试卷管理</span></a> </li> <li nz-menu-item routerLinkActive="ant-menu-item-selected"> <a [routerLink]="[\'examination\']"><span title><i class="anticon anticon-book"></i>考试管理</span></a> </li> </ul> </nz-sider> <nz-content style="background:#fff;flex: 1;"> <router-outlet></router-outlet> </nz-content> </nz-layout> '},876:function(e,t){e.exports=":host ::ng-deep{display:flex;flex:1;overflow:auto}\n"},877:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(447),i=n(449),r=n(448),s=n(450),a=n(451),l=n(424);t.TestRoute=[{path:"",component:r.TestComponent,children:[{path:"",redirectTo:"examination",pathMatch:"full"},{path:"paperManager",component:s.PaperManagerComponent},{path:"paperManager/question",component:a.PaperQuestionComponent,canDeactivate:[l.CanDeactivateGuard]},{path:"testPaper/:id",component:o.PaperComponent},{path:"testPaper/:id/question",component:a.PaperQuestionComponent,canDeactivate:[l.CanDeactivateGuard]},{path:"examination",component:i.ExaminationComponent}]}]},878:function(e,t){e.exports=' <modal-loding [visible]="modal_loding" [title]="\'正在请求...\'"></modal-loding> <div class="button-wrap"> <button nz-button [nzType]="\'default\'" [nzSize]="\'large\'" (click)="this.examination_add = true;"> <span> <i class="anticon anticon-file-add"></i>&nbsp;创建测验</span> </button> </div> <nz-table #nzTable [nzAjaxData]="listData" [(nzPageIndex)]="_current" [nzTotal]="_total" [nzPageSize]="_pagesize" (nzDataChange)="_displayDataChange(listData)" (nzPageIndexChangeClick)="pageChangeClick($event)" [nzIsPagination]="false"> <thead nz-thead> <tr> <th nz-th><span>测验名称</span></th> <th nz-th><span>测验介绍</span></th> <th nz-th><span>测验类型</span></th> <th nz-th><span>测验操作</span></th> </tr> </thead> <tbody nz-tbody> <tr nz-tbody-tr *ngFor="let data of nzTable.data" (dblclick)="this.editExamPaper(data.id);"> <td nz-td class="exam-title" title="{{data.title}}"> {{data.title}} </td> <td nz-td> <p>{{data.intro}}</p> </td> <td nz-td> {{data?.exam_type|examPipe}} </td> <td nz-td> <button nz-button [nzType]="\'primary\'" [nzShape]="\'circle\'" (click)="this.editExamPaper(data.id)" title="编辑测验试卷"> <i class="anticon anticon-setting"></i></button> <button *ngIf="data.examStatus===\'VALID\'" nz-button [nzType]="\'primary\'" [nzShape]="\'circle\'" (click)="this.invalidExam(data.id)" title="使测验失效"><i class="anticon anticon-close"></i></button> <button *ngIf="data.examStatus!==\'VALID\'" nz-button [nzType]="\'primary\'" [nzShape]="\'circle\'" (click)="this.validExam(data.id)" title="使测验有效"><i class="anticon anticon-check"></i></button> <button nz-button [nzType]="\'danger\'" [nzShape]="\'circle\'" (click)="this.deleteExam(data.id)" title="删除测验"><i class="anticon anticon-delete"></i></button> </td> </tr> </tbody> </nz-table> <nz-modal [nzVisible]="examination_add" [nzTitle]="\'创建测验\'" [nzContent]="modalContent" (nzOnCancel)="examination_add = false" (nzOnOk)="submitForm();"> <ng-template #modalContent> <form nz-form [formGroup]="validateForm"> <div nz-form-item nz-row> <div nz-form-label nz-col [nzSpan]="7"> <label nz-form-item-required>考试名称</label> </div> <div nz-col [nzSpan]="12" nz-form-control nzHasFeedback> <nz-input formControlName="title" [nzType]="\'text\'" [nzPlaceHolder]="\'请输入考试名称\'" [nzSize]="\'large\'"> </nz-input> <div nz-form-explain *ngIf="getFormControl(\'title\').dirty&&getFormControl(\'title\').hasError(\'required\')"> 请输入考试名称! </div> <div nz-form-explain *ngIf="getFormControl(\'title\').dirty&&getFormControl(\'title\').pending">Validating... </div> </div> </div> <div nz-form-item nz-row> <div nz-form-label nz-col [nzSpan]="7"> <label nz-form-item-required>考试详情</label> </div> <div nz-col [nzSpan]="12" nz-form-control nzHasFeedback> <nz-input formControlName="intro" [nzType]="\'text\'" [nzPlaceHolder]="\'请输入考试详情\'" [nzSize]="\'large\'"> </nz-input> <div nz-form-explain *ngIf="getFormControl(\'intro\').dirty&&getFormControl(\'intro\').hasError(\'required\')"> 请输入考试详情! </div> <div nz-form-explain *ngIf="getFormControl(\'intro\').dirty&&getFormControl(\'intro\').pending">Validating... </div> </div> </div> <div nz-form-item nz-row> <div nz-col [nzSpan]="7" nz-form-label> <label nz-form-item-required>考试类型</label> </div> <div nz-col [nzSpan]="12" nz-form-control> <nz-select [nzPlaceHolder]="\'请选择考试类型\'" formControlName="examType" (ngModelChange)="this.examTypeChange($event)"> <nz-option *ngFor="let exam of examTypes" [nzLabel]="exam.label" [nzValue]="exam.value"></nz-option> </nz-select> <div nz-form-explain *ngIf="getFormControl(\'examType\').dirty&&getFormControl(\'examType\').hasError(\'required\')"> 请输入创建者姓名! </div> </div> </div> </form> <div nz-form-item nz-row *ngIf="this.validateForm.value.examType"> <div nz-col [nzSpan]="7" nz-form-label> <label nz-form-item-required>年级</label> </div> <div nz-col [nzSpan]="12" nz-form-control> <nz-cascader [nzDisabled]="this.validateForm.value.examTypes" (nzSelect)="_select($event);_console(classSTH)" (nzLoad)="loadData($event)"> </nz-cascader> </div> </div> </ng-template> </nz-modal> <nz-modal [nzVisible]="class_bind_model" [nzTitle]="\'绑定课堂\'" [nzContent]="classBindContent" (nzOnCancel)="class_bind_model = false" (nzOnOk)="bindClass();"> <ng-template #classBindContent> <div nz-form-item nz-row> <div nz-col [nzSpan]="7" nz-form-label> <label nz-form-item-required>课堂列表</label> </div> <div nz-col [nzSpan]="12" nz-form-control> <nz-select [nzPlaceHolder]="\'请选择绑定的班级\'" [(ngModel)]="bindClassId" style="width: 100%;"> <nz-option *ngFor="let data of classList" [nzLabel]="data.title" title="{{data.title}}" [nzValue]="data.id"></nz-option> </nz-select> </div> </div> </ng-template> </nz-modal> '},879:function(e,t){e.exports=".cp-line-height{height:40px;line-height:40px;font-size:14px}.btn,.big-btn,.edit-btn,.delete-btn{padding:6px 10px;color:#fff;border:none;border-radius:3px;margin:0 3px}.big-btn{padding:8px 16px;margin:0px 20px 0px 0px}#cp-lists th,td,p,span{font-size:14px}.edit-btn{background:#37BC9B;cursor:pointer}.delete-btn{background:#c30;cursor:pointer}.exam-title{max-width:250px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}#search-name{float:right;width:150px;border-radius:0}:host ::ng-deep .button-wrap{padding:20px;background:#f5f6f9;border-bottom:1px solid #d9d9d9}:host ::ng-deep .button-wrap .ant-btn{border-radius:0;margin-right:8px}:host ::ng-deep .button-wrap .ant-dropdown-button .ant-btn{margin-right:0}:host ::ng-deep .button-wrap .ant-input{border-radius:0}:host ::ng-deep .ant-table{margin-bottom:18px;font-size:14px}:host ::ng-deep .ant-table .ant-table-thead>tr>th{background-color:#fff;border-bottom:1px solid #d9d9d9;padding:10px 8px}:host ::ng-deep .ant-table .ant-table-tbody>tr>td{padding:10px 8px}:host ::ng-deep .ant-table-pagination.ant-pagination{margin:16px 25px}\n"},880:function(e,t){e.exports=' <modal-loding [visible]="modal_loding" [title]="\'正在请求...\'"></modal-loding> <div class="d_outer" (click)="click_all($event)"> <div class="d_main"> <div class="d_header"> <div class="toolbar clear"> <div class="btn-message"> </div> </div> </div> <div class="d_content"> <nz-table #nzTable [nzAjaxData]="directoryList" [nzIsPagination]="false"> <thead nz-thead> <tr> <th nz-th><span>试卷名称</span></th> <th nz-th><span>试卷类型</span></th> <th nz-th><span>总分</span></th> <th nz-th><span>总题数</span></th> <th nz-th><span>试卷是否公开</span></th> <th nz-th><span>试卷难度</span></th> <th nz-th><span>测验操作</span></th> </tr> </thead> <tbody nz-tbody> <tr nz-tbody-tr *ngFor="let data of nzTable.data" (dblclick)="this.navigateTo(data.id, data.examPaperType)"> <td nz-td class="exam-title" title="{{data.title}}"> {{data.title}} </td> <td nz-td> {{data.examPaperType | examPaperTypePipe}} </td> <td nz-td> {{data.score}} </td> <td nz-td> {{data.questionNum}} </td> <td nz-td> {{data.isOpen===true?\'是\':\'否\'}} </td> <td nz-td> {{data.difficulty}} </td> <td nz-td> <button nz-button [nzType]="\'primary\'" [nzShape]="\'circle\'" title="编辑试卷基本信息" (click)="this.setForm(data.id,data.title,data.score,data.grade);this.isVisible=true;"> <i class="anticon anticon-setting"></i></button> </td> </tr> </tbody> </nz-table> </div> </div> </div> <papers-add [isVisible]="papers_add" (onCancel)="papers_add_handleCancel($event)" [paperType]="this.papers_type" [(examType)]="this.examType" (onOk)="papers_add_handleOk($event)"></papers-add> <nz-modal [nzVisible]="isVisible" [nzTitle]="\'编辑试卷\'" [nzContent]="modalContent" (nzOnCancel)="this.isVisible=false;this.validateFormInit();" (nzOnOk)="this.updatePaper();" [nzConfirmLoading]="this.isLoading"> <ng-template #modalContent> <form nz-form [formGroup]="validateForm"> <div nz-form-item nz-row> <div nz-form-label nz-col [nzSpan]="7"> <label nz-form-item-required>试卷名称</label> </div> <div nz-col [nzSpan]="12" nz-form-control nzHasFeedback> <nz-input formControlName="title" [nzType]="\'text\'" [nzPlaceHolder]="\'请输入试卷名\'" [nzSize]="\'large\'"> </nz-input> <div nz-form-explain *ngIf="getFormControl(\'title\').dirty&&getFormControl(\'title\').hasError(\'required\')"> 请填写试卷名称! </div> <div nz-form-explain *ngIf="getFormControl(\'title\').dirty&&getFormControl(\'title\').pending">Validating... </div> </div> </div> <div nz-form-item nz-row> <div nz-col [nzSpan]="7" nz-form-label> <label nz-form-item-required>试卷分数</label> </div> <div nz-col [nzSpan]="12" nz-form-control> <nz-input-number formControlName="score" [nzMin]="0" [nzStep]="1"></nz-input-number> <div nz-form-explain *ngIf="getFormControl(\'score\').dirty&&getFormControl(\'score\').hasError(\'required\')"> 请填写试卷描述! </div> <div nz-form-explain *ngIf="getFormControl(\'score\').dirty&&getFormControl(\'score\').pending">Validating... </div> </div> </div> </form> </ng-template> </nz-modal> '},881:function(e,t){e.exports=""},882:function(e,t){e.exports=' <div style="padding: 20px;" class="tag-container"> <nz-tag [nzColor]="\'blue\'">试卷名称：{{this.paperInfo?.title}}</nz-tag> <nz-tag [nzColor]="\'blue\'">试卷总分：{{this.paperInfo?.score}}</nz-tag> <nz-tag [nzColor]="\'blue\'">试卷总题数：{{this.paperInfo?.questionNum}}</nz-tag> <nz-tag [nzColor]="\'blue\'">当前试题数：{{this.paperQuestionList?.length}}</nz-tag> <nz-tag [nzColor]="\'blue\'">试卷类型：{{this.paperInfo?.examPaperType| examPaperTypePipe}}</nz-tag> </div> <div class="d_outer"> <div class="d_main"> <div class="d_header"> <div class="toolbar clear"> <div class="btn-message"> <a class="g-btn g-btn-gray" (click)="this.question_bind_model = true;"><span class="btn-inner"><i class="ico ico-note"></i><span class="text">新增题目</span></span></a> </div> </div> </div> <div class="d_content"> <nz-table #nzTable [nzAjaxData]="paperQuestionList" [nzIsPagination]="false"> <thead nz-thead> <tr> <th nz-th><span>序号</span></th> <th nz-th><span>试题名称</span></th> <th nz-th><span>试题类型</span></th> <th nz-th><span>试题分数</span></th> <th nz-th><span>试题操作</span></th> </tr> </thead> <tbody nz-tbody> <tr nz-tbody-tr *ngFor="let data of nzTable.data;let i = index;"> <td nz-td>{{i+1}}</td> <td nz-td class="exam-title" title="{{data?.question_title}}"> {{data?.question_title}} <div *ngIf="data.question_type === \'SINGLE_SELECT\' || data.question_type === \'MULTIPLE_SELECT\'"> <p>选项</p> <span *ngFor="let option of data.options;let i = index"> {{i+1}}.{{option.content}}<br> </span> </div> </td> <td nz-td> {{data.question_type | questionPipe}} </td> <td nz-td (dblclick)="this.currentQuestionId=data.question_id;this.question_score_model = true;"> {{data.score || 0}} </td> <td nz-td> <button nz-button [nzType]="\'primary\'" [nzShape]="\'circle\'" title="题目设置分数" (click)="this.currentQuestionId=data.question_id;this.question_score_model=true;"> <i class="anticon anticon-setting"></i></button> <button nz-button [nzType]="\'primary\'" [nzShape]="\'circle\'" title="删除题目" (click)="this.currentQuestionId=data.question_id;this.deleteQuestion(currentQuestionId)"> <i class="anticon anticon-delete"></i></button> </td> </tr> </tbody> </nz-table> </div> </div> </div> <nz-modal [nzVisible]="this.question_bind_model" [nzTitle]="\'新增题目\'" [nzContent]="modalContent" (nzOnCancel)="this.question_bind_model = false;" [nzWidth]="800" (nzOnOk)="this.paperBindQuestion()"> <ng-template #modalContent> <section class="knowledge-select"> <div nz-form-item nz-row> <div nz-col [nzSpan]="7" nz-form-label> <label nz-form-item-required>知识点</label> </div> <div nz-col [nzSpan]="12" nz-form-control> <nz-checkbox-group [(ngModel)]="this.topKnowledgeList" (ngModelChange)="this.reGetAllQuestionBankQuestion();"></nz-checkbox-group> </div> </div> <div nz-form-item nz-row> <div nz-col [nzSpan]="7" nz-form-label> <label nz-form-item-required>难度范围</label> </div> <div nz-col [nzSpan]="12" nz-form-control> <nz-input-number [(ngModel)]="this.currentDifficultyLow" [nzMin]="0" [nzMax]="this.currentDifficultyHigh" [nzStep]="0.05" (ngModelChange)="this.reGetAllQuestionBankQuestion();"></nz-input-number> - <nz-input-number [(ngModel)]="this.currentDifficultyHigh" [nzMin]="this.currentDifficultyLow" [nzMax]="1" [nzStep]="0.05" (ngModelChange)="this.reGetAllQuestionBankQuestion();"></nz-input-number> </div> </div> </section> <nz-table #nzTableAllQuestionList [(nzPageIndex)]="allQuestionListIndex" [nzTotal]="allQuestionTotal" [nzAjaxData]="questionList" [nzPageSize]="20" [nzIsPagination]="true" (nzDataChange)="_displayDataChange($event)" (nzPageIndexChange)="getAllQuestionBankQuestion()"> <thead nz-thead> <tr> <th nz-th nzCheckbox> <label nz-checkbox [(ngModel)]="_allChecked" [nzIndeterminate]="_indeterminate" (ngModelChange)="_checkAll($event);this.console()"> </label> </th> <th nz-th><span>试题名称</span></th> <th nz-th><span>试题类型</span></th> <th nz-th><span>知识点</span></th> </tr> </thead> <tbody nz-tbody> <tr nz-tbody-tr *ngFor="let data of nzTableAllQuestionList.data"> <td nz-td nzCheckbox> <label nz-checkbox [(ngModel)]="data.checked" (ngModelChange)="console($event)"> </label> </td> <td nz-td> <a>{{data.question_title}}</a> <div *ngIf="data.question_type === \'SINGLE_SELECT\' || data.question_type === \'MULTIPLE_SELECT\'"> <p>选项</p> <span *ngFor="let option of data.options;let i = index"> {{i+1}}.{{option.content}}<br> </span> </div> </td> <td nz-td> {{data.question_type|questionPipe}} </td> <td nz-td> {{data.knowledges[0]?.title}} </td> </tr> </tbody> </nz-table> </ng-template> </nz-modal> <nz-modal [nzVisible]="this.question_score_model" [nzTitle]="\'设置分数\'" [nzContent]="modalContentScore" (nzOnCancel)="this.question_score_model = false;this.formReset();" (nzOnOk)="this.questionSetScore()"> <ng-template #modalContentScore> <div nz-form-item nz-row> <div nz-col [nzSpan]="7" nz-form-label> <label nz-form-item-required>题目分数</label> </div> <div nz-col [nzSpan]="12" nz-form-control> <nz-input-number [nzMin]="0" [nzStep]="1" [(ngModel)]="questionScore"></nz-input-number> <div nz-form-explain *ngIf="!this.currentQuestionId"> 请选择要绑定的题目! </div> </div> </div> </ng-template> </nz-modal> '},883:function(e,t){e.exports=":host ::ng-deep .tag-container nz-tag .ant-tag-text{padding:20px;font-size:20px}:host ::ng-deep .knowledge-select .ant-checkbox-wrapper:nth-of-type(1){margin-left:8px}\n"},884:function(e,t,n){"use strict";var o=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,s=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(r<3?i(s):r>3?i(t,n,s):i(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var r=n(2),s=n(12),a=n(56),l=n(11),c=n(100),d=n(6),u=function(){function e(e,t,n,o,i){var a=this;this.fb=e,this.sss=t,this.uis=n,this.ts=o,this._message=i,this.isVisible=!1,this.onOk=new r.EventEmitter,this.onCancel=new r.EventEmitter,this.paperDifficulty=1,this.selectedKnowledge="",this._examPaperType=[{label:"表演",value:"ACT"},{label:"音乐素养",value:"MUSIC_ABILITY"}],this.gradeList=[],this.questionType=[{label:"课前",value:"PRE_CLASSROOM"},{label:"单选题",value:"SINGLE_SELECT"},{label:"多选题",value:"MULTI_SELECT"},{label:"简答题",value:"SHORT_ANSWER"},{label:"演唱",value:"SING"},{label:"背唱",value:"BEHIND_BACK_SING"},{label:"背奏",value:"BEHIND_BACK_PERFORMANCE"},{label:"演奏",value:"PERFORMANCE"},{label:"视唱",value:"SIGHT_SINGING"}],this.showModal=function(){a.isVisible=!0},this.handleOk=function(e){a.submitForm(),"handle"===a.paperType?a.validateForm.valid&&a.onOk.emit(a.validateForm.value):a.automaticForm.valid&&a.onOk.emit(a.automaticForm.value)},this.handleCancel=function(e){a.isVisible=!1,a.resetForm(),a.onCancel.emit(e)},this.submitForm=function(){for(var e in a.validateForm.controls)a.validateForm.controls[e].markAsDirty()},this.getFormControl=function(e){return a.validateForm.controls[e]},this.getAUTOFormControl=function(e){return a.automaticForm.controls[e]},this.deleteQuestion=function(e){a.questionList.splice(e,1)},this.addQuestion=function(){a.questionList.push({questionType:"SINGLE_SELECT",questionAmount:1})},this.getTopKnowledge=function(){a.ts.getTopKonwledge().subscribe(function(e){200===e.code?(a.topKnowledgeList=e.top,a.topKnowledgeList.forEach(function(e){e.label=e.title,e.value=e.no,e.checked=!1})):a._message.error(e.desc)},function(e){console.error(e)})},this.knowledgeDataConfig=function(){var e=[];a.topKnowledgeList.forEach(function(t){t.checked&&e.push(t.value)}),a.selectedKnowledge=e.join(","),a.automaticForm.controls.knowledge.setValue(a.selectedKnowledge)},this.automaticDifficultyChange=function(){a.automaticForm.controls.difficulty.setValue(a.paperDifficulty)},this.validateFormInit=function(){a.validateForm=a.fb.group({title:["",[s.Validators.required]],score:["",[s.Validators.required]],grade:[""],resolvedTime:[0,[s.Validators.required]],questionNum:[10,[s.Validators.required]],difficulty:[1,[s.Validators.required]],secretLevel:[0,[s.Validators.required]],isOpen:[!1,[s.Validators.required]],examPaperType:["ACT",[s.Validators.required]],producerId:[a.uis.getUserInfo().userId]})},this.automaticFormInit=function(){a.automaticForm=a.fb.group({examId:[""],title:["",[s.Validators.required]],examPaperType:["ACT",[s.Validators.required]],score:[100,[s.Validators.required]],grade:[""],resolvedTime:[0,[s.Validators.required]],singleNum:[0,[s.Validators.required]],multiNum:[0,[s.Validators.required]],shortNum:[0,[s.Validators.required]],singNum:[0,[s.Validators.required]],sightSingingNum:[0,[s.Validators.required]],behindBackSingNum:[0,[s.Validators.required]],behindBackPerformanceNum:[0,[s.Validators.required]],performanceNum:[0,[s.Validators.required]],difficulty:[1],knowledge:[""]})}}return e.prototype.resetForm=function(){for(var e in this.validateFormInit(),this.automaticFormInit(),this.getTopKnowledge(),this.questionList=[{questionType:"SINGLE_SELECT",questionAmount:1}],this.validateForm.controls)this.validateForm.controls[e].markAsPristine()},e.prototype.validateConfirmPassword=function(){var e=this;setTimeout(function(t){e.validateForm.controls.passwordConfirmation.updateValueAndValidity()})},e.prototype.ngOnInit=function(){var e=this;this.validateFormInit(),this.automaticFormInit(),this.questionList=[{questionType:"SINGLE_SELECT",questionAmount:1}],this.getTopKnowledge(),this.sss.queryGrade().subscribe(function(t){200===t.code?e.gradeList=t.gradeList:console.error(t.desc)},function(e){console.error(e)})},o([r.Input(),i("design:type",Object)],e.prototype,"isVisible",void 0),o([r.Input(),i("design:type",Object)],e.prototype,"paperType",void 0),o([r.Input(),i("design:type",Object)],e.prototype,"examType",void 0),o([r.Output(),i("design:type",Object)],e.prototype,"onOk",void 0),o([r.Output(),i("design:type",Object)],e.prototype,"onCancel",void 0),e=o([r.Component({selector:"papers-add",template:n(885),styles:[]}),i("design:paramtypes",[s.FormBuilder,a.StudySectionService,l.UserInfoService,c.TestService,d.NzMessageService])],e)}();t.PapersAddComponent=u},885:function(e,t){e.exports='<div> <nz-modal [nzVisible]="isVisible" [nzTitle]="\'创建试卷\'" [nzContent]="modalContent" (nzOnCancel)="handleCancel($event)" (nzOnOk)="handleOk($event)"> <ng-template #modalContent> <form nz-form [formGroup]="automaticForm" *ngIf="\'auto\'===this.paperType"> <div nz-form-item nz-row> <div nz-form-label nz-col [nzSpan]="7"> <label nz-form-item-required>试卷名称</label> </div> <div nz-col [nzSpan]="12" nz-form-control nzHasFeedback> <nz-input formControlName="title" [nzType]="\'text\'" [nzPlaceHolder]="\'请输入试卷名\'" [nzSize]="\'large\'"> </nz-input> <div nz-form-explain *ngIf="getAUTOFormControl(\'title\').dirty&&getAUTOFormControl(\'title\').hasError(\'required\')"> 请填写试卷名称! </div> <div nz-form-explain *ngIf="getAUTOFormControl(\'title\').dirty&&getAUTOFormControl(\'title\').pending"> Validating... </div> </div> </div> <div nz-form-item nz-row> <div nz-col [nzSpan]="7" nz-form-label> <label nz-form-item-required>试卷分数</label> </div> <div nz-col [nzSpan]="12" nz-form-control> <nz-input-number formControlName="score" [nzMin]="0" [nzStep]="1"></nz-input-number> <div nz-form-explain *ngIf="getAUTOFormControl(\'score\').dirty&&getAUTOFormControl(\'score\').hasError(\'required\')"> 请填写试卷分数! </div> <div nz-form-explain *ngIf="getAUTOFormControl(\'score\').dirty&&getAUTOFormControl(\'score\').pending"> Validating... </div> </div> </div> <div nz-form-item nz-row> <div nz-col [nzSpan]="7" nz-form-label> <label nz-form-item-required>完成时间（分钟）</label> </div> <div nz-col [nzSpan]="12" nz-form-control> <nz-input-number formControlName="resolvedTime" [nzMin]="0" [nzStep]="1"></nz-input-number> <div nz-form-explain *ngIf="getAUTOFormControl(\'resolvedTime\').dirty&&getAUTOFormControl(\'resolvedTime\').hasError(\'required\')"> 请填写试卷完成时间! </div> <div nz-form-explain *ngIf="getAUTOFormControl(\'resolvedTime\').dirty&&getAUTOFormControl(\'resolvedTime\').pending"> Validating... </div> </div> </div> <div nz-form-item nz-row> <div nz-col [nzSpan]="7" nz-form-label> <label nz-form-item-required>知识点</label> </div> <div nz-col [nzSpan]="12" nz-form-control> <nz-checkbox-group [(ngModel)]="this.topKnowledgeList" [ngModelOptions]="{standalone: true}" (ngModelChange)="this.knowledgeDataConfig();"></nz-checkbox-group> <div nz-form-explain *ngIf="getAUTOFormControl(\'knowledge\').dirty&&getAUTOFormControl(\'knowledge\').hasError(\'required\')"> 请选择试卷知识点! </div> </div> </div> <div nz-form-item nz-row> <div nz-col [nzSpan]="7" nz-form-label> <label nz-form-item-required>试卷难度</label> </div> <div nz-col [nzSpan]="12" nz-form-control> <nz-row> <nz-col nzSpan="12"> <nz-slider [nzMin]="0" [nzStep]="0.05" [nzMax]="1" (ngModelChange)="this.automaticDifficultyChange()" [ngModelOptions]="{standalone: true}" [(ngModel)]="this.paperDifficulty"></nz-slider> </nz-col> <div nz-col nzSpan="4"> <nz-input-number [nzMin]="0" [nzMax]="1" [ngStyle]="{\'marginLeft\': \'16px\'}" [nzStep]="0.05" [ngModelOptions]="{standalone: true}" [(ngModel)]="this.paperDifficulty" (ngModelChange)="this.automaticDifficultyChange()"></nz-input-number> </div> </nz-row> <div nz-form-explain *ngIf="getAUTOFormControl(\'difficulty\').dirty&&getAUTOFormControl(\'difficulty\').hasError(\'required\')"> 请选择试卷难度！ </div> </div> </div> <div nz-form-item nz-row> <div nz-col [nzSpan]="7" nz-form-label> <label nz-form-item-required>试卷类型</label> </div> <div nz-col [nzSpan]="12" nz-form-control> <nz-select formControlName="examPaperType" [nzPlaceHolder]="\'请选择试卷类型\'"> <nz-option *ngFor="let data of _examPaperType" [nzLabel]="data.label" [nzValue]="data.value"></nz-option> </nz-select> <div nz-form-explain *ngIf="getAUTOFormControl(\'grade\').dirty&&getAUTOFormControl(\'grade\').hasError(\'required\')"> 请选择试卷类型！ </div> </div> </div> <div nz-form-item nz-row *ngIf="\'MUSIC_ABILITY\'===this.automaticForm.value.examPaperType"> <div nz-col [nzSpan]="7" nz-form-label> <label nz-form-item-required>单选题数目</label> </div> <div nz-col [nzSpan]="12" nz-form-control> <nz-input-number formControlName="singleNum" [nzMin]="0" [nzStep]="1"></nz-input-number> <div nz-form-explain *ngIf="getAUTOFormControl(\'singleNum\').dirty&&getAUTOFormControl(\'singleNum\').hasError(\'required\')"> 请填写试单选题数目! </div> <div nz-form-explain *ngIf="getAUTOFormControl(\'singleNum\').dirty&&getAUTOFormControl(\'singleNum\').pending"> Validating... </div> </div> </div> <div nz-form-item nz-row *ngIf="\'MUSIC_ABILITY\'===this.automaticForm.value.examPaperType"> <div nz-col [nzSpan]="7" nz-form-label> <label nz-form-item-required>多选题个数</label> </div> <div nz-col [nzSpan]="12" nz-form-control> <nz-input-number formControlName="multiNum" [nzMin]="0" [nzStep]="1"></nz-input-number> <div nz-form-explain *ngIf="getAUTOFormControl(\'multiNum\').dirty&&getAUTOFormControl(\'multiNum\').hasError(\'required\')"> 请填写试卷多选题个数! </div> <div nz-form-explain *ngIf="getAUTOFormControl(\'multiNum\').dirty&&getAUTOFormControl(\'multiNum\').pending"> Validating... </div> </div> </div> <div nz-form-item nz-row *ngIf="\'MUSIC_ABILITY\'===this.automaticForm.value.examPaperType"> <div nz-col [nzSpan]="7" nz-form-label> <label nz-form-item-required>简答题个数</label> </div> <div nz-col [nzSpan]="12" nz-form-control> <nz-input-number formControlName="shortNum" [nzMin]="0" [nzStep]="1"></nz-input-number> <div nz-form-explain *ngIf="getAUTOFormControl(\'shortNum\').dirty&&getAUTOFormControl(\'shortNum\').hasError(\'required\')"> 请填写试卷简答题个数! </div> <div nz-form-explain *ngIf="getAUTOFormControl(\'shortNum\').dirty&&getAUTOFormControl(\'shortNum\').pending"> Validating... </div> </div> </div> <div nz-form-item nz-row *ngIf="\'ACT\'===this.automaticForm.value.examPaperType"> <div nz-col [nzSpan]="7" nz-form-label> <label nz-form-item-required>演唱题个数</label> </div> <div nz-col [nzSpan]="12" nz-form-control> <nz-input-number formControlName="singNum" [nzMin]="0" [nzStep]="1"></nz-input-number> <div nz-form-explain *ngIf="getAUTOFormControl(\'singNum\').dirty&&getAUTOFormControl(\'singNum\').hasError(\'required\')"> 请填写试卷演唱题个数! </div> <div nz-form-explain *ngIf="getAUTOFormControl(\'singNum\').dirty&&getAUTOFormControl(\'singNum\').pending"> Validating... </div> </div> </div> <div nz-form-item nz-row *ngIf="\'ACT\'===this.automaticForm.value.examPaperType"> <div nz-col [nzSpan]="7" nz-form-label> <label nz-form-item-required>视唱题个数</label> </div> <div nz-col [nzSpan]="12" nz-form-control> <nz-input-number formControlName="sightSingingNum" [nzMin]="0" [nzStep]="1"></nz-input-number> <div nz-form-explain *ngIf="getAUTOFormControl(\'sightSingingNum\').dirty&&getAUTOFormControl(\'sightSingingNum\').hasError(\'required\')"> 请填写试卷视唱题个数! </div> <div nz-form-explain *ngIf="getAUTOFormControl(\'sightSingingNum\').dirty&&getAUTOFormControl(\'sightSingingNum\').pending"> Validating... </div> </div> </div> <div nz-form-item nz-row *ngIf="\'ACT\'===this.automaticForm.value.examPaperType"> <div nz-col [nzSpan]="7" nz-form-label> <label nz-form-item-required>背唱题个数</label> </div> <div nz-col [nzSpan]="12" nz-form-control> <nz-input-number formControlName="behindBackSingNum" [nzMin]="0" [nzStep]="1"></nz-input-number> <div nz-form-explain *ngIf="getAUTOFormControl(\'behindBackSingNum\').dirty&&getAUTOFormControl(\'behindBackSingNum\').hasError(\'required\')"> 请填写试卷背唱题个数! </div> <div nz-form-explain *ngIf="getAUTOFormControl(\'behindBackSingNum\').dirty&&getAUTOFormControl(\'behindBackSingNum\').pending"> Validating... </div> </div> </div> <div nz-form-item nz-row *ngIf="\'ACT\'===this.automaticForm.value.examPaperType"> <div nz-col [nzSpan]="7" nz-form-label> <label nz-form-item-required>背奏题个数</label> </div> <div nz-col [nzSpan]="12" nz-form-control> <nz-input-number formControlName="behindBackPerformanceNum" [nzMin]="0" [nzStep]="1"></nz-input-number> <div nz-form-explain *ngIf="getAUTOFormControl(\'behindBackPerformanceNum\').dirty&&getAUTOFormControl(\'behindBackPerformanceNum\').hasError(\'required\')"> 请填写试卷背奏题个数! </div> <div nz-form-explain *ngIf="getAUTOFormControl(\'behindBackPerformanceNum\').dirty&&getAUTOFormControl(\'behindBackPerformanceNum\').pending"> Validating... </div> </div> </div> <div nz-form-item nz-row *ngIf="\'ACT\'===this.automaticForm.value.examPaperType"> <div nz-col [nzSpan]="7" nz-form-label> <label nz-form-item-required>演奏题个数</label> </div> <div nz-col [nzSpan]="12" nz-form-control> <nz-input-number formControlName="performanceNum" [nzMin]="0" [nzStep]="1"></nz-input-number> <div nz-form-explain *ngIf="getAUTOFormControl(\'performanceNum\').dirty&&getAUTOFormControl(\'performanceNum\').hasError(\'required\')"> 请填写试卷演奏题个数! </div> <div nz-form-explain *ngIf="getAUTOFormControl(\'performanceNum\').dirty&&getAUTOFormControl(\'performanceNum\').pending"> Validating... </div> </div> </div> </form> <form nz-form [formGroup]="validateForm" *ngIf="\'handle\'===this.paperType"> <div nz-form-item nz-row> <div nz-form-label nz-col [nzSpan]="7"> <label nz-form-item-required>试卷名称</label> </div> <div nz-col [nzSpan]="12" nz-form-control nzHasFeedback> <nz-input formControlName="title" [nzType]="\'text\'" [nzPlaceHolder]="\'请输入试卷名\'" [nzSize]="\'large\'"> </nz-input> <div nz-form-explain *ngIf="getFormControl(\'title\').dirty&&getFormControl(\'title\').hasError(\'required\')"> 请填写试卷名称! </div> <div nz-form-explain *ngIf="getFormControl(\'title\').dirty&&getFormControl(\'title\').pending">Validating... </div> </div> </div> <div nz-form-item nz-row> <div nz-col [nzSpan]="7" nz-form-label> <label nz-form-item-required>试卷分数</label> </div> <div nz-col [nzSpan]="12" nz-form-control> <nz-input-number formControlName="score" [nzMin]="0" [nzStep]="1"></nz-input-number> <div nz-form-explain *ngIf="getFormControl(\'score\').dirty&&getFormControl(\'score\').hasError(\'required\')"> 请填写试卷分数! </div> <div nz-form-explain *ngIf="getFormControl(\'score\').dirty&&getFormControl(\'score\').pending">Validating... </div> </div> </div> <div nz-form-item nz-row> <div nz-col [nzSpan]="7" nz-form-label> <label nz-form-item-required>完成时间(分钟)</label> </div> <div nz-col [nzSpan]="12" nz-form-control> <nz-input-number formControlName="resolvedTime" [nzMin]="0" [nzStep]="1"></nz-input-number> <div nz-form-explain *ngIf="getFormControl(\'score\').dirty&&getFormControl(\'score\').hasError(\'required\')"> 请填写试卷完成时间! </div> <div nz-form-explain *ngIf="getFormControl(\'score\').dirty&&getFormControl(\'score\').pending">Validating... </div> </div> </div> <div nz-form-item nz-row> <div nz-col [nzSpan]="7" nz-form-label> <label nz-form-item-required>知识点</label> </div> <div nz-col [nzSpan]="12" nz-form-control> <nz-checkbox-group [(ngModel)]="this.topKnowledgeList" [ngModelOptions]="{standalone: true}" (ngModelChange)="this.knowledgeDataConfig();"></nz-checkbox-group> <div nz-form-explain *ngIf="getAUTOFormControl(\'knowledge\').dirty&&getAUTOFormControl(\'knowledge\').hasError(\'required\')"> 请选择试卷知识点! </div> </div> </div> <div nz-form-item nz-row> <div nz-col [nzSpan]="7" nz-form-label> <label nz-form-item-required>试卷类型</label> </div> <div nz-col [nzSpan]="12" nz-form-control> <nz-select formControlName="examPaperType" [nzPlaceHolder]="\'请选择试卷类型\'"> <nz-option *ngFor="let data of _examPaperType" [nzLabel]="data.label" [nzValue]="data.value"></nz-option> </nz-select> <div nz-form-explain *ngIf="getFormControl(\'grade\').dirty&&getFormControl(\'grade\').hasError(\'required\')"> 请选择试卷类型！ </div> </div> </div> <div nz-form-item nz-row> <div nz-col [nzSpan]="7" nz-form-label> <label nz-form-item-required>试题总数</label> </div> <div nz-col [nzSpan]="12" nz-form-control> <nz-input-number formControlName="questionNum" [nzMin]="0" [nzStep]="1"></nz-input-number> <div nz-form-explain *ngIf="getFormControl(\'questionNum\').dirty&&getFormControl(\'questionNum\').hasError(\'required\')"> 请填写试卷试题总数! </div> </div> </div> <div nz-form-item nz-row> <div nz-col [nzSpan]="7" nz-form-label> <label nz-form-item-required>试卷难度</label> </div> <div nz-col [nzSpan]="12" nz-form-control> <nz-row> <nz-col nzSpan="12"> <nz-slider [nzMin]="0" [nzStep]="0.05" [nzMax]="1" formControlName="difficulty"></nz-slider> </nz-col> <div nz-col nzSpan="4"> <nz-input-number [nzMin]="0" [nzMax]="1" [ngStyle]="{\'marginLeft\': \'16px\'}" [nzStep]="0.05" [(ngModel)]="validateForm.value.difficulty" formControlName="difficulty"></nz-input-number> </div> </nz-row> <div nz-form-explain *ngIf="getFormControl(\'difficulty\').dirty&&getFormControl(\'difficulty\').hasError(\'required\')"> 请选择试卷难度！ </div> </div> </div> <div nz-form-item nz-row> <div nz-col [nzSpan]="7" nz-form-label> <label nz-form-item-required>保密等级</label> </div> <div nz-col [nzSpan]="12" nz-form-control> <nz-row> <nz-col nzSpan="12"> <nz-slider [nzMin]="0" [nzStep]="1" [nzMax]="9" formControlName="secretLevel"></nz-slider> </nz-col> <div nz-col nzSpan="4"> <nz-input-number [nzMin]="0" [nzMax]="9" [ngStyle]="{ \'marginLeft\': \'16px\' }" [nzStep]="1" [(ngModel)]="this.validateForm.value.secretLevel" formControlName="secretLevel"></nz-input-number> </div> </nz-row> <div nz-form-explain *ngIf="getFormControl(\'secretLevel\').dirty&&getFormControl(\'secretLevel\').hasError(\'required\')"> 请填写试卷保密等级! </div> </div> </div> <div nz-form-item nz-row> <div nz-col [nzSpan]="7" nz-form-label> <label nz-form-item-required>试卷是否公开</label> </div> <div nz-col [nzSpan]="12" nz-form-control> <nz-switch formControlName="isOpen"> <span checked="checked">公开</span> <span unchecked>私密</span> </nz-switch> <div nz-form-explain *ngIf="getFormControl(\'isOpen\').dirty&&getFormControl(\'isOpen\').hasError(\'required\')"> 请选择试卷是否公开! </div> </div> </div> </form> </ng-template> </nz-modal> </div> '},886:function(e,t,n){"use strict";var o=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,s=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(r<3?i(s):r>3?i(t,n,s):i(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s};Object.defineProperty(t,"__esModule",{value:!0});var i=n(2),r=function(){function e(){var e=this;this.examType={CHAPTER_TEST:"单元测试",MIDDLE_TERM_TEST:"期中测试",FINAL_TERM_TEST:"期末测试",OTHER:"其它测试"},this.transform=function(t){return e.examType[t]}}return e=o([i.Pipe({name:"examPipe"})],e)}();t.ExamTypePipe=r;var s=function(){function e(){var e=this;this.examPaperType={MUSIC_ABILITY:"音乐素养",ACT:"表演"},this.transform=function(t){return e.examPaperType[t]}}return e=o([i.Pipe({name:"examPaperTypePipe"})],e)}();t.ExamPaperTypePipe=s},887:function(e,t,n){"use strict";var o=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,s=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(r<3?i(s):r>3?i(t,n,s):i(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s};Object.defineProperty(t,"__esModule",{value:!0});var i=n(2),r=function(){function e(){var e=this;this.map={BEHIND_BACK_PERFORMANCE:"背奏",BEHIND_BACK_SING:"背唱",MULTI_SELECT:"多选题",SINGLE_SELECT:"单选",PERFORMANCE:"演奏",SHORT_ANSWER:"简答",SIGHT_SINGING:"视唱",SING:"演唱"},this.transform=function(t){return e.map[t]}}return e=o([i.Pipe({name:"questionPipe"})],e)}();t.QuestionTypePipe=r},888:function(e,t,n){"use strict";var o=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,s=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(r<3?i(s):r>3?i(t,n,s):i(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var r=n(2),s=function(){function e(){this.option={title:{text:"课后作业作答正确率"},tooltip:{trigger:"axis"},legend:{data:["学生得分","平均分"]},grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0},toolbox:{feature:{saveAsImage:{}}},xAxis:{type:"category",boundaryGap:!1,data:["周一","周二","周三","周四","周五","周六","周日"]},yAxis:{type:"value"},series:[{name:"学生得分",type:"line",stack:"总量",data:[120,132,101,134,90,230,210]},{name:"平均分",type:"line",stack:"总量",data:[220,182,191,234,290,330,310]}]}}return e.prototype.ngOnInit=function(){},e=o([r.Component({selector:"course-homework",template:n(889),styles:[n(890)]}),i("design:paramtypes",[])],e)}();t.CourseHomeworkComponent=s},889:function(e,t){e.exports='<section class="section-container"> <p> 评价正确率：96% </p> <p> 完成练习：18份</p> <p> 课堂参与度：98% </p> <p> 准时提交率：80% </p> </section> <section class="section-container"> <div echarts [options]="this.option"></div> </section> <section class="section-container"> <div class="homework-ceil" nz-row [nzType]="\'flex\'"> <div nz-col [nzSpan]="12"> <h3> 课后作业1 </h3> <div nz-row [nzType]="\'flex\'"> <div nz-col>单元：第一单元</div> <div nz-col>题目数量：6</div> <div nz-col>联系时间：2015-6-11</div> </div> </div> <div nz-col [nzSpan]="12"> <div nz-row [nzType]="\'flex\'" [nzJustify]="\'space-around\'" [nzAlign]="\'center\'"> <p nz-col>准确率：90</p> <p nz-col><a href="javascript:void(main)" [routerLink]="[\'question\']">查看详情</a></p> </div> </div> </div> </section> '},890:function(e,t){e.exports=""},891:function(e,t){e.exports='<nz-layout class="layout" style="flex: 1;display: flex;"> <nz-sider [nzWidth]="220" style="background:#fff"> <ul nz-menu [nzMode]="\'inline\'" style="width: 100%;height: 100%;"> <li nz-menu-item routerLinkActive="ant-menu-item-selected" *ngIf="this.isTeacher"> <a [routerLink]="[\'classIndex\']"><span title><i class="anticon anticon-home"></i>首页</span></a> </li> <li nz-menu-item routerLinkActive="ant-menu-item-selected" *ngIf="this.isTeacher"> <a [routerLink]="[\'classAbility\']"><span title><i class="anticon anticon-book"></i>班级素养</span></a> </li> <li nz-menu-item routerLinkActive="ant-menu-item-selected" *ngIf="this.isTeacher"> <a [routerLink]="[\'studentAbility\']"><span title><i class="anticon anticon-book"></i>学生素养</span></a> </li> <li nz-menu-item routerLinkActive="ant-menu-item-selected" *ngIf="!this.isTeacher"> <a [routerLink]="[\'ability\']"><span title><i class="anticon anticon-book"></i>学生素养</span></a> </li> <li nz-menu-item routerLinkActive="ant-menu-item-selected" *ngIf="!this.isTeacher"> <a [routerLink]="[\'studentQuestionBook\']"><span title><i class="anticon anticon-book"></i>问题集</span></a> </li> </ul> </nz-sider> <nz-content style="background:#fff;flex: 1;padding: 20px;"> <router-outlet></router-outlet> </nz-content> </nz-layout> '},892:function(e,t){e.exports=":host ::ng-deep{display:flex;flex:1;overflow:auto}:host .charts-container{margin-bottom:20px}:host .charts-container>div{text-align:center}:host .section-container{border:1px solid #e3e3e3;margin-bottom:20px}:host .section-container .section-head{font-size:28px;padding:20px;border-bottom:1px solid #e3e3e3}:host .section-container .section-body{padding:20px}\n"},893:function(e,t,n){"use strict";var o=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,s=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(r<3?i(s):r>3?i(t,n,s):i(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var r=n(2),s=function(){function e(){this.option={title:{text:"课后作业作答正确率"},tooltip:{trigger:"axis"},legend:{data:["学生得分","平均分"]},grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0},toolbox:{feature:{saveAsImage:{}}},xAxis:{type:"category",boundaryGap:!1,data:["周一","周二","周三","周四","周五","周六","周日"]},yAxis:{type:"value"},series:[{name:"学生得分",type:"line",stack:"总量",data:[120,132,101,134,90,230,210]},{name:"平均分",type:"line",stack:"总量",data:[220,182,191,234,290,330,310]}]}}return e.prototype.ngOnInit=function(){},e=o([r.Component({selector:"app-analysis",template:n(894),styles:[n(895)]}),i("design:paramtypes",[])],e)}();t.AnalysisComponent=s},894:function(e,t){e.exports='<section class="section-container"> <p> 评价正确率：96% </p> <p> 完成练习：18份</p> <p> 课堂参与度：98% </p> <p> 准时提交率：80% </p> </section> <section class="section-container"> <div echarts [options]="this.option"></div> </section> <section class="section-container"> <div class="homework-ceil" nz-row [nzType]="\'flex\'"> <div nz-col [nzSpan]="12"> <h3> 课后作业1 </h3> <div nz-row [nzType]="\'flex\'"> <div nz-col>单元：第一单元</div> <div nz-col>题目数量：6</div> <div nz-col>联系时间：2015-6-11</div> </div> </div> <div nz-col [nzSpan]="12"> <div nz-row [nzType]="\'flex\'" [nzJustify]="\'space-around\'" [nzAlign]="\'center\'"> <p nz-col>准确率：90</p> <p nz-col><a href="javascript:void(main)" [routerLink]="[\'question\']">查看详情</a></p> </div> </div> </div> </section> '},895:function(e,t){e.exports=""},896:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(453),i=n(454),r=n(455),s=n(456),a=n(457),l=n(458);t.TestAnalysisRoute=[{path:"",component:o.TestAnalysisComponent,children:[{path:"",redirectTo:"classIndex",pathMatch:"full"},{path:"classIndex",component:i.TestIndexComponent},{path:"classAbility",component:r.ClassAbilityComponent},{path:"classAbility/abilityDetail",component:s.AbilityDetailComponent},{path:"studentAbility",component:a.StudentAbilityComponent},{path:"studentAbility/abilityDetail",component:s.AbilityDetailComponent},{path:"ability",component:a.StudentAbilityComponent},{path:"ability/abilityDetail",component:s.AbilityDetailComponent},{path:"studentQuestionBook",component:l.QuestionBookComponent}]}]},897:function(e,t){e.exports='班级素养首页 <section nz-row class="charts-container" [nzType]="\'flex\'"> <div class="grade-btn"> 年级 </div> </section> <section> 班级列表 </section> <section class="section-container" nz-row [nzType]="\'flex\'"> <app-syzs-charts nz-col [nzSpan]="8"></app-syzs-charts> <app-zsfx-charts nz-col [nzSpan]="8"></app-zsfx-charts> <app-nlwd-charts nz-col [nzSpan]="8"></app-nlwd-charts> </section> '},898:function(e,t){e.exports=":host .charts-container{margin-bottom:20px}:host .charts-container>div{text-align:center}:host .section-container{border:1px solid #e3e3e3;margin-bottom:20px}:host .section-container .section-head{font-size:28px;padding:20px;border-bottom:1px solid #e3e3e3}:host .section-container .section-body{padding:20px}\n"},899:function(e,t){e.exports='<section class="section-container" style="border: none;" nz-row> <div nz-col [nzSpan]="12"> <div nz-form-item nz-row> <div nz-col [nzSpan]="7" nz-form-label> <label nz-form-item-required>年级</label> </div> <div nz-col [nzSpan]="12" nz-form-control> <nz-select style="width: 120px;" [nzPlaceHolder]="\'choose option\'" [(ngModel)]="this.currentGradeId" (ngModelChange)="this.getClassList()"> <nz-option *ngFor="let option of this.gradeList" [nzLabel]="option.name" [nzValue]="option.id"> </nz-option> </nz-select> </div> </div> </div> <div nz-col [nzSpan]="12"> <div nz-form-item nz-row> <div nz-col [nzSpan]="7" nz-form-label> <label nz-form-item-required>班级</label> </div> <div nz-col [nzSpan]="12" nz-form-control> <nz-select style="width: 120px;" [nzPlaceHolder]="\'choose option\'" [(ngModel)]="this.currentClassId" (ngModelChange)="this.classChange()"> <nz-option *ngFor="let option of this.classList" [nzLabel]="option.name" [nzValue]="option.id"> </nz-option> </nz-select> </div> </div> </div> </section> <section class="section-container section-range">一年级一班的音乐素养综合等级为：A<br>年级排名为：5  /  15 个班 </section> <section class="section-container" style="display: flex; flex-direction: row; justify-content: space-around; border: none;"> <button [nzGhost]="this.currentIndex === 0" nz-button [nzType]="\'primary\'" (click)="this.currentIndex = 0;">总览 </button> <button [nzGhost]="this.currentIndex === 1" nz-button [nzType]="\'primary\'" (click)="this.currentIndex = 1;">知识分析 </button> <button [nzGhost]="this.currentIndex === 2" nz-button [nzType]="\'primary\'" (click)="this.currentIndex = 2;">能力分析 </button> </section> <div *ngIf="0 === this.currentIndex"> <section class="section-container" nz-row [nzType]="\'flex\'"> <app-syzs-charts nz-col *ngIf="this.abilityTimeData" [nzSpan]="8" [sourceData]="this.abilityTimeData"></app-syzs-charts> <app-zsfx-charts nz-col [nzSpan]="8" [sourceData]="this.knowledgeData"></app-zsfx-charts> <app-nlwd-charts nz-col *ngIf="this.abilityData" [nzSpan]="8" [sourceData]="this.abilityData"></app-nlwd-charts> </section> <section class="section-container"> <div class="section-head">总览：</div> <div class="section-body"> ①音乐素养综合评分为90分，百分等级为20。（班级参考：平均分80分，最高分90分， 最低分70分） ②基础知识得分：70分，基础技能得分：80分，演唱得分90分，编创得分70分，演奏 得分80分，综合艺术表演80分。 ③聆听感受：80分，听辨判断：90分，描述表达：87分，识读乐谱：70分，探索发现： 80分，编创实践：84分，演唱演奏：78分，综合表演：85分 </div> </section> <section class="section-container"> <div class="section-head">问题发现：</div> <div class="section-body"> ①重点关注的知识点：识谱、音高、调式 需要关注的知识点：曲式、节奏 ②重点关注的技能：演唱音准、节奏 需要关注的技能：节拍、调式 </div> </section> <section class="section-container"> <div class="section-head">建议：</div> <div class="section-body"> ①识谱、音高、调式需请教教师，强烈建议复习课本知识或观看相关教学课程 ②演唱音准、节奏需进行针对性练习 </div> </section> </div> <div *ngIf="1 === this.currentIndex"> <div nz-row> <app-zsfx-charts nz-col *ngIf="this.knowledgeData" [nzSpan]="8" [sourceData]="this.knowledgeData"></app-zsfx-charts> <app-ability-card nz-col [nzSpan]="8" [average]="40" [title]="\'yy1\'" [exerciseNum]="40" [isHigher]="true" [classId]="this.currentClassId" [showType]="\'knowledge\'" [type]="this.cardType"></app-ability-card> <app-ability-card nz-col [nzSpan]="8" [average]="40" [title]="\'yy2\'" [exerciseNum]="40" [isHigher]="true" [classId]="this.currentClassId" [showType]="\'knowledge\'" [type]="\'this.cardType\'"></app-ability-card> <app-ability-card nz-col [nzSpan]="8" [average]="40" [title]="\'yy3\'" [exerciseNum]="40" [isHigher]="true" [classId]="this.currentClassId" [showType]="\'knowledge\'" [type]="this.cardType"></app-ability-card> <app-ability-card nz-col [nzSpan]="8" [average]="40" [title]="\'yy4\'" [exerciseNum]="40" [isHigher]="true" [classId]="this.currentClassId" [showType]="\'knowledge\'" [type]="this.cardType"></app-ability-card> <app-ability-card nz-col [nzSpan]="8" [average]="40" [title]="\'yy5\'" [exerciseNum]="40" [isHigher]="true" [classId]="this.currentClassId" [showType]="\'knowledge\'" [type]="this.cardType"></app-ability-card> <app-ability-card nz-col [nzSpan]="8" [average]="40" [title]="\'yy6\'" [exerciseNum]="40" [isHigher]="true" [classId]="this.currentClassId" [showType]="\'knowledge\'" [type]="this.cardType"></app-ability-card> <app-ability-card nz-col [nzSpan]="8" [average]="40" [title]="\'yy7\'" [exerciseNum]="40" [isHigher]="true" [classId]="this.currentClassId" [showType]="\'knowledge\'" [type]="this.cardType"></app-ability-card> <app-ability-card nz-col [nzSpan]="8" [average]="40" [title]="\'yy8\'" [exerciseNum]="40" [isHigher]="true" [classId]="this.currentClassId" [showType]="\'knowledge\'" [type]="this.cardType"></app-ability-card> <app-ability-card nz-col [nzSpan]="8" [average]="40" [title]="\'yy9\'" [exerciseNum]="40" [isHigher]="true" [classId]="this.currentClassId" [showType]="\'knowledge\'" [type]="this.cardType"></app-ability-card> </div> <div nz-row> <app-zsfx-charts *ngIf="this.knowledgeData" nz-col [nzSpan]="8" [sourceData]="this.knowledgeData"></app-zsfx-charts> <app-ability-card nz-col [nzSpan]="8" [average]="this.knowledgeAnalysisData?.average_score[\'yy1\']" [title]="\'yy1\'" [exerciseNum]="this.knowledgeAnalysisData?.exercise_amount[\'yy1\']" [isHigher]="true" [classId]="this.currentClassId" [showType]="\'knowledge\'" [type]="this.cardType"></app-ability-card> <app-ability-card nz-col [nzSpan]="8" [average]="this.knowledgeAnalysisData?.average_score[\'yy2\']" [title]="\'yy2\'" [exerciseNum]="this.knowledgeAnalysisData?.exercise_amount[\'yy2\']" [isHigher]="true" [classId]="this.currentClassId" [showType]="\'knowledge\'" [type]="\'this.cardType\'"></app-ability-card> <app-ability-card nz-col [nzSpan]="8" [average]="this.knowledgeAnalysisData?.average_score[\'yy3\']" [title]="\'yy3\'" [exerciseNum]="this.knowledgeAnalysisData?.exercise_amount[\'yy3\']" [isHigher]="true" [classId]="this.currentClassId" [showType]="\'knowledge\'" [type]="this.cardType"></app-ability-card> <app-ability-card nz-col [nzSpan]="8" [average]="this.knowledgeAnalysisData?.average_score[\'yy4\']" [title]="\'yy4\'" [exerciseNum]="this.knowledgeAnalysisData?.exercise_amount[\'yy4\']" [isHigher]="true" [classId]="this.currentClassId" [showType]="\'knowledge\'" [type]="this.cardType"></app-ability-card> <app-ability-card nz-col [nzSpan]="8" [average]="this.knowledgeAnalysisData?.average_score[\'yy5\']" [title]="\'yy5\'" [exerciseNum]="this.knowledgeAnalysisData?.exercise_amount[\'yy5\']" [isHigher]="true" [classId]="this.currentClassId" [showType]="\'knowledge\'" [type]="this.cardType"></app-ability-card> <app-ability-card nz-col [nzSpan]="8" [average]="this.knowledgeAnalysisData?.average_score[\'yy6\']" [title]="\'yy6\'" [exerciseNum]="this.knowledgeAnalysisData?.exercise_amount[\'yy6\']" [isHigher]="true" [classId]="this.currentClassId" [showType]="\'knowledge\'" [type]="this.cardType"></app-ability-card> <app-ability-card nz-col [nzSpan]="8" [average]="this.knowledgeAnalysisData?.average_score[\'yy7\']" [title]="\'yy7\'" [exerciseNum]="this.knowledgeAnalysisData?.exercise_amount[\'yy7\']" [isHigher]="true" [classId]="this.currentClassId" [showType]="\'knowledge\'" [type]="this.cardType"></app-ability-card> <app-ability-card nz-col [nzSpan]="8" [average]="this.knowledgeAnalysisData?.average_score[\'yy8\']" [title]="\'yy8\'" [exerciseNum]="this.knowledgeAnalysisData?.exercise_amount[\'yy8\']" [isHigher]="true" [classId]="this.currentClassId" [showType]="\'knowledge\'" [type]="this.cardType"></app-ability-card> <app-ability-card nz-col [nzSpan]="8" [average]="this.knowledgeAnalysisData?.average_score[\'yy9\']" [title]="\'yy9\'" [exerciseNum]="this.knowledgeAnalysisData?.exercise_amount[\'yy9\']" [isHigher]="true" [classId]="this.currentClassId" [showType]="\'knowledge\'" [type]="this.cardType"></app-ability-card> </div> </div> <div *ngIf="2 === this.currentIndex"> <div nz-row> <app-nlwd-charts *ngIf="this.abilityData" nz-col [nzSpan]="8" [sourceData]="this.abilityData"></app-nlwd-charts> <app-ability-card nz-col [nzSpan]="8" [average]="this.abilityData?.STAFF" [title]="\'STAFF\'" [exerciseNum]="this.abilityData?.STAFF_NUM" [isHigher]="true" [classId]="this.currentClassId" [showType]="\'ability\'" [type]="this.cardType"></app-ability-card> <app-ability-card nz-col [nzSpan]="8" [average]="this.abilityData?.MUSIC_APPRECIATE" [title]="\'MUSIC_APPRECIATE\'" [exerciseNum]="this.abilityData?.MUSIC_APPRECIATE_NUM" [isHigher]="true" [classId]="this.currentClassId" [showType]="\'ability\'" [type]="this.cardType"></app-ability-card> <app-ability-card nz-col [nzSpan]="8" [average]="this.abilityData?.SIGHT_SINGING" [title]="\'SIGHT_SINGING\'" [exerciseNum]="this.abilityData?.SIGHT_SINGING_NUM" [isHigher]="true" [classId]="this.currentClassId" [showType]="\'ability\'" [type]="this.cardType"></app-ability-card> <app-ability-card nz-col [nzSpan]="8" [average]="this.abilityData?.EAR_TRAINING" [title]="\'EAR_TRAINING\'" [exerciseNum]="this.abilityData?.EAR_TRAINING_NUM" [isHigher]="true" [classId]="this.currentClassId" [showType]="\'ability\'" [type]="this.cardType"></app-ability-card> <app-ability-card nz-col [nzSpan]="8" [average]="this.abilityData?.MUSIC_PERFORMANCE" [title]="\'MUSIC_PERFORMANCE\'" [exerciseNum]="this.abilityData?.MUSIC_PERFORMANCE_NUM" [isHigher]="true" [classId]="this.currentClassId" [showType]="\'ability\'" [type]="this.cardType"></app-ability-card> <app-ability-card nz-col [nzSpan]="8" [average]="this.abilityData?.CREATING" [title]="\'CREATING\'" [exerciseNum]="this.abilityData?.CREATING_NUM" [isHigher]="true" [classId]="this.currentClassId" [showType]="\'ability\'" [type]="this.cardType"></app-ability-card> <app-ability-card nz-col [nzSpan]="8" [average]="this.abilityData?.COMPOSITE_ART_PERFORMANCE" [title]="\'COMPOSITE_ART_PERFORMANCE\'" [exerciseNum]="this.abilityData?.COMPOSITE_ART_PERFORMANCE_NUM" [isHigher]="true" [classId]="this.currentClassId" [showType]="\'ability\'" [type]="this.cardType"></app-ability-card> </div> </div> '},900:function(e,t){e.exports=":host .charts-container{margin-bottom:20px}:host .charts-container>div{text-align:center}:host .section-range{text-align:center;font-size:30px;font-weight:600;padding:20px}:host .section-container{border:1px solid #e3e3e3;margin-bottom:20px}:host .section-container .section-head{font-size:28px;padding:20px;border-bottom:1px solid #e3e3e3}:host .section-container .section-body{padding:20px}\n"},901:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.dataSourceList=[{label:"随堂练习",value:"EXERCISE"},{label:"课后作业",value:"TASK"},{label:"单元测试",value:"CHAPTER_TEST"},{label:"期中测试",value:"MIDDLE_TERM_TEST"},{label:"期末考试",value:"FINAL_TERM_TEST"}]},902:function(e,t){e.exports=' <section> <app-ylzw-charts [sourceData]="this.abilityOrKnowledgeData" [type]="this.abilityType?\'knowledge\':\'ability\'"></app-ylzw-charts> </section> <section> <div nz-form-item nz-row> <div nz-col [nzSpan]="7" nz-form-label> <label nz-form-item-required>试题来源</label> </div> <div nz-col [nzSpan]="12" nz-form-control> <nz-select style="width: 120px;" [nzPlaceHolder]="\'choose option\'" [(ngModel)]="this.currentSourceType" (ngModelChange)="this.dataInit()"> <nz-option *ngFor="let option of this.sourceList" [nzLabel]="option.label" [nzValue]="option.value"> </nz-option> </nz-select> </div> </div> <div nz-form-item nz-row *ngIf="this.abilityType"> <div nz-col [nzSpan]="7" nz-form-label> <label nz-form-item-required>音乐知识</label> </div> <div nz-col [nzSpan]="12" nz-form-control> <nz-select style="width: 120px;" [nzPlaceHolder]="\'choose option\'" [(ngModel)]="this.currentSecondKnowledge" (ngModelChange)="this.refreshQuestion();"> <nz-option *ngFor="let option of this.secondKnowledgeList" [nzLabel]="option.title" [nzValue]="option.no"> </nz-option> </nz-select> </div> </div> <div nz-form-item nz-row *ngIf="!this.abilityType"> <div nz-col [nzSpan]="7" nz-form-label> <label nz-form-item-required>音乐素养</label> </div> <div nz-col [nzSpan]="12" nz-form-control> <nz-select style="width: 120px;" [nzPlaceHolder]="\'choose option\'" [(ngModel)]="this.currentSecondAbility" (ngModelChange)="this.refreshQuestion();"> <nz-option *ngFor="let option of this.secondAbilityList" [nzLabel]="option.label" [nzValue]="option.value"> </nz-option> </nz-select> </div> </div> </section> <section> <app-question-detail *ngFor="let question of this.questionList" [question]="question" [classId]="this.classId" [studentId]="this.studentId"></app-question-detail> </section> '},903:function(e,t){e.exports=""},905:function(e,t){e.exports=' <section class="section-container" *ngIf="this.isTeacher" nz-row [nzType]="\'flex\'" style="border: none;"> <div nz-col [nzSpan]="8"> <div nz-form-item nz-row> <div nz-col [nzSpan]="7" nz-form-label> <label nz-form-item-required>年级</label> </div> <div nz-col [nzSpan]="17" nz-form-control> <nz-select style="width: 120px;" [nzPlaceHolder]="\'choose option\'" [(ngModel)]="this.currentGradeId" (ngModelChange)="this.gradeChange();"> <nz-option *ngFor="let grade of this.gradeList" [nzLabel]="grade.name" [nzValue]="grade.id"> </nz-option> </nz-select> </div> </div> </div> <div nz-col [nzSpan]="8"> <div nz-form-item nz-row> <div nz-col [nzSpan]="7" nz-form-label> <label nz-form-item-required>班级</label> </div> <div nz-col [nzSpan]="17" nz-form-control> <nz-select style="width: 120px;" [nzPlaceHolder]="\'choose option\'" [(ngModel)]="this.currentClassId" (ngModelChange)="this.classChange();"> <nz-option *ngFor="let _class of this.classList" [nzLabel]="_class.name" [nzValue]="_class.id"> </nz-option> </nz-select> </div> </div> </div> <div nz-col [nzSpan]="8"> <div nz-form-item nz-row> <div nz-col [nzSpan]="7" nz-form-label> <label nz-form-item-required>学生</label> </div> <div nz-col [nzSpan]="17" nz-form-control> <nz-select style="width: 120px;" [nzPlaceHolder]="\'choose option\'" [(ngModel)]="this.currentStudentId.id" (ngModelChange)="this.studentChange();"> <nz-option *ngFor="let student of this.studentList" [nzLabel]="student.name" [nzValue]="student.id"> </nz-option> </nz-select> </div> </div> </div> </section> <section class="section-container section-range"> {{this.currentStudentName}}的音乐素养综合等级为：A     </section> <section class="section-container" style="display: flex; flex-direction: row; justify-content: space-around; border: none;"> <button [nzGhost]="this.currentIndex === 0" nz-button [nzType]="\'primary\'" (click)="this.currentIndex = 0;">总览 </button> <button [nzGhost]="this.currentIndex === 1" nz-button [nzType]="\'primary\'" (click)="this.currentIndex = 1;">知识分析 </button> <button [nzGhost]="this.currentIndex === 2" nz-button [nzType]="\'primary\'" (click)="this.currentIndex = 2;">能力分析 </button> </section> <div *ngIf="0 === this.currentIndex"> <section class="section-container" nz-row [nzType]="\'flex\'"> <app-syzs-charts *ngIf="this.studentAbilityDegreeData" nz-col [nzSpan]="8" [sourceData]="this.studentAbilityDegreeData"></app-syzs-charts> <app-zsfx-charts *ngIf="this.knowledgeData" nz-col [nzSpan]="8" [sourceData]="this.knowledgeAnalysisData?.average_score"></app-zsfx-charts> <app-nlwd-charts *ngIf="this.abilityData" nz-col [nzSpan]="8" [sourceData]="this.abilityData"></app-nlwd-charts> </section> <section class="section-container"> <div class="section-head">总览：</div> <div class="section-body"> ①音乐素养综合评分为90分，百分等级为20。（班级参考：平均分80分，最高分90分， 最低分70分） ②基础知识得分：70分，基础技能得分：80分，演唱得分90分，编创得分70分，演奏 得分80分，综合艺术表演80分。 ③聆听感受：80分，听辨判断：90分，描述表达：87分，识读乐谱：70分，探索发现： 80分，编创实践：84分，演唱演奏：78分，综合表演：85分 </div> </section> <section class="section-container"> <div class="section-head">问题发现：</div> <div class="section-body"> ①重点关注的知识点：识谱、音高、调式 需要关注的知识点：曲式、节奏 ②重点关注的技能：演唱音准、节奏 需要关注的技能：节拍、调式 </div> </section> <section class="section-container"> <div class="section-head">建议：</div> <div class="section-body"> ①识谱、音高、调式需请教教师，强烈建议复习课本知识或观看相关教学课程 ②演唱音准、节奏需进行针对性练习 </div> </section> </div> <div *ngIf="1 === this.currentIndex"> <div nz-row> <app-zsfx-charts *ngIf="this.knowledgeData" nz-col [nzSpan]="8" [sourceData]="this.knowledgeAnalysisData?.average_score"></app-zsfx-charts> <app-ability-card nz-col [nzSpan]="8" [average]="this.knowledgeAnalysisData.average_score[\'yy1\']" [title]="\'yy1\'" [exerciseNum]="this.knowledgeAnalysisData.exercise_amount[\'yy1\']" [isHigher]="this.knowledgeAnalysisData.bigger_than_average.yy1" [studentId]="this.currentStudentId.id" [showType]="\'knowledge\'" [type]="this.cardType"></app-ability-card> <app-ability-card nz-col [nzSpan]="8" [average]="this.knowledgeAnalysisData.average_score[\'yy2\']" [title]="\'yy2\'" [exerciseNum]="this.knowledgeAnalysisData.exercise_amount[\'yy2\']" [isHigher]="this.knowledgeAnalysisData.bigger_than_average.yy2" [studentId]="this.currentStudentId.id" [showType]="\'knowledge\'" [type]="this.cardType"></app-ability-card> <app-ability-card nz-col [nzSpan]="8" [average]="this.knowledgeAnalysisData.average_score[\'yy3\']" [title]="\'yy3\'" [exerciseNum]="this.knowledgeAnalysisData.exercise_amount[\'yy3\']" [isHigher]="this.knowledgeAnalysisData.bigger_than_average.yy3" [studentId]="this.currentStudentId.id" [showType]="\'knowledge\'" [type]="this.cardType"></app-ability-card> <app-ability-card nz-col [nzSpan]="8" [average]="this.knowledgeAnalysisData.average_score[\'yy4\']" [title]="\'yy4\'" [exerciseNum]="this.knowledgeAnalysisData.exercise_amount[\'yy4\']" [isHigher]="this.knowledgeAnalysisData.bigger_than_average.yy4" [studentId]="this.currentStudentId.id" [showType]="\'knowledge\'" [type]="this.cardType"></app-ability-card> <app-ability-card nz-col [nzSpan]="8" [average]="this.knowledgeAnalysisData.average_score[\'yy5\']" [title]="\'yy5\'" [exerciseNum]="this.knowledgeAnalysisData.exercise_amount[\'yy5\']" [isHigher]="this.knowledgeAnalysisData.bigger_than_average.yy5" [studentId]="this.currentStudentId.id" [showType]="\'knowledge\'" [type]="this.cardType"></app-ability-card> <app-ability-card nz-col [nzSpan]="8" [average]="this.knowledgeAnalysisData.average_score[\'yy6\']" [title]="\'yy6\'" [exerciseNum]="this.knowledgeAnalysisData.exercise_amount[\'yy6\']" [isHigher]="this.knowledgeAnalysisData.bigger_than_average.yy6" [studentId]="this.currentStudentId.id" [showType]="\'knowledge\'" [type]="this.cardType"></app-ability-card> <app-ability-card nz-col [nzSpan]="8" [average]="this.knowledgeAnalysisData.average_score[\'yy7\']" [title]="\'yy7\'" [exerciseNum]="this.knowledgeAnalysisData.exercise_amount[\'yy7\']" [isHigher]="this.knowledgeAnalysisData.bigger_than_average.yy7" [studentId]="this.currentStudentId.id" [showType]="\'knowledge\'" [type]="this.cardType"></app-ability-card> <app-ability-card nz-col [nzSpan]="8" [average]="this.knowledgeAnalysisData.average_score[\'yy8\']" [title]="\'yy8\'" [exerciseNum]="this.knowledgeAnalysisData.exercise_amount[\'yy8\']" [isHigher]="this.knowledgeAnalysisData.bigger_than_average.yy8" [studentId]="this.currentStudentId.id" [showType]="\'knowledge\'" [type]="this.cardType"></app-ability-card> <app-ability-card nz-col [nzSpan]="8" [average]="this.knowledgeAnalysisData.average_score[\'yy9\']" [title]="\'yy9\'" [exerciseNum]="this.knowledgeAnalysisData.exercise_amount[\'yy9\']" [isHigher]="this.knowledgeAnalysisData.bigger_than_average.yy9" [studentId]="this.currentStudentId.id" [showType]="\'knowledge\'" [type]="this.cardType"></app-ability-card> </div> </div> <div *ngIf="2 === this.currentIndex"> <div nz-row> <app-nlwd-charts *ngIf="this.abilityData" nz-col [nzSpan]="8" [sourceData]="this.abilityData"></app-nlwd-charts> <app-ability-card nz-col [nzSpan]="8" [average]="this.abilityData?.STAFF" [title]="\'STAFF\'" [exerciseNum]="this.abilityData?.STAFF_NUM" [isHigher]="true" [studentId]="this.currentStudentId.id" [showType]="\'ability\'" [type]="this.cardType"></app-ability-card> <app-ability-card nz-col [nzSpan]="8" [average]="this.abilityData?.MUSIC_APPRECIATE" [title]="\'MUSIC_APPRECIATE\'" [exerciseNum]="this.abilityData?.MUSIC_APPRECIATE_NUM" [isHigher]="true" [studentId]="this.currentStudentId.id" [showType]="\'ability\'" [type]="this.cardType"></app-ability-card> <app-ability-card nz-col [nzSpan]="8" [average]="this.abilityData?.SIGHT_SINGING" [title]="\'SIGHT_SINGING\'" [exerciseNum]="this.abilityData?.SIGHT_SINGING_NUM" [isHigher]="true" [studentId]="this.currentStudentId.id" [showType]="\'ability\'" [type]="this.cardType"></app-ability-card> <app-ability-card nz-col [nzSpan]="8" [average]="this.abilityData?.EAR_TRAINING" [title]="\'EAR_TRAINING\'" [exerciseNum]="this.abilityData?.EAR_TRAINING_NUM" [isHigher]="true" [studentId]="this.currentStudentId.id" [showType]="\'ability\'" [type]="this.cardType"></app-ability-card> <app-ability-card nz-col [nzSpan]="8" [average]="this.abilityData?.MUSIC_PERFORMANCE" [title]="\'MUSIC_PERFORMANCE\'" [exerciseNum]="this.abilityData?.MUSIC_PERFORMANCE_NUM" [isHigher]="true" [studentId]="this.currentStudentId.id" [showType]="\'ability\'" [type]="this.cardType"></app-ability-card> <app-ability-card nz-col [nzSpan]="8" [average]="this.abilityData?.CREATING" [title]="\'CREATING\'" [exerciseNum]="this.abilityData?.CREATING_NUM" [isHigher]="true" [studentId]="this.currentStudentId.id" [showType]="\'ability\'" [type]="this.cardType"></app-ability-card> <app-ability-card nz-col [nzSpan]="8" [average]="this.abilityData?.COMPOSITE_ART_PERFORMANCE" [title]="\'COMPOSITE_ART_PERFORMANCE\'" [exerciseNum]="this.abilityData?.COMPOSITE_ART_PERFORMANCE_NUM" [isHigher]="true" [studentId]="this.currentStudentId.id" [showType]="\'ability\'" [type]="this.cardType"></app-ability-card> </div> </div> '},906:function(e,t){e.exports=":host ::ng-deep{flex:1;overflow:auto}:host .charts-container{margin-bottom:20px}:host .charts-container>div{text-align:center}:host .section-range{text-align:center;font-size:30px;font-weight:600;padding:20px}:host .section-container{border:1px solid #e3e3e3;margin-bottom:20px}:host .section-container .section-head{font-size:28px;padding:20px;border-bottom:1px solid #e3e3e3}:host .section-container .section-body{padding:20px}\n"},907:function(e,t){e.exports='<section class="section-container" nz-row [nzType]="\'flex\'" style="border: none;"> <div nz-col [nzSpan]="8"> <div nz-form-item nz-row> <div nz-col [nzSpan]="7" nz-form-label> <label nz-form-item-required>试题来源</label> </div> <div nz-col [nzSpan]="17" nz-form-control> <nz-select style="width: 120px;" [nzPlaceHolder]="\'choose option\'" [(ngModel)]="this.currentSource" (ngModelChange)="this.getQuestionList()"> <nz-option [nzLabel]="\'全部\'" [nzValue]="\'\'"> </nz-option> <nz-option [nzLabel]="\'随堂练习\'" [nzValue]="\'EXERCISE\'"> </nz-option> <nz-option [nzLabel]="\'课后作业\'" [nzValue]="\'TASK\'"> </nz-option> <nz-option [nzLabel]="\'单元测试\'" [nzValue]="\'CHAPTER_TEST\'"> </nz-option> <nz-option [nzLabel]="\'期中测试\'" [nzValue]="\'MIDDLE_TERM_TEST\'"> </nz-option> <nz-option [nzLabel]="\'期末考试\'" [nzValue]="\'FINAL_TERM_TEST\'"> </nz-option> </nz-select> </div> </div> </div> <div nz-col [nzSpan]="8"> <div nz-form-item nz-row> <div nz-col [nzSpan]="7" nz-form-label> <label nz-form-item-required>音乐技能</label> </div> <div nz-col [nzSpan]="17" nz-form-control> <nz-select style="width: 120px;" [nzPlaceHolder]="\'choose option\'" [(ngModel)]="this.currentSkill" (ngModelChange)="this.getQuestionList()"> <nz-option [nzLabel]="\'全部\'" [nzValue]="\'\'"> </nz-option> <nz-option [nzLabel]="\'识谱\'" [nzValue]="\'STAFF\'"> </nz-option> <nz-option [nzLabel]="\'视唱\'" [nzValue]="\'SIGHT_SINGING\'"> </nz-option> <nz-option [nzLabel]="\'练耳\'" [nzValue]="\'EAR_TRAINING\'"> </nz-option> <nz-option [nzLabel]="\'编创\'" [nzValue]="\'CREATING\'"> </nz-option> <nz-option [nzLabel]="\'音乐表演\'" [nzValue]="\'MUSIC_PERFORMANCE\'"> </nz-option> <nz-option [nzLabel]="\'音乐鉴赏\'" [nzValue]="\'MUSIC_APPRECIATE\'"> </nz-option> <nz-option [nzLabel]="\'综合艺术表演\'" [nzValue]="\'COMPOSITE_ART_PERFORMANCE\'"> </nz-option> </nz-select> </div> </div> </div> <div nz-col [nzSpan]="8"> <div nz-form-item nz-row> <div nz-col [nzSpan]="7" nz-form-label> <label nz-form-item-required>音乐知识</label> </div> <div nz-col [nzSpan]="17" nz-form-control> <nz-select style="width: 120px;" [nzPlaceHolder]="\'choose option\'" [(ngModel)]="this.currentKnowledge" (ngModelChange)="this.getQuestionList()"> <nz-option [nzLabel]="\'全部\'" [nzValue]="\'\'"> </nz-option> <nz-option [nzLabel]="\'记谱法\'" [nzValue]="\'yy1\'"> </nz-option> <nz-option [nzLabel]="\'音高、音程、和弦\'" [nzValue]="\'yy2\'"> </nz-option> <nz-option [nzLabel]="\'节奏与节拍\'" [nzValue]="\'yy3\'"> </nz-option> <nz-option [nzLabel]="\'旋律\'" [nzValue]="\'yy4\'"> </nz-option> <nz-option [nzLabel]="\'调式\'" [nzValue]="\'yy5\'"> </nz-option> <nz-option [nzLabel]="\'曲式\'" [nzValue]="\'yy6\'"> </nz-option> <nz-option [nzLabel]="\'和声\'" [nzValue]="\'yy7\'"> </nz-option> <nz-option [nzLabel]="\'配器\'" [nzValue]="\'yy8\'"> </nz-option> <nz-option [nzLabel]="\'音乐文化\'" [nzValue]="\'yy9\'"> </nz-option> </nz-select> </div> </div> </div> </section> <section> <app-question-detail *ngFor="let question of this.questionList" [navigateFrom]="\'student\'" [classId]="this.classId" [question]="question"></app-question-detail> </section> '},908:function(e,t){e.exports=""},909:function(e,t,n){"use strict";var o=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,s=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(r<3?i(s):r>3?i(t,n,s):i(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var r=n(2),s=function(){function e(){this.option={title:{text:"课后作业作答正确率"},tooltip:{trigger:"axis"},legend:{data:["学生得分","平均分"]},grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0},toolbox:{feature:{saveAsImage:{}}},xAxis:{type:"category",boundaryGap:!1,data:["周一","周二","周三","周四","周五","周六","周日"]},yAxis:{type:"value"},series:[{name:"学生得分",type:"line",stack:"总量",data:[120,132,101,134,90,230,210]},{name:"平均分",type:"line",stack:"总量",data:[220,182,191,234,290,330,310]}]}}return e.prototype.ngOnInit=function(){},e=o([r.Component({selector:"course-excise",template:n(910),styles:[n(911)]}),i("design:paramtypes",[])],e)}();t.CourseExciseComponent=s},910:function(e,t){e.exports='<section class="section-container"> <p> 评价正确率：96% </p> <p> 完成练习：18份</p> <p> 课堂参与度：98% </p> <p> 准时提交率：80% </p> </section> <section class="section-container"> <div echarts [options]="this.option"></div> </section> <section class="section-container"> <div class="homework-ceil" nz-row [nzType]="\'flex\'"> <div nz-col [nzSpan]="12"> <h3> 课后作业1 </h3> <div nz-row [nzType]="\'flex\'"> <div nz-col>单元：第一单元</div> <div nz-col>题目数量：6</div> <div nz-col>联系时间：2015-6-11</div> </div> </div> <div nz-col [nzSpan]="12"> <div nz-row [nzType]="\'flex\'" [nzJustify]="\'space-around\'" [nzAlign]="\'center\'"> <p nz-col>准确率：90</p> <p nz-col><a href="javascript:void(main)" [routerLink]="[\'question\']">查看详情</a></p> </div> </div> </div> </section> '},911:function(e,t){e.exports=".section-container{margin-bottom:20px}\n"},99:function(e,t,n){"use strict";var o=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,s=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(r<3?i(s):r>3?i(t,n,s):i(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var r=n(32),s=n(2);n(758);var a=n(28),l=function(){function e(e){this.http=e}return e.prototype.musicLogin=function(e,t){var n=(new r.HttpParams).set("login",e).set("password",t);return this.http.post(a.environment.basePath+"user/login",n,{headers:{contentType:"application/x-www-form-unrecoded"}}).shareReplay()},e.prototype.musicLogout=function(e){(new r.HttpParams).set("uid",e);return this.http.get(a.environment.basePath+"user/logout/?uid="+e,{headers:{contentType:"application/x-www-form-unrecoded"}})},e.prototype.musicRegister=function(e,t,n,o){var i=(new r.HttpParams).set("email",e).set("code",t).set("password",n).set("isTeacher",o);return this.http.post(a.environment.basePath+"user/register/email",i,{headers:{contentType:"application/x-www-form-unrecoded"}}).shareReplay()},e.prototype.musicGetCaptcha=function(e){var t=(new r.HttpParams).set("email",e);return this.http.post(a.environment.basePath+"user/email/send_code",t,{headers:{contentType:"application/x-www-form-unrecoded"}}).shareReplay()},e.prototype.musicRevisePassword=function(e,t,n){var o=(new r.HttpParams).set("email",e).set("code",t).set("password",n);return this.http.post(a.environment.basePath+"user/re_password",o,{headers:{contentType:"application/x-www-form-unrecoded"}}).shareReplay()},e=o([s.Injectable(),i("design:paramtypes",[r.HttpClient])],e)}();t.SignService=l}},[691]);